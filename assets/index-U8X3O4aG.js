(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function OS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cf={exports:{}},il={},hf={exports:{}},Ve={};var Wy;function bS(){if(Wy)return Ve;Wy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function E(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,M={};function F(D,W,me){this.props=D,this.context=W,this.refs=M,this.updater=me||A}F.prototype.isReactComponent={},F.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},F.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function J(){}J.prototype=F.prototype;function K(D,W,me){this.props=D,this.context=W,this.refs=M,this.updater=me||A}var H=K.prototype=new J;H.constructor=K,N(H,F.prototype),H.isPureReactComponent=!0;var Q=Array.isArray,re=Object.prototype.hasOwnProperty,ue={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(D,W,me){var Ce,Re={},ke=null,Me=null;if(W!=null)for(Ce in W.ref!==void 0&&(Me=W.ref),W.key!==void 0&&(ke=""+W.key),W)re.call(W,Ce)&&!k.hasOwnProperty(Ce)&&(Re[Ce]=W[Ce]);var Be=arguments.length-2;if(Be===1)Re.children=me;else if(1<Be){for(var He=Array(Be),rt=0;rt<Be;rt++)He[rt]=arguments[rt+2];Re.children=He}if(D&&D.defaultProps)for(Ce in Be=D.defaultProps,Be)Re[Ce]===void 0&&(Re[Ce]=Be[Ce]);return{$$typeof:n,type:D,key:ke,ref:Me,props:Re,_owner:ue.current}}function C(D,W){return{$$typeof:n,type:D.type,key:W,ref:D.ref,props:D.props,_owner:D._owner}}function x(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function O(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(me){return W[me]})}var L=/\/+/g;function P(D,W){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):W.toString(36)}function Pe(D,W,me,Ce,Re){var ke=typeof D;(ke==="undefined"||ke==="boolean")&&(D=null);var Me=!1;if(D===null)Me=!0;else switch(ke){case"string":case"number":Me=!0;break;case"object":switch(D.$$typeof){case n:case e:Me=!0}}if(Me)return Me=D,Re=Re(Me),D=Ce===""?"."+P(Me,0):Ce,Q(Re)?(me="",D!=null&&(me=D.replace(L,"$&/")+"/"),Pe(Re,W,me,"",function(rt){return rt})):Re!=null&&(x(Re)&&(Re=C(Re,me+(!Re.key||Me&&Me.key===Re.key?"":(""+Re.key).replace(L,"$&/")+"/")+D)),W.push(Re)),1;if(Me=0,Ce=Ce===""?".":Ce+":",Q(D))for(var Be=0;Be<D.length;Be++){ke=D[Be];var He=Ce+P(ke,Be);Me+=Pe(ke,W,me,He,Re)}else if(He=E(D),typeof He=="function")for(D=He.call(D),Be=0;!(ke=D.next()).done;)ke=ke.value,He=Ce+P(ke,Be++),Me+=Pe(ke,W,me,He,Re);else if(ke==="object")throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Me}function je(D,W,me){if(D==null)return D;var Ce=[],Re=0;return Pe(D,Ce,"","",function(ke){return W.call(me,ke,Re++)}),Ce}function Ne(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(me){(D._status===0||D._status===-1)&&(D._status=1,D._result=me)},function(me){(D._status===0||D._status===-1)&&(D._status=2,D._result=me)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var De={current:null},te={transition:null},fe={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:te,ReactCurrentOwner:ue};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:je,forEach:function(D,W,me){je(D,function(){W.apply(this,arguments)},me)},count:function(D){var W=0;return je(D,function(){W++}),W},toArray:function(D){return je(D,function(W){return W})||[]},only:function(D){if(!x(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ve.Component=F,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=K,Ve.StrictMode=i,Ve.Suspense=f,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ve.act=ie,Ve.cloneElement=function(D,W,me){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Ce=N({},D.props),Re=D.key,ke=D.ref,Me=D._owner;if(W!=null){if(W.ref!==void 0&&(ke=W.ref,Me=ue.current),W.key!==void 0&&(Re=""+W.key),D.type&&D.type.defaultProps)var Be=D.type.defaultProps;for(He in W)re.call(W,He)&&!k.hasOwnProperty(He)&&(Ce[He]=W[He]===void 0&&Be!==void 0?Be[He]:W[He])}var He=arguments.length-2;if(He===1)Ce.children=me;else if(1<He){Be=Array(He);for(var rt=0;rt<He;rt++)Be[rt]=arguments[rt+2];Ce.children=Be}return{$$typeof:n,type:D.type,key:Re,ref:ke,props:Ce,_owner:Me}},Ve.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:a,_context:D},D.Consumer=D},Ve.createElement=S,Ve.createFactory=function(D){var W=S.bind(null,D);return W.type=D,W},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(D){return{$$typeof:d,render:D}},Ve.isValidElement=x,Ve.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:Ne}},Ve.memo=function(D,W){return{$$typeof:m,type:D,compare:W===void 0?null:W}},Ve.startTransition=function(D){var W=te.transition;te.transition={};try{D()}finally{te.transition=W}},Ve.unstable_act=ie,Ve.useCallback=function(D,W){return De.current.useCallback(D,W)},Ve.useContext=function(D){return De.current.useContext(D)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(D){return De.current.useDeferredValue(D)},Ve.useEffect=function(D,W){return De.current.useEffect(D,W)},Ve.useId=function(){return De.current.useId()},Ve.useImperativeHandle=function(D,W,me){return De.current.useImperativeHandle(D,W,me)},Ve.useInsertionEffect=function(D,W){return De.current.useInsertionEffect(D,W)},Ve.useLayoutEffect=function(D,W){return De.current.useLayoutEffect(D,W)},Ve.useMemo=function(D,W){return De.current.useMemo(D,W)},Ve.useReducer=function(D,W,me){return De.current.useReducer(D,W,me)},Ve.useRef=function(D){return De.current.useRef(D)},Ve.useState=function(D){return De.current.useState(D)},Ve.useSyncExternalStore=function(D,W,me){return De.current.useSyncExternalStore(D,W,me)},Ve.useTransition=function(){return De.current.useTransition()},Ve.version="18.3.1",Ve}var qy;function Ap(){return qy||(qy=1,hf.exports=bS()),hf.exports}var Gy;function LS(){if(Gy)return il;Gy=1;var n=Ap(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var v,w={},E=null,A=null;m!==void 0&&(E=""+m),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(A=f.ref);for(v in f)i.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:d,key:E,ref:A,props:w,_owner:o.current}}return il.Fragment=t,il.jsx=u,il.jsxs=u,il}var Ky;function MS(){return Ky||(Ky=1,cf.exports=LS()),cf.exports}var se=MS(),ge=Ap();const L0=OS(ge);var hc={},df={exports:{}},ln={},ff={exports:{}},pf={};var Qy;function FS(){return Qy||(Qy=1,(function(n){function e(te,fe){var ie=te.length;te.push(fe);e:for(;0<ie;){var D=ie-1>>>1,W=te[D];if(0<o(W,fe))te[D]=fe,te[ie]=W,ie=D;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var fe=te[0],ie=te.pop();if(ie!==fe){te[0]=ie;e:for(var D=0,W=te.length,me=W>>>1;D<me;){var Ce=2*(D+1)-1,Re=te[Ce],ke=Ce+1,Me=te[ke];if(0>o(Re,ie))ke<W&&0>o(Me,Re)?(te[D]=Me,te[ke]=ie,D=ke):(te[D]=Re,te[Ce]=ie,D=Ce);else if(ke<W&&0>o(Me,ie))te[D]=Me,te[ke]=ie,D=ke;else break e}}return fe}function o(te,fe){var ie=te.sortIndex-fe.sortIndex;return ie!==0?ie:te.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],v=1,w=null,E=3,A=!1,N=!1,M=!1,F=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(te){for(var fe=t(m);fe!==null;){if(fe.callback===null)i(m);else if(fe.startTime<=te)i(m),fe.sortIndex=fe.expirationTime,e(f,fe);else break;fe=t(m)}}function Q(te){if(M=!1,H(te),!N)if(t(f)!==null)N=!0,Ne(re);else{var fe=t(m);fe!==null&&De(Q,fe.startTime-te)}}function re(te,fe){N=!1,M&&(M=!1,J(S),S=-1),A=!0;var ie=E;try{for(H(fe),w=t(f);w!==null&&(!(w.expirationTime>fe)||te&&!O());){var D=w.callback;if(typeof D=="function"){w.callback=null,E=w.priorityLevel;var W=D(w.expirationTime<=fe);fe=n.unstable_now(),typeof W=="function"?w.callback=W:w===t(f)&&i(f),H(fe)}else i(f);w=t(f)}if(w!==null)var me=!0;else{var Ce=t(m);Ce!==null&&De(Q,Ce.startTime-fe),me=!1}return me}finally{w=null,E=ie,A=!1}}var ue=!1,k=null,S=-1,C=5,x=-1;function O(){return!(n.unstable_now()-x<C)}function L(){if(k!==null){var te=n.unstable_now();x=te;var fe=!0;try{fe=k(!0,te)}finally{fe?P():(ue=!1,k=null)}}else ue=!1}var P;if(typeof K=="function")P=function(){K(L)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,je=Pe.port2;Pe.port1.onmessage=L,P=function(){je.postMessage(null)}}else P=function(){F(L,0)};function Ne(te){k=te,ue||(ue=!0,P())}function De(te,fe){S=F(function(){te(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){N||A||(N=!0,Ne(re))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(te){switch(E){case 1:case 2:case 3:var fe=3;break;default:fe=E}var ie=E;E=fe;try{return te()}finally{E=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ie=E;E=te;try{return fe()}finally{E=ie}},n.unstable_scheduleCallback=function(te,fe,ie){var D=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?D+ie:D):ie=D,te){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ie+W,te={id:v++,callback:fe,priorityLevel:te,startTime:ie,expirationTime:W,sortIndex:-1},ie>D?(te.sortIndex=ie,e(m,te),t(f)===null&&te===t(m)&&(M?(J(S),S=-1):M=!0,De(Q,ie-D))):(te.sortIndex=W,e(f,te),N||A||(N=!0,Ne(re))),te},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(te){var fe=E;return function(){var ie=E;E=fe;try{return te.apply(this,arguments)}finally{E=ie}}}})(pf)),pf}var Xy;function US(){return Xy||(Xy=1,ff.exports=FS()),ff.exports}var Yy;function jS(){if(Yy)return ln;Yy=1;var n=Ap(),e=US();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function E(r){return f.call(w,r)?!0:f.call(v,r)?!1:m.test(r)?w[r]=!0:(v[r]=!0,!1)}function A(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function N(r,s,l,h){if(s===null||typeof s>"u"||A(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function M(r,s,l,h,p,y,T){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=y,this.removeEmptyString=T}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){F[r]=new M(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];F[s]=new M(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){F[r]=new M(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){F[r]=new M(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){F[r]=new M(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){F[r]=new M(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){F[r]=new M(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){F[r]=new M(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){F[r]=new M(r,5,!1,r.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function K(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(J,K);F[s]=new M(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(J,K);F[s]=new M(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(J,K);F[s]=new M(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){F[r]=new M(r,1,!1,r.toLowerCase(),null,!1,!1)}),F.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){F[r]=new M(r,1,!1,r.toLowerCase(),null,!0,!0)});function H(r,s,l,h){var p=F.hasOwnProperty(s)?F[s]:null;(p!==null?p.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(N(s,l,p,h)&&(l=null),h||p===null?E(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):p.mustUseProperty?r[p.propertyName]=l===null?p.type===3?!1:"":l:(s=p.attributeName,h=p.attributeNamespace,l===null?r.removeAttribute(s):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),ue=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),te=Symbol.iterator;function fe(r){return r===null||typeof r!="object"?null:(r=te&&r[te]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Object.assign,D;function W(r){if(D===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);D=s&&s[1]||""}return`
`+D+r}var me=!1;function Ce(r,s){if(!r||me)return"";me=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var h=z}Reflect.construct(r,[],s)}else{try{s.call()}catch(z){h=z}r.call(s.prototype)}else{try{throw Error()}catch(z){h=z}r()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var p=z.stack.split(`
`),y=h.stack.split(`
`),T=p.length-1,R=y.length-1;1<=T&&0<=R&&p[T]!==y[R];)R--;for(;1<=T&&0<=R;T--,R--)if(p[T]!==y[R]){if(T!==1||R!==1)do if(T--,R--,0>R||p[T]!==y[R]){var V=`
`+p[T].replace(" at new "," at ");return r.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",r.displayName)),V}while(1<=T&&0<=R);break}}}finally{me=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?W(r):""}function Re(r){switch(r.tag){case 5:return W(r.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return r=Ce(r.type,!1),r;case 11:return r=Ce(r.type.render,!1),r;case 1:return r=Ce(r.type,!0),r;default:return""}}function ke(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case ue:return"Portal";case C:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case Pe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case x:return(r._context.displayName||"Context")+".Provider";case L:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case je:return s=r.displayName||null,s!==null?s:ke(r.type)||"Memo";case Ne:s=r._payload,r=r._init;try{return ke(r(s))}catch{}}return null}function Me(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function He(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function rt(r){var s=He(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(T){h=""+T,y.call(this,T)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Dt(r){r._valueTracker||(r._valueTracker=rt(r))}function Gi(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=He(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function Qr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Ki(r,s){var l=s.checked;return ie({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Bs(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Be(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ca(r,s){s=s.checked,s!=null&&H(r,"checked",s,!1)}function ha(r,s){ca(r,s);var l=Be(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?zs(r,s.type,l):s.hasOwnProperty("defaultValue")&&zs(r,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Xl(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function zs(r,s,l){(s!=="number"||Qr(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var wr=Array.isArray;function Tr(r,s,l,h){if(r=r.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=s.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Be(l),s=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function da(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function $s(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(wr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:Be(l)}}function Hs(r,s){var l=Be(s.value),h=Be(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function fa(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function wt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?wt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Er,pa=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,p){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,p)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Er.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Xr(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xi=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(r){Xi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Qi[s]=Qi[r]})});function ma(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Qi.hasOwnProperty(r)&&Qi[r]?(""+s).trim():s+"px"}function ga(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=ma(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,p):r[l]=p}}var ya=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function va(r,s){if(s){if(ya[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function _a(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yi=null;function Ws(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var qs=null,Tn=null,Zn=null;function Gs(r){if(r=$a(r)){if(typeof qs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Pu(s),qs(r.stateNode,r.type,s))}}function er(r){Tn?Zn?Zn.push(r):Zn=[r]:Tn=r}function wa(){if(Tn){var r=Tn,s=Zn;if(Zn=Tn=null,Gs(r),s)for(r=0;r<s.length;r++)Gs(s[r])}}function Ji(r,s){return r(s)}function Ta(){}var Ir=!1;function Ea(r,s,l){if(Ir)return r(s,l);Ir=!0;try{return Ji(r,s,l)}finally{Ir=!1,(Tn!==null||Zn!==null)&&(Ta(),wa())}}function ct(r,s){var l=r.stateNode;if(l===null)return null;var h=Pu(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Ks=!1;if(d)try{var On={};Object.defineProperty(On,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{Ks=!1}function Zi(r,s,l,h,p,y,T,R,V){var z=Array.prototype.slice.call(arguments,3);try{s.apply(l,z)}catch(Y){this.onError(Y)}}var es=!1,Qs=null,bn=!1,Ia=null,Mh={onError:function(r){es=!0,Qs=r}};function Xs(r,s,l,h,p,y,T,R,V){es=!1,Qs=null,Zi.apply(Mh,arguments)}function Yl(r,s,l,h,p,y,T,R,V){if(Xs.apply(this,arguments),es){if(es){var z=Qs;es=!1,Qs=null}else throw Error(t(198));bn||(bn=!0,Ia=z)}}function Ln(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function ts(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Mn(r){if(Ln(r)!==r)throw Error(t(188))}function Jl(r){var s=r.alternate;if(!s){if(s=Ln(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Mn(p),r;if(y===h)return Mn(p),s;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var T=!1,R=p.child;R;){if(R===l){T=!0,l=p,h=y;break}if(R===h){T=!0,h=p,l=y;break}R=R.sibling}if(!T){for(R=y.child;R;){if(R===l){T=!0,l=y,h=p;break}if(R===h){T=!0,h=y,l=p;break}R=R.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function Sa(r){return r=Jl(r),r!==null?Ys(r):null}function Ys(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Ys(r);if(s!==null)return s;r=r.sibling}return null}var Js=e.unstable_scheduleCallback,Aa=e.unstable_cancelCallback,Zl=e.unstable_shouldYield,Fh=e.unstable_requestPaint,Qe=e.unstable_now,eu=e.unstable_getCurrentPriorityLevel,ns=e.unstable_ImmediatePriority,Yr=e.unstable_UserBlockingPriority,En=e.unstable_NormalPriority,Pa=e.unstable_LowPriority,tu=e.unstable_IdlePriority,rs=null,dn=null;function nu(r){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(rs,r,void 0,(r.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:iu,Ca=Math.log,ru=Math.LN2;function iu(r){return r>>>=0,r===0?32:31-(Ca(r)/ru|0)|0}var Zs=64,eo=4194304;function Jr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function is(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,p=r.suspendedLanes,y=r.pingedLanes,T=l&268435455;if(T!==0){var R=T&~p;R!==0?h=Jr(R):(y&=T,y!==0&&(h=Jr(y)))}else T=l&~p,T!==0?h=Jr(T):y!==0&&(h=Jr(y));if(h===0)return 0;if(s!==0&&s!==h&&(s&p)===0&&(p=h&-h,y=s&-s,p>=y||p===16&&(y&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-Qt(s),p=1<<l,h|=r[l],s&=~p;return h}function Uh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sr(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes;0<y;){var T=31-Qt(y),R=1<<T,V=p[T];V===-1?((R&l)===0||(R&h)!==0)&&(p[T]=Uh(R,s)):V<=s&&(r.expiredLanes|=R),y&=~R}}function fn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ss(){var r=Zs;return Zs<<=1,(Zs&4194240)===0&&(Zs=64),r}function Zr(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function ei(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Qt(s),r[s]=l}function Ke(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var p=31-Qt(l),y=1<<p;s[p]=0,h[p]=-1,r[p]=-1,l&=~y}}function ti(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-Qt(l),p=1<<h;p&s|r[h]&s&&(r[h]|=s),l&=~p}}var Le=0;function ni(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var su,to,ou,au,lu,Ra=!1,tr=[],Nt=null,Fn=null,Un=null,ri=new Map,In=new Map,nr=[],jh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uu(r,s){switch(r){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":ri.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(s.pointerId)}}function en(r,s,l,h,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},s!==null&&(s=$a(s),s!==null&&to(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function Bh(r,s,l,h,p){switch(s){case"focusin":return Nt=en(Nt,r,s,l,h,p),!0;case"dragenter":return Fn=en(Fn,r,s,l,h,p),!0;case"mouseover":return Un=en(Un,r,s,l,h,p),!0;case"pointerover":var y=p.pointerId;return ri.set(y,en(ri.get(y)||null,r,s,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,In.set(y,en(In.get(y)||null,r,s,l,h,p)),!0}return!1}function cu(r){var s=cs(r.target);if(s!==null){var l=Ln(s);if(l!==null){if(s=l.tag,s===13){if(s=ts(l),s!==null){r.blockedOn=s,lu(r.priority,function(){ou(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ar(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=no(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Yi=h,l.target.dispatchEvent(h),Yi=null}else return s=$a(l),s!==null&&to(s),r.blockedOn=l,!1;s.shift()}return!0}function os(r,s,l){Ar(r)&&l.delete(s)}function hu(){Ra=!1,Nt!==null&&Ar(Nt)&&(Nt=null),Fn!==null&&Ar(Fn)&&(Fn=null),Un!==null&&Ar(Un)&&(Un=null),ri.forEach(os),In.forEach(os)}function jn(r,s){r.blockedOn===s&&(r.blockedOn=null,Ra||(Ra=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hu)))}function Bn(r){function s(p){return jn(p,r)}if(0<tr.length){jn(tr[0],r);for(var l=1;l<tr.length;l++){var h=tr[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Nt!==null&&jn(Nt,r),Fn!==null&&jn(Fn,r),Un!==null&&jn(Un,r),ri.forEach(s),In.forEach(s),l=0;l<nr.length;l++)h=nr[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<nr.length&&(l=nr[0],l.blockedOn===null);)cu(l),l.blockedOn===null&&nr.shift()}var Pr=Q.ReactCurrentBatchConfig,ii=!0;function tt(r,s,l,h){var p=Le,y=Pr.transition;Pr.transition=null;try{Le=1,ka(r,s,l,h)}finally{Le=p,Pr.transition=y}}function zh(r,s,l,h){var p=Le,y=Pr.transition;Pr.transition=null;try{Le=4,ka(r,s,l,h)}finally{Le=p,Pr.transition=y}}function ka(r,s,l,h){if(ii){var p=no(r,s,l,h);if(p===null)Zh(r,s,h,as,l),uu(r,h);else if(Bh(p,r,s,l,h))h.stopPropagation();else if(uu(r,h),s&4&&-1<jh.indexOf(r)){for(;p!==null;){var y=$a(p);if(y!==null&&su(y),y=no(r,s,l,h),y===null&&Zh(r,s,h,as,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else Zh(r,s,h,null,l)}}var as=null;function no(r,s,l,h){if(as=null,r=Ws(h),r=cs(r),r!==null)if(s=Ln(r),s===null)r=null;else if(l=s.tag,l===13){if(r=ts(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return as=r,null}function xa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eu()){case ns:return 1;case Yr:return 4;case En:case Pa:return 16;case tu:return 536870912;default:return 16}default:return 16}}var pn=null,ro=null,tn=null;function Va(){if(tn)return tn;var r,s=ro,l=s.length,h,p="value"in pn?pn.value:pn.textContent,y=p.length;for(r=0;r<l&&s[r]===p[r];r++);var T=l-r;for(h=1;h<=T&&s[l-h]===p[y-h];h++);return tn=p.slice(r,1<h?1-h:void 0)}function io(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function rr(){return!0}function Da(){return!1}function Ot(r){function s(l,h,p,y,T){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(l=r[R],this[R]=l?l(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?rr:Da,this.isPropagationStopped=Da,this}return ie(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),s}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=Ot(zn),ir=ie({},zn,{view:0,detail:0}),$h=Ot(ir),oo,Cr,si,ls=ie({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==si&&(si&&r.type==="mousemove"?(oo=r.screenX-si.screenX,Cr=r.screenY-si.screenY):Cr=oo=0,si=r),oo)},movementY:function(r){return"movementY"in r?r.movementY:Cr}}),ao=Ot(ls),Na=ie({},ls,{dataTransfer:0}),du=Ot(Na),lo=ie({},ir,{relatedTarget:0}),uo=Ot(lo),fu=ie({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Rr=Ot(fu),pu=ie({},zn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),mu=Ot(pu),gu=ie({},zn,{data:0}),Oa=Ot(gu),co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=yu[r])?!!s[r]:!1}function sr(){return vu}var c=ie({},ir,{key:function(r){if(r.key){var s=co[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=io(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Xt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(r){return r.type==="keypress"?io(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?io(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=Ot(c),_=ie({},ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Ot(_),U=ie({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),$=Ot(U),ne=ie({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Ot(ne),Et=ie({},ls,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Ot(Et),Pt=[9,13,27,32],pt=d&&"CompositionEvent"in window,Sn=null;d&&"documentMode"in document&&(Sn=document.documentMode);var mn=d&&"TextEvent"in window&&!Sn,us=d&&(!pt||Sn&&8<Sn&&11>=Sn),ho=" ",Um=!1;function jm(r,s){switch(r){case"keyup":return Pt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var fo=!1;function VI(r,s){switch(r){case"compositionend":return Bm(s);case"keypress":return s.which!==32?null:(Um=!0,ho);case"textInput":return r=s.data,r===ho&&Um?null:r;default:return null}}function DI(r,s){if(fo)return r==="compositionend"||!pt&&jm(r,s)?(r=Va(),tn=ro=pn=null,fo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return us&&s.locale!=="ko"?null:s.data;default:return null}}var NI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!NI[r.type]:s==="textarea"}function $m(r,s,l,h){er(h),s=Iu(s,"onChange"),0<s.length&&(l=new so("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var ba=null,La=null;function OI(r){ag(r,0)}function _u(r){var s=vo(r);if(Gi(s))return r}function bI(r,s){if(r==="change")return s}var Hm=!1;if(d){var Hh;if(d){var Wh="oninput"in document;if(!Wh){var Wm=document.createElement("div");Wm.setAttribute("oninput","return;"),Wh=typeof Wm.oninput=="function"}Hh=Wh}else Hh=!1;Hm=Hh&&(!document.documentMode||9<document.documentMode)}function qm(){ba&&(ba.detachEvent("onpropertychange",Gm),La=ba=null)}function Gm(r){if(r.propertyName==="value"&&_u(La)){var s=[];$m(s,La,r,Ws(r)),Ea(OI,s)}}function LI(r,s,l){r==="focusin"?(qm(),ba=s,La=l,ba.attachEvent("onpropertychange",Gm)):r==="focusout"&&qm()}function MI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return _u(La)}function FI(r,s){if(r==="click")return _u(s)}function UI(r,s){if(r==="input"||r==="change")return _u(s)}function jI(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var $n=typeof Object.is=="function"?Object.is:jI;function Ma(r,s){if($n(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(s,p)||!$n(r[p],s[p]))return!1}return!0}function Km(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Qm(r,s){var l=Km(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Km(l)}}function Xm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Xm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Ym(){for(var r=window,s=Qr();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Qr(r.document)}return s}function qh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function BI(r){var s=Ym(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Xm(l.ownerDocument.documentElement,l)){if(h!==null&&qh(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!r.extend&&y>h&&(p=h,h=y,y=p),p=Qm(l,y);var T=Qm(l,h);p&&T&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==T.node||r.focusOffset!==T.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),r.removeAllRanges(),y>h?(r.addRange(s),r.extend(T.node,T.offset)):(s.setEnd(T.node,T.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var zI=d&&"documentMode"in document&&11>=document.documentMode,po=null,Gh=null,Fa=null,Kh=!1;function Jm(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Kh||po==null||po!==Qr(h)||(h=po,"selectionStart"in h&&qh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Fa&&Ma(Fa,h)||(Fa=h,h=Iu(Gh,"onSelect"),0<h.length&&(s=new so("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=po)))}function wu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var mo={animationend:wu("Animation","AnimationEnd"),animationiteration:wu("Animation","AnimationIteration"),animationstart:wu("Animation","AnimationStart"),transitionend:wu("Transition","TransitionEnd")},Qh={},Zm={};d&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Tu(r){if(Qh[r])return Qh[r];if(!mo[r])return r;var s=mo[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Zm)return Qh[r]=s[l];return r}var eg=Tu("animationend"),tg=Tu("animationiteration"),ng=Tu("animationstart"),rg=Tu("transitionend"),ig=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(r,s){ig.set(r,s),a(s,[r])}for(var Xh=0;Xh<sg.length;Xh++){var Yh=sg[Xh],$I=Yh.toLowerCase(),HI=Yh[0].toUpperCase()+Yh.slice(1);oi($I,"on"+HI)}oi(eg,"onAnimationEnd"),oi(tg,"onAnimationIteration"),oi(ng,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(rg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ua));function og(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,Yl(h,s,void 0,r),r.currentTarget=null}function ag(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],p=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var T=h.length-1;0<=T;T--){var R=h[T],V=R.instance,z=R.currentTarget;if(R=R.listener,V!==y&&p.isPropagationStopped())break e;og(p,R,z),y=V}else for(T=0;T<h.length;T++){if(R=h[T],V=R.instance,z=R.currentTarget,R=R.listener,V!==y&&p.isPropagationStopped())break e;og(p,R,z),y=V}}}if(bn)throw r=Ia,bn=!1,Ia=null,r}function Je(r,s){var l=s[sd];l===void 0&&(l=s[sd]=new Set);var h=r+"__bubble";l.has(h)||(lg(s,r,2,!1),l.add(h))}function Jh(r,s,l){var h=0;s&&(h|=4),lg(l,r,h,s)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function ja(r){if(!r[Eu]){r[Eu]=!0,i.forEach(function(l){l!=="selectionchange"&&(WI.has(l)||Jh(l,!1,r),Jh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Eu]||(s[Eu]=!0,Jh("selectionchange",!1,s))}}function lg(r,s,l,h){switch(xa(s)){case 1:var p=tt;break;case 4:p=zh;break;default:p=ka}l=p.bind(null,s,l,r),p=void 0,!Ks||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(s,l,{capture:!0,passive:p}):r.addEventListener(s,l,!0):p!==void 0?r.addEventListener(s,l,{passive:p}):r.addEventListener(s,l,!1)}function Zh(r,s,l,h,p){var y=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var R=h.stateNode.containerInfo;if(R===p||R.nodeType===8&&R.parentNode===p)break;if(T===4)for(T=h.return;T!==null;){var V=T.tag;if((V===3||V===4)&&(V=T.stateNode.containerInfo,V===p||V.nodeType===8&&V.parentNode===p))return;T=T.return}for(;R!==null;){if(T=cs(R),T===null)return;if(V=T.tag,V===5||V===6){h=y=T;continue e}R=R.parentNode}}h=h.return}Ea(function(){var z=y,Y=Ws(l),Z=[];e:{var X=ig.get(r);if(X!==void 0){var oe=so,he=r;switch(r){case"keypress":if(io(l)===0)break e;case"keydown":case"keyup":oe=g;break;case"focusin":he="focus",oe=uo;break;case"focusout":he="blur",oe=uo;break;case"beforeblur":case"afterblur":oe=uo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=$;break;case eg:case tg:case ng:oe=Rr;break;case rg:oe=qe;break;case"scroll":oe=$h;break;case"wheel":oe=Fe;break;case"copy":case"cut":case"paste":oe=mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=I}var de=(s&4)!==0,ht=!de&&r==="scroll",j=de?X!==null?X+"Capture":null:X;de=[];for(var b=z,B;b!==null;){B=b;var ee=B.stateNode;if(B.tag===5&&ee!==null&&(B=ee,j!==null&&(ee=ct(b,j),ee!=null&&de.push(Ba(b,ee,B)))),ht)break;b=b.return}0<de.length&&(X=new oe(X,he,null,l,Y),Z.push({event:X,listeners:de}))}}if((s&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",oe=r==="mouseout"||r==="pointerout",X&&l!==Yi&&(he=l.relatedTarget||l.fromElement)&&(cs(he)||he[kr]))break e;if((oe||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,oe?(he=l.relatedTarget||l.toElement,oe=z,he=he?cs(he):null,he!==null&&(ht=Ln(he),he!==ht||he.tag!==5&&he.tag!==6)&&(he=null)):(oe=null,he=z),oe!==he)){if(de=ao,ee="onMouseLeave",j="onMouseEnter",b="mouse",(r==="pointerout"||r==="pointerover")&&(de=I,ee="onPointerLeave",j="onPointerEnter",b="pointer"),ht=oe==null?X:vo(oe),B=he==null?X:vo(he),X=new de(ee,b+"leave",oe,l,Y),X.target=ht,X.relatedTarget=B,ee=null,cs(Y)===z&&(de=new de(j,b+"enter",he,l,Y),de.target=B,de.relatedTarget=ht,ee=de),ht=ee,oe&&he)t:{for(de=oe,j=he,b=0,B=de;B;B=go(B))b++;for(B=0,ee=j;ee;ee=go(ee))B++;for(;0<b-B;)de=go(de),b--;for(;0<B-b;)j=go(j),B--;for(;b--;){if(de===j||j!==null&&de===j.alternate)break t;de=go(de),j=go(j)}de=null}else de=null;oe!==null&&ug(Z,X,oe,de,!1),he!==null&&ht!==null&&ug(Z,ht,he,de,!0)}}e:{if(X=z?vo(z):window,oe=X.nodeName&&X.nodeName.toLowerCase(),oe==="select"||oe==="input"&&X.type==="file")var pe=bI;else if(zm(X))if(Hm)pe=UI;else{pe=MI;var ve=LI}else(oe=X.nodeName)&&oe.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(pe=FI);if(pe&&(pe=pe(r,z))){$m(Z,pe,l,Y);break e}ve&&ve(r,X,z),r==="focusout"&&(ve=X._wrapperState)&&ve.controlled&&X.type==="number"&&zs(X,"number",X.value)}switch(ve=z?vo(z):window,r){case"focusin":(zm(ve)||ve.contentEditable==="true")&&(po=ve,Gh=z,Fa=null);break;case"focusout":Fa=Gh=po=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,Jm(Z,l,Y);break;case"selectionchange":if(zI)break;case"keydown":case"keyup":Jm(Z,l,Y)}var _e;if(pt)e:{switch(r){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else fo?jm(r,l)&&(Ee="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ee="onCompositionStart");Ee&&(us&&l.locale!=="ko"&&(fo||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&fo&&(_e=Va()):(pn=Y,ro="value"in pn?pn.value:pn.textContent,fo=!0)),ve=Iu(z,Ee),0<ve.length&&(Ee=new Oa(Ee,r,null,l,Y),Z.push({event:Ee,listeners:ve}),_e?Ee.data=_e:(_e=Bm(l),_e!==null&&(Ee.data=_e)))),(_e=mn?VI(r,l):DI(r,l))&&(z=Iu(z,"onBeforeInput"),0<z.length&&(Y=new Oa("onBeforeInput","beforeinput",null,l,Y),Z.push({event:Y,listeners:z}),Y.data=_e))}ag(Z,s)})}function Ba(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Iu(r,s){for(var l=s+"Capture",h=[];r!==null;){var p=r,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=ct(r,l),y!=null&&h.unshift(Ba(r,y,p)),y=ct(r,s),y!=null&&h.push(Ba(r,y,p))),r=r.return}return h}function go(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function ug(r,s,l,h,p){for(var y=s._reactName,T=[];l!==null&&l!==h;){var R=l,V=R.alternate,z=R.stateNode;if(V!==null&&V===h)break;R.tag===5&&z!==null&&(R=z,p?(V=ct(l,y),V!=null&&T.unshift(Ba(l,V,R))):p||(V=ct(l,y),V!=null&&T.push(Ba(l,V,R)))),l=l.return}T.length!==0&&r.push({event:s,listeners:T})}var qI=/\r\n?/g,GI=/\u0000|\uFFFD/g;function cg(r){return(typeof r=="string"?r:""+r).replace(qI,`
`).replace(GI,"")}function Su(r,s,l){if(s=cg(s),cg(r)!==s&&l)throw Error(t(425))}function Au(){}var ed=null,td=null;function nd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rd=typeof setTimeout=="function"?setTimeout:void 0,KI=typeof clearTimeout=="function"?clearTimeout:void 0,hg=typeof Promise=="function"?Promise:void 0,QI=typeof queueMicrotask=="function"?queueMicrotask:typeof hg<"u"?function(r){return hg.resolve(null).then(r).catch(XI)}:rd;function XI(r){setTimeout(function(){throw r})}function id(r,s){var l=s,h=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){r.removeChild(p),Bn(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Bn(s)}function ai(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function dg(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var yo=Math.random().toString(36).slice(2),or="__reactFiber$"+yo,za="__reactProps$"+yo,kr="__reactContainer$"+yo,sd="__reactEvents$"+yo,YI="__reactListeners$"+yo,JI="__reactHandles$"+yo;function cs(r){var s=r[or];if(s)return s;for(var l=r.parentNode;l;){if(s=l[kr]||l[or]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=dg(r);r!==null;){if(l=r[or])return l;r=dg(r)}return s}r=l,l=r.parentNode}return null}function $a(r){return r=r[or]||r[kr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function vo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Pu(r){return r[za]||null}var od=[],_o=-1;function li(r){return{current:r}}function Ze(r){0>_o||(r.current=od[_o],od[_o]=null,_o--)}function Xe(r,s){_o++,od[_o]=r.current,r.current=s}var ui={},jt=li(ui),nn=li(!1),hs=ui;function wo(r,s){var l=r.type.contextTypes;if(!l)return ui;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=s[y];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=p),p}function rn(r){return r=r.childContextTypes,r!=null}function Cu(){Ze(nn),Ze(jt)}function fg(r,s,l){if(jt.current!==ui)throw Error(t(168));Xe(jt,s),Xe(nn,l)}function pg(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in s))throw Error(t(108,Me(r)||"Unknown",p));return ie({},l,h)}function Ru(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ui,hs=jt.current,Xe(jt,r),Xe(nn,nn.current),!0}function mg(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=pg(r,s,hs),h.__reactInternalMemoizedMergedChildContext=r,Ze(nn),Ze(jt),Xe(jt,r)):Ze(nn),Xe(nn,l)}var xr=null,ku=!1,ad=!1;function gg(r){xr===null?xr=[r]:xr.push(r)}function ZI(r){ku=!0,gg(r)}function ci(){if(!ad&&xr!==null){ad=!0;var r=0,s=Le;try{var l=xr;for(Le=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}xr=null,ku=!1}catch(p){throw xr!==null&&(xr=xr.slice(r+1)),Js(ns,ci),p}finally{Le=s,ad=!1}}return null}var To=[],Eo=0,xu=null,Vu=0,An=[],Pn=0,ds=null,Vr=1,Dr="";function fs(r,s){To[Eo++]=Vu,To[Eo++]=xu,xu=r,Vu=s}function yg(r,s,l){An[Pn++]=Vr,An[Pn++]=Dr,An[Pn++]=ds,ds=r;var h=Vr;r=Dr;var p=32-Qt(h)-1;h&=~(1<<p),l+=1;var y=32-Qt(s)+p;if(30<y){var T=p-p%5;y=(h&(1<<T)-1).toString(32),h>>=T,p-=T,Vr=1<<32-Qt(s)+p|l<<p|h,Dr=y+r}else Vr=1<<y|l<<p|h,Dr=r}function ld(r){r.return!==null&&(fs(r,1),yg(r,1,0))}function ud(r){for(;r===xu;)xu=To[--Eo],To[Eo]=null,Vu=To[--Eo],To[Eo]=null;for(;r===ds;)ds=An[--Pn],An[Pn]=null,Dr=An[--Pn],An[Pn]=null,Vr=An[--Pn],An[Pn]=null}var gn=null,yn=null,nt=!1,Hn=null;function vg(r,s){var l=xn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function _g(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,gn=r,yn=ai(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,gn=r,yn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=ds!==null?{id:Vr,overflow:Dr}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=xn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,gn=r,yn=null,!0):!1;default:return!1}}function cd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function hd(r){if(nt){var s=yn;if(s){var l=s;if(!_g(r,s)){if(cd(r))throw Error(t(418));s=ai(l.nextSibling);var h=gn;s&&_g(r,s)?vg(h,l):(r.flags=r.flags&-4097|2,nt=!1,gn=r)}}else{if(cd(r))throw Error(t(418));r.flags=r.flags&-4097|2,nt=!1,gn=r}}}function wg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;gn=r}function Du(r){if(r!==gn)return!1;if(!nt)return wg(r),nt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!nd(r.type,r.memoizedProps)),s&&(s=yn)){if(cd(r))throw Tg(),Error(t(418));for(;s;)vg(r,s),s=ai(s.nextSibling)}if(wg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){yn=ai(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}yn=null}}else yn=gn?ai(r.stateNode.nextSibling):null;return!0}function Tg(){for(var r=yn;r;)r=ai(r.nextSibling)}function Io(){yn=gn=null,nt=!1}function dd(r){Hn===null?Hn=[r]:Hn.push(r)}var eS=Q.ReactCurrentBatchConfig;function Ha(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var p=h,y=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(T){var R=p.refs;T===null?delete R[y]:R[y]=T},s._stringRef=y,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Nu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Eg(r){var s=r._init;return s(r._payload)}function Ig(r){function s(j,b){if(r){var B=j.deletions;B===null?(j.deletions=[b],j.flags|=16):B.push(b)}}function l(j,b){if(!r)return null;for(;b!==null;)s(j,b),b=b.sibling;return null}function h(j,b){for(j=new Map;b!==null;)b.key!==null?j.set(b.key,b):j.set(b.index,b),b=b.sibling;return j}function p(j,b){return j=vi(j,b),j.index=0,j.sibling=null,j}function y(j,b,B){return j.index=B,r?(B=j.alternate,B!==null?(B=B.index,B<b?(j.flags|=2,b):B):(j.flags|=2,b)):(j.flags|=1048576,b)}function T(j){return r&&j.alternate===null&&(j.flags|=2),j}function R(j,b,B,ee){return b===null||b.tag!==6?(b=rf(B,j.mode,ee),b.return=j,b):(b=p(b,B),b.return=j,b)}function V(j,b,B,ee){var pe=B.type;return pe===k?Y(j,b,B.props.children,ee,B.key):b!==null&&(b.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Ne&&Eg(pe)===b.type)?(ee=p(b,B.props),ee.ref=Ha(j,b,B),ee.return=j,ee):(ee=rc(B.type,B.key,B.props,null,j.mode,ee),ee.ref=Ha(j,b,B),ee.return=j,ee)}function z(j,b,B,ee){return b===null||b.tag!==4||b.stateNode.containerInfo!==B.containerInfo||b.stateNode.implementation!==B.implementation?(b=sf(B,j.mode,ee),b.return=j,b):(b=p(b,B.children||[]),b.return=j,b)}function Y(j,b,B,ee,pe){return b===null||b.tag!==7?(b=Ts(B,j.mode,ee,pe),b.return=j,b):(b=p(b,B),b.return=j,b)}function Z(j,b,B){if(typeof b=="string"&&b!==""||typeof b=="number")return b=rf(""+b,j.mode,B),b.return=j,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case re:return B=rc(b.type,b.key,b.props,null,j.mode,B),B.ref=Ha(j,null,b),B.return=j,B;case ue:return b=sf(b,j.mode,B),b.return=j,b;case Ne:var ee=b._init;return Z(j,ee(b._payload),B)}if(wr(b)||fe(b))return b=Ts(b,j.mode,B,null),b.return=j,b;Nu(j,b)}return null}function X(j,b,B,ee){var pe=b!==null?b.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return pe!==null?null:R(j,b,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case re:return B.key===pe?V(j,b,B,ee):null;case ue:return B.key===pe?z(j,b,B,ee):null;case Ne:return pe=B._init,X(j,b,pe(B._payload),ee)}if(wr(B)||fe(B))return pe!==null?null:Y(j,b,B,ee,null);Nu(j,B)}return null}function oe(j,b,B,ee,pe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return j=j.get(B)||null,R(b,j,""+ee,pe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case re:return j=j.get(ee.key===null?B:ee.key)||null,V(b,j,ee,pe);case ue:return j=j.get(ee.key===null?B:ee.key)||null,z(b,j,ee,pe);case Ne:var ve=ee._init;return oe(j,b,B,ve(ee._payload),pe)}if(wr(ee)||fe(ee))return j=j.get(B)||null,Y(b,j,ee,pe,null);Nu(b,ee)}return null}function he(j,b,B,ee){for(var pe=null,ve=null,_e=b,Ee=b=0,kt=null;_e!==null&&Ee<B.length;Ee++){_e.index>Ee?(kt=_e,_e=null):kt=_e.sibling;var $e=X(j,_e,B[Ee],ee);if($e===null){_e===null&&(_e=kt);break}r&&_e&&$e.alternate===null&&s(j,_e),b=y($e,b,Ee),ve===null?pe=$e:ve.sibling=$e,ve=$e,_e=kt}if(Ee===B.length)return l(j,_e),nt&&fs(j,Ee),pe;if(_e===null){for(;Ee<B.length;Ee++)_e=Z(j,B[Ee],ee),_e!==null&&(b=y(_e,b,Ee),ve===null?pe=_e:ve.sibling=_e,ve=_e);return nt&&fs(j,Ee),pe}for(_e=h(j,_e);Ee<B.length;Ee++)kt=oe(_e,j,Ee,B[Ee],ee),kt!==null&&(r&&kt.alternate!==null&&_e.delete(kt.key===null?Ee:kt.key),b=y(kt,b,Ee),ve===null?pe=kt:ve.sibling=kt,ve=kt);return r&&_e.forEach(function(_i){return s(j,_i)}),nt&&fs(j,Ee),pe}function de(j,b,B,ee){var pe=fe(B);if(typeof pe!="function")throw Error(t(150));if(B=pe.call(B),B==null)throw Error(t(151));for(var ve=pe=null,_e=b,Ee=b=0,kt=null,$e=B.next();_e!==null&&!$e.done;Ee++,$e=B.next()){_e.index>Ee?(kt=_e,_e=null):kt=_e.sibling;var _i=X(j,_e,$e.value,ee);if(_i===null){_e===null&&(_e=kt);break}r&&_e&&_i.alternate===null&&s(j,_e),b=y(_i,b,Ee),ve===null?pe=_i:ve.sibling=_i,ve=_i,_e=kt}if($e.done)return l(j,_e),nt&&fs(j,Ee),pe;if(_e===null){for(;!$e.done;Ee++,$e=B.next())$e=Z(j,$e.value,ee),$e!==null&&(b=y($e,b,Ee),ve===null?pe=$e:ve.sibling=$e,ve=$e);return nt&&fs(j,Ee),pe}for(_e=h(j,_e);!$e.done;Ee++,$e=B.next())$e=oe(_e,j,Ee,$e.value,ee),$e!==null&&(r&&$e.alternate!==null&&_e.delete($e.key===null?Ee:$e.key),b=y($e,b,Ee),ve===null?pe=$e:ve.sibling=$e,ve=$e);return r&&_e.forEach(function(NS){return s(j,NS)}),nt&&fs(j,Ee),pe}function ht(j,b,B,ee){if(typeof B=="object"&&B!==null&&B.type===k&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case re:e:{for(var pe=B.key,ve=b;ve!==null;){if(ve.key===pe){if(pe=B.type,pe===k){if(ve.tag===7){l(j,ve.sibling),b=p(ve,B.props.children),b.return=j,j=b;break e}}else if(ve.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Ne&&Eg(pe)===ve.type){l(j,ve.sibling),b=p(ve,B.props),b.ref=Ha(j,ve,B),b.return=j,j=b;break e}l(j,ve);break}else s(j,ve);ve=ve.sibling}B.type===k?(b=Ts(B.props.children,j.mode,ee,B.key),b.return=j,j=b):(ee=rc(B.type,B.key,B.props,null,j.mode,ee),ee.ref=Ha(j,b,B),ee.return=j,j=ee)}return T(j);case ue:e:{for(ve=B.key;b!==null;){if(b.key===ve)if(b.tag===4&&b.stateNode.containerInfo===B.containerInfo&&b.stateNode.implementation===B.implementation){l(j,b.sibling),b=p(b,B.children||[]),b.return=j,j=b;break e}else{l(j,b);break}else s(j,b);b=b.sibling}b=sf(B,j.mode,ee),b.return=j,j=b}return T(j);case Ne:return ve=B._init,ht(j,b,ve(B._payload),ee)}if(wr(B))return he(j,b,B,ee);if(fe(B))return de(j,b,B,ee);Nu(j,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,b!==null&&b.tag===6?(l(j,b.sibling),b=p(b,B),b.return=j,j=b):(l(j,b),b=rf(B,j.mode,ee),b.return=j,j=b),T(j)):l(j,b)}return ht}var So=Ig(!0),Sg=Ig(!1),Ou=li(null),bu=null,Ao=null,fd=null;function pd(){fd=Ao=bu=null}function md(r){var s=Ou.current;Ze(Ou),r._currentValue=s}function gd(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function Po(r,s){bu=r,fd=Ao=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(sn=!0),r.firstContext=null)}function Cn(r){var s=r._currentValue;if(fd!==r)if(r={context:r,memoizedValue:s,next:null},Ao===null){if(bu===null)throw Error(t(308));Ao=r,bu.dependencies={lanes:0,firstContext:r}}else Ao=Ao.next=r;return s}var ps=null;function yd(r){ps===null?ps=[r]:ps.push(r)}function Ag(r,s,l,h){var p=s.interleaved;return p===null?(l.next=l,yd(s)):(l.next=p.next,p.next=l),s.interleaved=l,Nr(r,h)}function Nr(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var hi=!1;function vd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Or(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function di(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(ze&2)!==0){var p=h.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),h.pending=s,Nr(r,l)}return p=h.interleaved,p===null?(s.next=s,yd(h)):(s.next=p.next,p.next=s),h.interleaved=s,Nr(r,l)}function Lu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,ti(r,l)}}function Cg(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=s:y=y.next=s}else p=y=s;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Mu(r,s,l,h){var p=r.updateQueue;hi=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var V=R,z=V.next;V.next=null,T===null?y=z:T.next=z,T=V;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,R=Y.lastBaseUpdate,R!==T&&(R===null?Y.firstBaseUpdate=z:R.next=z,Y.lastBaseUpdate=V))}if(y!==null){var Z=p.baseState;T=0,Y=z=V=null,R=y;do{var X=R.lane,oe=R.eventTime;if((h&X)===X){Y!==null&&(Y=Y.next={eventTime:oe,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var he=r,de=R;switch(X=s,oe=l,de.tag){case 1:if(he=de.payload,typeof he=="function"){Z=he.call(oe,Z,X);break e}Z=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,X=typeof he=="function"?he.call(oe,Z,X):he,X==null)break e;Z=ie({},Z,X);break e;case 2:hi=!0}}R.callback!==null&&R.lane!==0&&(r.flags|=64,X=p.effects,X===null?p.effects=[R]:X.push(R))}else oe={eventTime:oe,lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Y===null?(z=Y=oe,V=Z):Y=Y.next=oe,T|=X;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;X=R,R=X.next,X.next=null,p.lastBaseUpdate=X,p.shared.pending=null}}while(!0);if(Y===null&&(V=Z),p.baseState=V,p.firstBaseUpdate=z,p.lastBaseUpdate=Y,s=p.shared.interleaved,s!==null){p=s;do T|=p.lane,p=p.next;while(p!==s)}else y===null&&(p.shared.lanes=0);ys|=T,r.lanes=T,r.memoizedState=Z}}function Rg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Wa={},ar=li(Wa),qa=li(Wa),Ga=li(Wa);function ms(r){if(r===Wa)throw Error(t(174));return r}function _d(r,s){switch(Xe(Ga,s),Xe(qa,r),Xe(ar,Wa),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Tt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=Tt(s,r)}Ze(ar),Xe(ar,s)}function Co(){Ze(ar),Ze(qa),Ze(Ga)}function kg(r){ms(Ga.current);var s=ms(ar.current),l=Tt(s,r.type);s!==l&&(Xe(qa,r),Xe(ar,l))}function wd(r){qa.current===r&&(Ze(ar),Ze(qa))}var it=li(0);function Fu(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Td=[];function Ed(){for(var r=0;r<Td.length;r++)Td[r]._workInProgressVersionPrimary=null;Td.length=0}var Uu=Q.ReactCurrentDispatcher,Id=Q.ReactCurrentBatchConfig,gs=0,st=null,It=null,Ct=null,ju=!1,Ka=!1,Qa=0,tS=0;function Bt(){throw Error(t(321))}function Sd(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!$n(r[l],s[l]))return!1;return!0}function Ad(r,s,l,h,p,y){if(gs=y,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Uu.current=r===null||r.memoizedState===null?sS:oS,r=l(h,p),Ka){y=0;do{if(Ka=!1,Qa=0,25<=y)throw Error(t(301));y+=1,Ct=It=null,s.updateQueue=null,Uu.current=aS,r=l(h,p)}while(Ka)}if(Uu.current=$u,s=It!==null&&It.next!==null,gs=0,Ct=It=st=null,ju=!1,s)throw Error(t(300));return r}function Pd(){var r=Qa!==0;return Qa=0,r}function lr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?st.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Rn(){if(It===null){var r=st.alternate;r=r!==null?r.memoizedState:null}else r=It.next;var s=Ct===null?st.memoizedState:Ct.next;if(s!==null)Ct=s,It=r;else{if(r===null)throw Error(t(310));It=r,r={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Ct===null?st.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function Xa(r,s){return typeof s=="function"?s(r):s}function Cd(r){var s=Rn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=It,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var R=T=null,V=null,z=y;do{var Y=z.lane;if((gs&Y)===Y)V!==null&&(V=V.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:r(h,z.action);else{var Z={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};V===null?(R=V=Z,T=h):V=V.next=Z,st.lanes|=Y,ys|=Y}z=z.next}while(z!==null&&z!==y);V===null?T=h:V.next=R,$n(h,s.memoizedState)||(sn=!0),s.memoizedState=h,s.baseState=T,s.baseQueue=V,l.lastRenderedState=h}if(r=l.interleaved,r!==null){p=r;do y=p.lane,st.lanes|=y,ys|=y,p=p.next;while(p!==r)}else p===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Rd(r){var s=Rn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,p=l.pending,y=s.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=r(y,T.action),T=T.next;while(T!==p);$n(y,s.memoizedState)||(sn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function xg(){}function Vg(r,s){var l=st,h=Rn(),p=s(),y=!$n(h.memoizedState,p);if(y&&(h.memoizedState=p,sn=!0),h=h.queue,kd(Og.bind(null,l,h,r),[r]),h.getSnapshot!==s||y||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Ya(9,Ng.bind(null,l,h,p,s),void 0,null),Rt===null)throw Error(t(349));(gs&30)!==0||Dg(l,s,p)}return p}function Dg(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Ng(r,s,l,h){s.value=l,s.getSnapshot=h,bg(s)&&Lg(r)}function Og(r,s,l){return l(function(){bg(s)&&Lg(r)})}function bg(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!$n(r,l)}catch{return!0}}function Lg(r){var s=Nr(r,1);s!==null&&Kn(s,r,1,-1)}function Mg(r){var s=lr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:r},s.queue=r,r=r.dispatch=iS.bind(null,st,r),[s.memoizedState,r]}function Ya(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function Fg(){return Rn().memoizedState}function Bu(r,s,l,h){var p=lr();st.flags|=r,p.memoizedState=Ya(1|s,l,void 0,h===void 0?null:h)}function zu(r,s,l,h){var p=Rn();h=h===void 0?null:h;var y=void 0;if(It!==null){var T=It.memoizedState;if(y=T.destroy,h!==null&&Sd(h,T.deps)){p.memoizedState=Ya(s,l,y,h);return}}st.flags|=r,p.memoizedState=Ya(1|s,l,y,h)}function Ug(r,s){return Bu(8390656,8,r,s)}function kd(r,s){return zu(2048,8,r,s)}function jg(r,s){return zu(4,2,r,s)}function Bg(r,s){return zu(4,4,r,s)}function zg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function $g(r,s,l){return l=l!=null?l.concat([r]):null,zu(4,4,zg.bind(null,s,r),l)}function xd(){}function Hg(r,s){var l=Rn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Sd(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function Wg(r,s){var l=Rn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Sd(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function qg(r,s,l){return(gs&21)===0?(r.baseState&&(r.baseState=!1,sn=!0),r.memoizedState=l):($n(l,s)||(l=ss(),st.lanes|=l,ys|=l,r.baseState=!0),s)}function nS(r,s){var l=Le;Le=l!==0&&4>l?l:4,r(!0);var h=Id.transition;Id.transition={};try{r(!1),s()}finally{Le=l,Id.transition=h}}function Gg(){return Rn().memoizedState}function rS(r,s,l){var h=gi(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Kg(r))Qg(s,l);else if(l=Ag(r,s,l,h),l!==null){var p=Jt();Kn(l,r,h,p),Xg(l,s,h)}}function iS(r,s,l){var h=gi(r),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Kg(r))Qg(s,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,R=y(T,l);if(p.hasEagerState=!0,p.eagerState=R,$n(R,T)){var V=s.interleaved;V===null?(p.next=p,yd(s)):(p.next=V.next,V.next=p),s.interleaved=p;return}}catch{}finally{}l=Ag(r,s,p,h),l!==null&&(p=Jt(),Kn(l,r,h,p),Xg(l,s,h))}}function Kg(r){var s=r.alternate;return r===st||s!==null&&s===st}function Qg(r,s){Ka=ju=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Xg(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,ti(r,l)}}var $u={readContext:Cn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},sS={readContext:Cn,useCallback:function(r,s){return lr().memoizedState=[r,s===void 0?null:s],r},useContext:Cn,useEffect:Ug,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Bu(4194308,4,zg.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Bu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Bu(4,2,r,s)},useMemo:function(r,s){var l=lr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=lr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=rS.bind(null,st,r),[h.memoizedState,r]},useRef:function(r){var s=lr();return r={current:r},s.memoizedState=r},useState:Mg,useDebugValue:xd,useDeferredValue:function(r){return lr().memoizedState=r},useTransition:function(){var r=Mg(!1),s=r[0];return r=nS.bind(null,r[1]),lr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=st,p=lr();if(nt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Rt===null)throw Error(t(349));(gs&30)!==0||Dg(h,s,l)}p.memoizedState=l;var y={value:l,getSnapshot:s};return p.queue=y,Ug(Og.bind(null,h,y,r),[r]),h.flags|=2048,Ya(9,Ng.bind(null,h,y,l,s),void 0,null),l},useId:function(){var r=lr(),s=Rt.identifierPrefix;if(nt){var l=Dr,h=Vr;l=(h&~(1<<32-Qt(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Qa++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=tS++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},oS={readContext:Cn,useCallback:Hg,useContext:Cn,useEffect:kd,useImperativeHandle:$g,useInsertionEffect:jg,useLayoutEffect:Bg,useMemo:Wg,useReducer:Cd,useRef:Fg,useState:function(){return Cd(Xa)},useDebugValue:xd,useDeferredValue:function(r){var s=Rn();return qg(s,It.memoizedState,r)},useTransition:function(){var r=Cd(Xa)[0],s=Rn().memoizedState;return[r,s]},useMutableSource:xg,useSyncExternalStore:Vg,useId:Gg,unstable_isNewReconciler:!1},aS={readContext:Cn,useCallback:Hg,useContext:Cn,useEffect:kd,useImperativeHandle:$g,useInsertionEffect:jg,useLayoutEffect:Bg,useMemo:Wg,useReducer:Rd,useRef:Fg,useState:function(){return Rd(Xa)},useDebugValue:xd,useDeferredValue:function(r){var s=Rn();return It===null?s.memoizedState=r:qg(s,It.memoizedState,r)},useTransition:function(){var r=Rd(Xa)[0],s=Rn().memoizedState;return[r,s]},useMutableSource:xg,useSyncExternalStore:Vg,useId:Gg,unstable_isNewReconciler:!1};function Wn(r,s){if(r&&r.defaultProps){s=ie({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function Vd(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:ie({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Hu={isMounted:function(r){return(r=r._reactInternals)?Ln(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=Jt(),p=gi(r),y=Or(h,p);y.payload=s,l!=null&&(y.callback=l),s=di(r,y,p),s!==null&&(Kn(s,r,p,h),Lu(s,r,p))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=Jt(),p=gi(r),y=Or(h,p);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=di(r,y,p),s!==null&&(Kn(s,r,p,h),Lu(s,r,p))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Jt(),h=gi(r),p=Or(l,h);p.tag=2,s!=null&&(p.callback=s),s=di(r,p,h),s!==null&&(Kn(s,r,h,l),Lu(s,r,h))}};function Yg(r,s,l,h,p,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,T):s.prototype&&s.prototype.isPureReactComponent?!Ma(l,h)||!Ma(p,y):!0}function Jg(r,s,l){var h=!1,p=ui,y=s.contextType;return typeof y=="object"&&y!==null?y=Cn(y):(p=rn(s)?hs:jt.current,h=s.contextTypes,y=(h=h!=null)?wo(r,p):ui),s=new s(l,y),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Hu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=y),s}function Zg(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&Hu.enqueueReplaceState(s,s.state,null)}function Dd(r,s,l,h){var p=r.stateNode;p.props=l,p.state=r.memoizedState,p.refs={},vd(r);var y=s.contextType;typeof y=="object"&&y!==null?p.context=Cn(y):(y=rn(s)?hs:jt.current,p.context=wo(r,y)),p.state=r.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Vd(r,s,y,l),p.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Hu.enqueueReplaceState(p,p.state,null),Mu(r,l,p,h),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function Ro(r,s){try{var l="",h=s;do l+=Re(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:s,stack:p,digest:null}}function Nd(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Od(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var lS=typeof WeakMap=="function"?WeakMap:Map;function ey(r,s,l){l=Or(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Yu||(Yu=!0,Qd=h),Od(r,s)},l}function ty(r,s,l){l=Or(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=s.value;l.payload=function(){return h(p)},l.callback=function(){Od(r,s)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Od(r,s),typeof h!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})}),l}function ny(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new lS;var p=new Set;h.set(s,p)}else p=h.get(s),p===void 0&&(p=new Set,h.set(s,p));p.has(l)||(p.add(l),r=ES.bind(null,r,s,l),s.then(r,r))}function ry(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function iy(r,s,l,h,p){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Or(-1,1),s.tag=2,di(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=p,r)}var uS=Q.ReactCurrentOwner,sn=!1;function Yt(r,s,l,h){s.child=r===null?Sg(s,null,l,h):So(s,r.child,l,h)}function sy(r,s,l,h,p){l=l.render;var y=s.ref;return Po(s,p),h=Ad(r,s,l,h,y,p),l=Pd(),r!==null&&!sn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,br(r,s,p)):(nt&&l&&ld(s),s.flags|=1,Yt(r,s,h,p),s.child)}function oy(r,s,l,h,p){if(r===null){var y=l.type;return typeof y=="function"&&!nf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,ay(r,s,y,h,p)):(r=rc(l.type,null,h,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,(r.lanes&p)===0){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:Ma,l(T,h)&&r.ref===s.ref)return br(r,s,p)}return s.flags|=1,r=vi(y,h),r.ref=s.ref,r.return=s,s.child=r}function ay(r,s,l,h,p){if(r!==null){var y=r.memoizedProps;if(Ma(y,h)&&r.ref===s.ref)if(sn=!1,s.pendingProps=h=y,(r.lanes&p)!==0)(r.flags&131072)!==0&&(sn=!0);else return s.lanes=r.lanes,br(r,s,p)}return bd(r,s,l,h,p)}function ly(r,s,l){var h=s.pendingProps,p=h.children,y=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(xo,vn),vn|=l;else{if((l&1073741824)===0)return r=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Xe(xo,vn),vn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Xe(xo,vn),vn|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,Xe(xo,vn),vn|=h;return Yt(r,s,p,l),s.child}function uy(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function bd(r,s,l,h,p){var y=rn(l)?hs:jt.current;return y=wo(s,y),Po(s,p),l=Ad(r,s,l,h,y,p),h=Pd(),r!==null&&!sn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,br(r,s,p)):(nt&&h&&ld(s),s.flags|=1,Yt(r,s,l,p),s.child)}function cy(r,s,l,h,p){if(rn(l)){var y=!0;Ru(s)}else y=!1;if(Po(s,p),s.stateNode===null)qu(r,s),Jg(s,l,h),Dd(s,l,h,p),h=!0;else if(r===null){var T=s.stateNode,R=s.memoizedProps;T.props=R;var V=T.context,z=l.contextType;typeof z=="object"&&z!==null?z=Cn(z):(z=rn(l)?hs:jt.current,z=wo(s,z));var Y=l.getDerivedStateFromProps,Z=typeof Y=="function"||typeof T.getSnapshotBeforeUpdate=="function";Z||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==h||V!==z)&&Zg(s,T,h,z),hi=!1;var X=s.memoizedState;T.state=X,Mu(s,h,T,p),V=s.memoizedState,R!==h||X!==V||nn.current||hi?(typeof Y=="function"&&(Vd(s,l,Y,h),V=s.memoizedState),(R=hi||Yg(s,l,R,h,X,V,z))?(Z||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=V),T.props=h,T.state=V,T.context=z,h=R):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{T=s.stateNode,Pg(r,s),R=s.memoizedProps,z=s.type===s.elementType?R:Wn(s.type,R),T.props=z,Z=s.pendingProps,X=T.context,V=l.contextType,typeof V=="object"&&V!==null?V=Cn(V):(V=rn(l)?hs:jt.current,V=wo(s,V));var oe=l.getDerivedStateFromProps;(Y=typeof oe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==Z||X!==V)&&Zg(s,T,h,V),hi=!1,X=s.memoizedState,T.state=X,Mu(s,h,T,p);var he=s.memoizedState;R!==Z||X!==he||nn.current||hi?(typeof oe=="function"&&(Vd(s,l,oe,h),he=s.memoizedState),(z=hi||Yg(s,l,z,h,X,he,V)||!1)?(Y||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,he,V),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,he,V)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||R===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=he),T.props=h,T.state=he,T.context=V,h=z):(typeof T.componentDidUpdate!="function"||R===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),h=!1)}return Ld(r,s,l,h,y,p)}function Ld(r,s,l,h,p,y){uy(r,s);var T=(s.flags&128)!==0;if(!h&&!T)return p&&mg(s,l,!1),br(r,s,y);h=s.stateNode,uS.current=s;var R=T&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&T?(s.child=So(s,r.child,null,y),s.child=So(s,null,R,y)):Yt(r,s,R,y),s.memoizedState=h.state,p&&mg(s,l,!0),s.child}function hy(r){var s=r.stateNode;s.pendingContext?fg(r,s.pendingContext,s.pendingContext!==s.context):s.context&&fg(r,s.context,!1),_d(r,s.containerInfo)}function dy(r,s,l,h,p){return Io(),dd(p),s.flags|=256,Yt(r,s,l,h),s.child}var Md={dehydrated:null,treeContext:null,retryLane:0};function Fd(r){return{baseLanes:r,cachePool:null,transitions:null}}function fy(r,s,l){var h=s.pendingProps,p=it.current,y=!1,T=(s.flags&128)!==0,R;if((R=T)||(R=r!==null&&r.memoizedState===null?!1:(p&2)!==0),R?(y=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),Xe(it,p&1),r===null)return hd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(T=h.children,r=h.fallback,y?(h=s.mode,y=s.child,T={mode:"hidden",children:T},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=ic(T,h,0,null),r=Ts(r,h,l,null),y.return=s,r.return=s,y.sibling=r,s.child=y,s.child.memoizedState=Fd(l),s.memoizedState=Md,r):Ud(s,T));if(p=r.memoizedState,p!==null&&(R=p.dehydrated,R!==null))return cS(r,s,T,h,R,p,l);if(y){y=h.fallback,T=s.mode,p=r.child,R=p.sibling;var V={mode:"hidden",children:h.children};return(T&1)===0&&s.child!==p?(h=s.child,h.childLanes=0,h.pendingProps=V,s.deletions=null):(h=vi(p,V),h.subtreeFlags=p.subtreeFlags&14680064),R!==null?y=vi(R,y):(y=Ts(y,T,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,T=r.child.memoizedState,T=T===null?Fd(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=r.childLanes&~l,s.memoizedState=Md,h}return y=r.child,r=y.sibling,h=vi(y,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function Ud(r,s){return s=ic({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Wu(r,s,l,h){return h!==null&&dd(h),So(s,r.child,null,l),r=Ud(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function cS(r,s,l,h,p,y,T){if(l)return s.flags&256?(s.flags&=-257,h=Nd(Error(t(422))),Wu(r,s,T,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(y=h.fallback,p=s.mode,h=ic({mode:"visible",children:h.children},p,0,null),y=Ts(y,p,T,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,(s.mode&1)!==0&&So(s,r.child,null,T),s.child.memoizedState=Fd(T),s.memoizedState=Md,y);if((s.mode&1)===0)return Wu(r,s,T,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var R=h.dgst;return h=R,y=Error(t(419)),h=Nd(y,h,void 0),Wu(r,s,T,h)}if(R=(T&r.childLanes)!==0,sn||R){if(h=Rt,h!==null){switch(T&-T){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|T))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Nr(r,p),Kn(h,r,p,-1))}return tf(),h=Nd(Error(t(421))),Wu(r,s,T,h)}return p.data==="$?"?(s.flags|=128,s.child=r.child,s=IS.bind(null,r),p._reactRetry=s,null):(r=y.treeContext,yn=ai(p.nextSibling),gn=s,nt=!0,Hn=null,r!==null&&(An[Pn++]=Vr,An[Pn++]=Dr,An[Pn++]=ds,Vr=r.id,Dr=r.overflow,ds=s),s=Ud(s,h.children),s.flags|=4096,s)}function py(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),gd(r.return,s,l)}function jd(r,s,l,h,p){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function my(r,s,l){var h=s.pendingProps,p=h.revealOrder,y=h.tail;if(Yt(r,s,h.children,l),h=it.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&py(r,l,s);else if(r.tag===19)py(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Xe(it,h),(s.mode&1)===0)s.memoizedState=null;else switch(p){case"forwards":for(l=s.child,p=null;l!==null;)r=l.alternate,r!==null&&Fu(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),jd(s,!1,p,l,y);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&Fu(r)===null){s.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}jd(s,!0,l,null,y);break;case"together":jd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function qu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function br(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),ys|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=vi(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=vi(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function hS(r,s,l){switch(s.tag){case 3:hy(s),Io();break;case 5:kg(s);break;case 1:rn(s.type)&&Ru(s);break;case 4:_d(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,p=s.memoizedProps.value;Xe(Ou,h._currentValue),h._currentValue=p;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Xe(it,it.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?fy(r,s,l):(Xe(it,it.current&1),r=br(r,s,l),r!==null?r.sibling:null);Xe(it,it.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return my(r,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Xe(it,it.current),h)break;return null;case 22:case 23:return s.lanes=0,ly(r,s,l)}return br(r,s,l)}var gy,Bd,yy,vy;gy=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Bd=function(){},yy=function(r,s,l,h){var p=r.memoizedProps;if(p!==h){r=s.stateNode,ms(ar.current);var y=null;switch(l){case"input":p=Ki(r,p),h=Ki(r,h),y=[];break;case"select":p=ie({},p,{value:void 0}),h=ie({},h,{value:void 0}),y=[];break;case"textarea":p=da(r,p),h=da(r,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Au)}va(l,h);var T;l=null;for(z in p)if(!h.hasOwnProperty(z)&&p.hasOwnProperty(z)&&p[z]!=null)if(z==="style"){var R=p[z];for(T in R)R.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?y||(y=[]):(y=y||[]).push(z,null));for(z in h){var V=h[z];if(R=p?.[z],h.hasOwnProperty(z)&&V!==R&&(V!=null||R!=null))if(z==="style")if(R){for(T in R)!R.hasOwnProperty(T)||V&&V.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in V)V.hasOwnProperty(T)&&R[T]!==V[T]&&(l||(l={}),l[T]=V[T])}else l||(y||(y=[]),y.push(z,l)),l=V;else z==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,R=R?R.__html:void 0,V!=null&&R!==V&&(y=y||[]).push(z,V)):z==="children"?typeof V!="string"&&typeof V!="number"||(y=y||[]).push(z,""+V):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(V!=null&&z==="onScroll"&&Je("scroll",r),y||R===V||(y=[])):(y=y||[]).push(z,V))}l&&(y=y||[]).push("style",l);var z=y;(s.updateQueue=z)&&(s.flags|=4)}},vy=function(r,s,l,h){l!==h&&(s.flags|=4)};function Ja(r,s){if(!nt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function zt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function dS(r,s,l){var h=s.pendingProps;switch(ud(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(s),null;case 1:return rn(s.type)&&Cu(),zt(s),null;case 3:return h=s.stateNode,Co(),Ze(nn),Ze(jt),Ed(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Du(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Hn!==null&&(Jd(Hn),Hn=null))),Bd(r,s),zt(s),null;case 5:wd(s);var p=ms(Ga.current);if(l=s.type,r!==null&&s.stateNode!=null)yy(r,s,l,h,p),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return zt(s),null}if(r=ms(ar.current),Du(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[or]=s,h[za]=y,r=(s.mode&1)!==0,l){case"dialog":Je("cancel",h),Je("close",h);break;case"iframe":case"object":case"embed":Je("load",h);break;case"video":case"audio":for(p=0;p<Ua.length;p++)Je(Ua[p],h);break;case"source":Je("error",h);break;case"img":case"image":case"link":Je("error",h),Je("load",h);break;case"details":Je("toggle",h);break;case"input":Bs(h,y),Je("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Je("invalid",h);break;case"textarea":$s(h,y),Je("invalid",h)}va(l,y),p=null;for(var T in y)if(y.hasOwnProperty(T)){var R=y[T];T==="children"?typeof R=="string"?h.textContent!==R&&(y.suppressHydrationWarning!==!0&&Su(h.textContent,R,r),p=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(y.suppressHydrationWarning!==!0&&Su(h.textContent,R,r),p=["children",""+R]):o.hasOwnProperty(T)&&R!=null&&T==="onScroll"&&Je("scroll",h)}switch(l){case"input":Dt(h),Xl(h,y,!0);break;case"textarea":Dt(h),fa(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Au)}h=p,s.updateQueue=h,h!==null&&(s.flags|=4)}else{T=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=wt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=T.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=T.createElement(l,{is:h.is}):(r=T.createElement(l),l==="select"&&(T=r,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):r=T.createElementNS(r,l),r[or]=s,r[za]=h,gy(r,s,!1,!1),s.stateNode=r;e:{switch(T=_a(l,h),l){case"dialog":Je("cancel",r),Je("close",r),p=h;break;case"iframe":case"object":case"embed":Je("load",r),p=h;break;case"video":case"audio":for(p=0;p<Ua.length;p++)Je(Ua[p],r);p=h;break;case"source":Je("error",r),p=h;break;case"img":case"image":case"link":Je("error",r),Je("load",r),p=h;break;case"details":Je("toggle",r),p=h;break;case"input":Bs(r,h),p=Ki(r,h),Je("invalid",r);break;case"option":p=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},p=ie({},h,{value:void 0}),Je("invalid",r);break;case"textarea":$s(r,h),p=da(r,h),Je("invalid",r);break;default:p=h}va(l,p),R=p;for(y in R)if(R.hasOwnProperty(y)){var V=R[y];y==="style"?ga(r,V):y==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&pa(r,V)):y==="children"?typeof V=="string"?(l!=="textarea"||V!=="")&&Xr(r,V):typeof V=="number"&&Xr(r,""+V):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?V!=null&&y==="onScroll"&&Je("scroll",r):V!=null&&H(r,y,V,T))}switch(l){case"input":Dt(r),Xl(r,h,!1);break;case"textarea":Dt(r),fa(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Be(h.value));break;case"select":r.multiple=!!h.multiple,y=h.value,y!=null?Tr(r,!!h.multiple,y,!1):h.defaultValue!=null&&Tr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=Au)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return zt(s),null;case 6:if(r&&s.stateNode!=null)vy(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=ms(Ga.current),ms(ar.current),Du(s)){if(h=s.stateNode,l=s.memoizedProps,h[or]=s,(y=h.nodeValue!==l)&&(r=gn,r!==null))switch(r.tag){case 3:Su(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Su(h.nodeValue,l,(r.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[or]=s,s.stateNode=h}return zt(s),null;case 13:if(Ze(it),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(nt&&yn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Tg(),Io(),s.flags|=98560,y=!1;else if(y=Du(s),h!==null&&h.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[or]=s}else Io(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zt(s),y=!1}else Hn!==null&&(Jd(Hn),Hn=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(it.current&1)!==0?St===0&&(St=3):tf())),s.updateQueue!==null&&(s.flags|=4),zt(s),null);case 4:return Co(),Bd(r,s),r===null&&ja(s.stateNode.containerInfo),zt(s),null;case 10:return md(s.type._context),zt(s),null;case 17:return rn(s.type)&&Cu(),zt(s),null;case 19:if(Ze(it),y=s.memoizedState,y===null)return zt(s),null;if(h=(s.flags&128)!==0,T=y.rendering,T===null)if(h)Ja(y,!1);else{if(St!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(T=Fu(r),T!==null){for(s.flags|=128,Ja(y,!1),h=T.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,r=h,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,r=T.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Xe(it,it.current&1|2),s.child}r=r.sibling}y.tail!==null&&Qe()>Vo&&(s.flags|=128,h=!0,Ja(y,!1),s.lanes=4194304)}else{if(!h)if(r=Fu(T),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Ja(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!nt)return zt(s),null}else 2*Qe()-y.renderingStartTime>Vo&&l!==1073741824&&(s.flags|=128,h=!0,Ja(y,!1),s.lanes=4194304);y.isBackwards?(T.sibling=s.child,s.child=T):(l=y.last,l!==null?l.sibling=T:s.child=T,y.last=T)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Qe(),s.sibling=null,l=it.current,Xe(it,h?l&1|2:l&1),s):(zt(s),null);case 22:case 23:return ef(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(vn&1073741824)!==0&&(zt(s),s.subtreeFlags&6&&(s.flags|=8192)):zt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function fS(r,s){switch(ud(s),s.tag){case 1:return rn(s.type)&&Cu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Co(),Ze(nn),Ze(jt),Ed(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return wd(s),null;case 13:if(Ze(it),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Io()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ze(it),null;case 4:return Co(),null;case 10:return md(s.type._context),null;case 22:case 23:return ef(),null;case 24:return null;default:return null}}var Gu=!1,$t=!1,pS=typeof WeakSet=="function"?WeakSet:Set,ce=null;function ko(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){lt(r,s,h)}else l.current=null}function zd(r,s,l){try{l()}catch(h){lt(r,s,h)}}var _y=!1;function mS(r,s){if(ed=ii,r=Ym(),qh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,R=-1,V=-1,z=0,Y=0,Z=r,X=null;t:for(;;){for(var oe;Z!==l||p!==0&&Z.nodeType!==3||(R=T+p),Z!==y||h!==0&&Z.nodeType!==3||(V=T+h),Z.nodeType===3&&(T+=Z.nodeValue.length),(oe=Z.firstChild)!==null;)X=Z,Z=oe;for(;;){if(Z===r)break t;if(X===l&&++z===p&&(R=T),X===y&&++Y===h&&(V=T),(oe=Z.nextSibling)!==null)break;Z=X,X=Z.parentNode}Z=oe}l=R===-1||V===-1?null:{start:R,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(td={focusedElem:r,selectionRange:l},ii=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var he=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var de=he.memoizedProps,ht=he.memoizedState,j=s.stateNode,b=j.getSnapshotBeforeUpdate(s.elementType===s.type?de:Wn(s.type,de),ht);j.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){lt(s,s.return,ee)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return he=_y,_y=!1,he}function Za(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&r)===r){var y=p.destroy;p.destroy=void 0,y!==void 0&&zd(s,l,y)}p=p.next}while(p!==h)}}function Ku(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function $d(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function wy(r){var s=r.alternate;s!==null&&(r.alternate=null,wy(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[or],delete s[za],delete s[sd],delete s[YI],delete s[JI])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Ty(r){return r.tag===5||r.tag===3||r.tag===4}function Ey(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ty(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Hd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Au));else if(h!==4&&(r=r.child,r!==null))for(Hd(r,s,l),r=r.sibling;r!==null;)Hd(r,s,l),r=r.sibling}function Wd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Wd(r,s,l),r=r.sibling;r!==null;)Wd(r,s,l),r=r.sibling}var bt=null,qn=!1;function fi(r,s,l){for(l=l.child;l!==null;)Iy(r,s,l),l=l.sibling}function Iy(r,s,l){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(rs,l)}catch{}switch(l.tag){case 5:$t||ko(l,s);case 6:var h=bt,p=qn;bt=null,fi(r,s,l),bt=h,qn=p,bt!==null&&(qn?(r=bt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):bt.removeChild(l.stateNode));break;case 18:bt!==null&&(qn?(r=bt,l=l.stateNode,r.nodeType===8?id(r.parentNode,l):r.nodeType===1&&id(r,l),Bn(r)):id(bt,l.stateNode));break;case 4:h=bt,p=qn,bt=l.stateNode.containerInfo,qn=!0,fi(r,s,l),bt=h,qn=p;break;case 0:case 11:case 14:case 15:if(!$t&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&zd(l,s,T),p=p.next}while(p!==h)}fi(r,s,l);break;case 1:if(!$t&&(ko(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(R){lt(l,s,R)}fi(r,s,l);break;case 21:fi(r,s,l);break;case 22:l.mode&1?($t=(h=$t)||l.memoizedState!==null,fi(r,s,l),$t=h):fi(r,s,l);break;default:fi(r,s,l)}}function Sy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new pS),s.forEach(function(h){var p=SS.bind(null,r,h);l.has(h)||(l.add(h),h.then(p,p))})}}function Gn(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=r,T=s,R=T;e:for(;R!==null;){switch(R.tag){case 5:bt=R.stateNode,qn=!1;break e;case 3:bt=R.stateNode.containerInfo,qn=!0;break e;case 4:bt=R.stateNode.containerInfo,qn=!0;break e}R=R.return}if(bt===null)throw Error(t(160));Iy(y,T,p),bt=null,qn=!1;var V=p.alternate;V!==null&&(V.return=null),p.return=null}catch(z){lt(p,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ay(s,r),s=s.sibling}function Ay(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Gn(s,r),ur(r),h&4){try{Za(3,r,r.return),Ku(3,r)}catch(de){lt(r,r.return,de)}try{Za(5,r,r.return)}catch(de){lt(r,r.return,de)}}break;case 1:Gn(s,r),ur(r),h&512&&l!==null&&ko(l,l.return);break;case 5:if(Gn(s,r),ur(r),h&512&&l!==null&&ko(l,l.return),r.flags&32){var p=r.stateNode;try{Xr(p,"")}catch(de){lt(r,r.return,de)}}if(h&4&&(p=r.stateNode,p!=null)){var y=r.memoizedProps,T=l!==null?l.memoizedProps:y,R=r.type,V=r.updateQueue;if(r.updateQueue=null,V!==null)try{R==="input"&&y.type==="radio"&&y.name!=null&&ca(p,y),_a(R,T);var z=_a(R,y);for(T=0;T<V.length;T+=2){var Y=V[T],Z=V[T+1];Y==="style"?ga(p,Z):Y==="dangerouslySetInnerHTML"?pa(p,Z):Y==="children"?Xr(p,Z):H(p,Y,Z,z)}switch(R){case"input":ha(p,y);break;case"textarea":Hs(p,y);break;case"select":var X=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var oe=y.value;oe!=null?Tr(p,!!y.multiple,oe,!1):X!==!!y.multiple&&(y.defaultValue!=null?Tr(p,!!y.multiple,y.defaultValue,!0):Tr(p,!!y.multiple,y.multiple?[]:"",!1))}p[za]=y}catch(de){lt(r,r.return,de)}}break;case 6:if(Gn(s,r),ur(r),h&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,y=r.memoizedProps;try{p.nodeValue=y}catch(de){lt(r,r.return,de)}}break;case 3:if(Gn(s,r),ur(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Bn(s.containerInfo)}catch(de){lt(r,r.return,de)}break;case 4:Gn(s,r),ur(r);break;case 13:Gn(s,r),ur(r),p=r.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Kd=Qe())),h&4&&Sy(r);break;case 22:if(Y=l!==null&&l.memoizedState!==null,r.mode&1?($t=(z=$t)||Y,Gn(s,r),$t=z):Gn(s,r),ur(r),h&8192){if(z=r.memoizedState!==null,(r.stateNode.isHidden=z)&&!Y&&(r.mode&1)!==0)for(ce=r,Y=r.child;Y!==null;){for(Z=ce=Y;ce!==null;){switch(X=ce,oe=X.child,X.tag){case 0:case 11:case 14:case 15:Za(4,X,X.return);break;case 1:ko(X,X.return);var he=X.stateNode;if(typeof he.componentWillUnmount=="function"){h=X,l=X.return;try{s=h,he.props=s.memoizedProps,he.state=s.memoizedState,he.componentWillUnmount()}catch(de){lt(h,l,de)}}break;case 5:ko(X,X.return);break;case 22:if(X.memoizedState!==null){Ry(Z);continue}}oe!==null?(oe.return=X,ce=oe):Ry(Z)}Y=Y.sibling}e:for(Y=null,Z=r;;){if(Z.tag===5){if(Y===null){Y=Z;try{p=Z.stateNode,z?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(R=Z.stateNode,V=Z.memoizedProps.style,T=V!=null&&V.hasOwnProperty("display")?V.display:null,R.style.display=ma("display",T))}catch(de){lt(r,r.return,de)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=z?"":Z.memoizedProps}catch(de){lt(r,r.return,de)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===r)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===r)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===r)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Gn(s,r),ur(r),h&4&&Sy(r);break;case 21:break;default:Gn(s,r),ur(r)}}function ur(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(Ty(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Xr(p,""),h.flags&=-33);var y=Ey(r);Wd(r,y,p);break;case 3:case 4:var T=h.stateNode.containerInfo,R=Ey(r);Hd(r,R,T);break;default:throw Error(t(161))}}catch(V){lt(r,r.return,V)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function gS(r,s,l){ce=r,Py(r)}function Py(r,s,l){for(var h=(r.mode&1)!==0;ce!==null;){var p=ce,y=p.child;if(p.tag===22&&h){var T=p.memoizedState!==null||Gu;if(!T){var R=p.alternate,V=R!==null&&R.memoizedState!==null||$t;R=Gu;var z=$t;if(Gu=T,($t=V)&&!z)for(ce=p;ce!==null;)T=ce,V=T.child,T.tag===22&&T.memoizedState!==null?ky(p):V!==null?(V.return=T,ce=V):ky(p);for(;y!==null;)ce=y,Py(y),y=y.sibling;ce=p,Gu=R,$t=z}Cy(r)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,ce=y):Cy(r)}}function Cy(r){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:$t||Ku(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!$t)if(l===null)h.componentDidMount();else{var p=s.elementType===s.type?l.memoizedProps:Wn(s.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&Rg(s,y,h);break;case 3:var T=s.updateQueue;if(T!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Rg(s,T,l)}break;case 5:var R=s.stateNode;if(l===null&&s.flags&4){l=R;var V=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&l.focus();break;case"img":V.src&&(l.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&Bn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$t||s.flags&512&&$d(s)}catch(X){lt(s,s.return,X)}}if(s===r){ce=null;break}if(l=s.sibling,l!==null){l.return=s.return,ce=l;break}ce=s.return}}function Ry(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ce=l;break}ce=s.return}}function ky(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Ku(4,s)}catch(V){lt(s,l,V)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var p=s.return;try{h.componentDidMount()}catch(V){lt(s,p,V)}}var y=s.return;try{$d(s)}catch(V){lt(s,y,V)}break;case 5:var T=s.return;try{$d(s)}catch(V){lt(s,T,V)}}}catch(V){lt(s,s.return,V)}if(s===r){ce=null;break}var R=s.sibling;if(R!==null){R.return=s.return,ce=R;break}ce=s.return}}var yS=Math.ceil,Qu=Q.ReactCurrentDispatcher,qd=Q.ReactCurrentOwner,kn=Q.ReactCurrentBatchConfig,ze=0,Rt=null,mt=null,Lt=0,vn=0,xo=li(0),St=0,el=null,ys=0,Xu=0,Gd=0,tl=null,on=null,Kd=0,Vo=1/0,Lr=null,Yu=!1,Qd=null,pi=null,Ju=!1,mi=null,Zu=0,nl=0,Xd=null,ec=-1,tc=0;function Jt(){return(ze&6)!==0?Qe():ec!==-1?ec:ec=Qe()}function gi(r){return(r.mode&1)===0?1:(ze&2)!==0&&Lt!==0?Lt&-Lt:eS.transition!==null?(tc===0&&(tc=ss()),tc):(r=Le,r!==0||(r=window.event,r=r===void 0?16:xa(r.type)),r)}function Kn(r,s,l,h){if(50<nl)throw nl=0,Xd=null,Error(t(185));ei(r,l,h),((ze&2)===0||r!==Rt)&&(r===Rt&&((ze&2)===0&&(Xu|=l),St===4&&yi(r,Lt)),an(r,h),l===1&&ze===0&&(s.mode&1)===0&&(Vo=Qe()+500,ku&&ci()))}function an(r,s){var l=r.callbackNode;Sr(r,s);var h=is(r,r===Rt?Lt:0);if(h===0)l!==null&&Aa(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&Aa(l),s===1)r.tag===0?ZI(Vy.bind(null,r)):gg(Vy.bind(null,r)),QI(function(){(ze&6)===0&&ci()}),l=null;else{switch(ni(h)){case 1:l=ns;break;case 4:l=Yr;break;case 16:l=En;break;case 536870912:l=tu;break;default:l=En}l=Uy(l,xy.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function xy(r,s){if(ec=-1,tc=0,(ze&6)!==0)throw Error(t(327));var l=r.callbackNode;if(Do()&&r.callbackNode!==l)return null;var h=is(r,r===Rt?Lt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=nc(r,h);else{s=h;var p=ze;ze|=2;var y=Ny();(Rt!==r||Lt!==s)&&(Lr=null,Vo=Qe()+500,_s(r,s));do try{wS();break}catch(R){Dy(r,R)}while(!0);pd(),Qu.current=y,ze=p,mt!==null?s=0:(Rt=null,Lt=0,s=St)}if(s!==0){if(s===2&&(p=fn(r),p!==0&&(h=p,s=Yd(r,p))),s===1)throw l=el,_s(r,0),yi(r,h),an(r,Qe()),l;if(s===6)yi(r,h);else{if(p=r.current.alternate,(h&30)===0&&!vS(p)&&(s=nc(r,h),s===2&&(y=fn(r),y!==0&&(h=y,s=Yd(r,y))),s===1))throw l=el,_s(r,0),yi(r,h),an(r,Qe()),l;switch(r.finishedWork=p,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ws(r,on,Lr);break;case 3:if(yi(r,h),(h&130023424)===h&&(s=Kd+500-Qe(),10<s)){if(is(r,0)!==0)break;if(p=r.suspendedLanes,(p&h)!==h){Jt(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=rd(ws.bind(null,r,on,Lr),s);break}ws(r,on,Lr);break;case 4:if(yi(r,h),(h&4194240)===h)break;for(s=r.eventTimes,p=-1;0<h;){var T=31-Qt(h);y=1<<T,T=s[T],T>p&&(p=T),h&=~y}if(h=p,h=Qe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*yS(h/1960))-h,10<h){r.timeoutHandle=rd(ws.bind(null,r,on,Lr),h);break}ws(r,on,Lr);break;case 5:ws(r,on,Lr);break;default:throw Error(t(329))}}}return an(r,Qe()),r.callbackNode===l?xy.bind(null,r):null}function Yd(r,s){var l=tl;return r.current.memoizedState.isDehydrated&&(_s(r,s).flags|=256),r=nc(r,s),r!==2&&(s=on,on=l,s!==null&&Jd(s)),r}function Jd(r){on===null?on=r:on.push.apply(on,r)}function vS(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!$n(y(),p))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yi(r,s){for(s&=~Gd,s&=~Xu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Qt(s),h=1<<l;r[l]=-1,s&=~h}}function Vy(r){if((ze&6)!==0)throw Error(t(327));Do();var s=is(r,0);if((s&1)===0)return an(r,Qe()),null;var l=nc(r,s);if(r.tag!==0&&l===2){var h=fn(r);h!==0&&(s=h,l=Yd(r,h))}if(l===1)throw l=el,_s(r,0),yi(r,s),an(r,Qe()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ws(r,on,Lr),an(r,Qe()),null}function Zd(r,s){var l=ze;ze|=1;try{return r(s)}finally{ze=l,ze===0&&(Vo=Qe()+500,ku&&ci())}}function vs(r){mi!==null&&mi.tag===0&&(ze&6)===0&&Do();var s=ze;ze|=1;var l=kn.transition,h=Le;try{if(kn.transition=null,Le=1,r)return r()}finally{Le=h,kn.transition=l,ze=s,(ze&6)===0&&ci()}}function ef(){vn=xo.current,Ze(xo)}function _s(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,KI(l)),mt!==null)for(l=mt.return;l!==null;){var h=l;switch(ud(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Cu();break;case 3:Co(),Ze(nn),Ze(jt),Ed();break;case 5:wd(h);break;case 4:Co();break;case 13:Ze(it);break;case 19:Ze(it);break;case 10:md(h.type._context);break;case 22:case 23:ef()}l=l.return}if(Rt=r,mt=r=vi(r.current,null),Lt=vn=s,St=0,el=null,Gd=Xu=ys=0,on=tl=null,ps!==null){for(s=0;s<ps.length;s++)if(l=ps[s],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var T=y.next;y.next=p,h.next=T}l.pending=h}ps=null}return r}function Dy(r,s){do{var l=mt;try{if(pd(),Uu.current=$u,ju){for(var h=st.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}ju=!1}if(gs=0,Ct=It=st=null,Ka=!1,Qa=0,qd.current=null,l===null||l.return===null){St=1,el=s,mt=null;break}e:{var y=r,T=l.return,R=l,V=s;if(s=Lt,R.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var z=V,Y=R,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var oe=ry(T);if(oe!==null){oe.flags&=-257,iy(oe,T,R,y,s),oe.mode&1&&ny(y,z,s),s=oe,V=z;var he=s.updateQueue;if(he===null){var de=new Set;de.add(V),s.updateQueue=de}else he.add(V);break e}else{if((s&1)===0){ny(y,z,s),tf();break e}V=Error(t(426))}}else if(nt&&R.mode&1){var ht=ry(T);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),iy(ht,T,R,y,s),dd(Ro(V,R));break e}}y=V=Ro(V,R),St!==4&&(St=2),tl===null?tl=[y]:tl.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var j=ey(y,V,s);Cg(y,j);break e;case 1:R=V;var b=y.type,B=y.stateNode;if((y.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(pi===null||!pi.has(B)))){y.flags|=65536,s&=-s,y.lanes|=s;var ee=ty(y,R,s);Cg(y,ee);break e}}y=y.return}while(y!==null)}by(l)}catch(pe){s=pe,mt===l&&l!==null&&(mt=l=l.return);continue}break}while(!0)}function Ny(){var r=Qu.current;return Qu.current=$u,r===null?$u:r}function tf(){(St===0||St===3||St===2)&&(St=4),Rt===null||(ys&268435455)===0&&(Xu&268435455)===0||yi(Rt,Lt)}function nc(r,s){var l=ze;ze|=2;var h=Ny();(Rt!==r||Lt!==s)&&(Lr=null,_s(r,s));do try{_S();break}catch(p){Dy(r,p)}while(!0);if(pd(),ze=l,Qu.current=h,mt!==null)throw Error(t(261));return Rt=null,Lt=0,St}function _S(){for(;mt!==null;)Oy(mt)}function wS(){for(;mt!==null&&!Zl();)Oy(mt)}function Oy(r){var s=Fy(r.alternate,r,vn);r.memoizedProps=r.pendingProps,s===null?by(r):mt=s,qd.current=null}function by(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=dS(l,s,vn),l!==null){mt=l;return}}else{if(l=fS(l,s),l!==null){l.flags&=32767,mt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{St=6,mt=null;return}}if(s=s.sibling,s!==null){mt=s;return}mt=s=r}while(s!==null);St===0&&(St=5)}function ws(r,s,l){var h=Le,p=kn.transition;try{kn.transition=null,Le=1,TS(r,s,l,h)}finally{kn.transition=p,Le=h}return null}function TS(r,s,l,h){do Do();while(mi!==null);if((ze&6)!==0)throw Error(t(327));l=r.finishedWork;var p=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=l.lanes|l.childLanes;if(Ke(r,y),r===Rt&&(mt=Rt=null,Lt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ju||(Ju=!0,Uy(En,function(){return Do(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=kn.transition,kn.transition=null;var T=Le;Le=1;var R=ze;ze|=4,qd.current=null,mS(r,l),Ay(l,r),BI(td),ii=!!ed,td=ed=null,r.current=l,gS(l),Fh(),ze=R,Le=T,kn.transition=y}else r.current=l;if(Ju&&(Ju=!1,mi=r,Zu=p),y=r.pendingLanes,y===0&&(pi=null),nu(l.stateNode),an(r,Qe()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)p=s[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Yu)throw Yu=!1,r=Qd,Qd=null,r;return(Zu&1)!==0&&r.tag!==0&&Do(),y=r.pendingLanes,(y&1)!==0?r===Xd?nl++:(nl=0,Xd=r):nl=0,ci(),null}function Do(){if(mi!==null){var r=ni(Zu),s=kn.transition,l=Le;try{if(kn.transition=null,Le=16>r?16:r,mi===null)var h=!1;else{if(r=mi,mi=null,Zu=0,(ze&6)!==0)throw Error(t(331));var p=ze;for(ze|=4,ce=r.current;ce!==null;){var y=ce,T=y.child;if((ce.flags&16)!==0){var R=y.deletions;if(R!==null){for(var V=0;V<R.length;V++){var z=R[V];for(ce=z;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:Za(8,Y,y)}var Z=Y.child;if(Z!==null)Z.return=Y,ce=Z;else for(;ce!==null;){Y=ce;var X=Y.sibling,oe=Y.return;if(wy(Y),Y===z){ce=null;break}if(X!==null){X.return=oe,ce=X;break}ce=oe}}}var he=y.alternate;if(he!==null){var de=he.child;if(de!==null){he.child=null;do{var ht=de.sibling;de.sibling=null,de=ht}while(de!==null)}}ce=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,ce=T;else e:for(;ce!==null;){if(y=ce,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Za(9,y,y.return)}var j=y.sibling;if(j!==null){j.return=y.return,ce=j;break e}ce=y.return}}var b=r.current;for(ce=b;ce!==null;){T=ce;var B=T.child;if((T.subtreeFlags&2064)!==0&&B!==null)B.return=T,ce=B;else e:for(T=b;ce!==null;){if(R=ce,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Ku(9,R)}}catch(pe){lt(R,R.return,pe)}if(R===T){ce=null;break e}var ee=R.sibling;if(ee!==null){ee.return=R.return,ce=ee;break e}ce=R.return}}if(ze=p,ci(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(rs,r)}catch{}h=!0}return h}finally{Le=l,kn.transition=s}}return!1}function Ly(r,s,l){s=Ro(l,s),s=ey(r,s,1),r=di(r,s,1),s=Jt(),r!==null&&(ei(r,1,s),an(r,s))}function lt(r,s,l){if(r.tag===3)Ly(r,r,l);else for(;s!==null;){if(s.tag===3){Ly(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(pi===null||!pi.has(h))){r=Ro(l,r),r=ty(s,r,1),s=di(s,r,1),r=Jt(),s!==null&&(ei(s,1,r),an(s,r));break}}s=s.return}}function ES(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=Jt(),r.pingedLanes|=r.suspendedLanes&l,Rt===r&&(Lt&l)===l&&(St===4||St===3&&(Lt&130023424)===Lt&&500>Qe()-Kd?_s(r,0):Gd|=l),an(r,s)}function My(r,s){s===0&&((r.mode&1)===0?s=1:(s=eo,eo<<=1,(eo&130023424)===0&&(eo=4194304)));var l=Jt();r=Nr(r,s),r!==null&&(ei(r,s,l),an(r,l))}function IS(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),My(r,l)}function SS(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),My(r,l)}var Fy;Fy=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||nn.current)sn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return sn=!1,hS(r,s,l);sn=(r.flags&131072)!==0}else sn=!1,nt&&(s.flags&1048576)!==0&&yg(s,Vu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;qu(r,s),r=s.pendingProps;var p=wo(s,jt.current);Po(s,l),p=Ad(null,s,h,r,p,l);var y=Pd();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,rn(h)?(y=!0,Ru(s)):y=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,vd(s),p.updater=Hu,s.stateNode=p,p._reactInternals=s,Dd(s,h,r,l),s=Ld(null,s,h,!0,y,l)):(s.tag=0,nt&&y&&ld(s),Yt(null,s,p,l),s=s.child),s;case 16:h=s.elementType;e:{switch(qu(r,s),r=s.pendingProps,p=h._init,h=p(h._payload),s.type=h,p=s.tag=PS(h),r=Wn(h,r),p){case 0:s=bd(null,s,h,r,l);break e;case 1:s=cy(null,s,h,r,l);break e;case 11:s=sy(null,s,h,r,l);break e;case 14:s=oy(null,s,h,Wn(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:Wn(h,p),bd(r,s,h,p,l);case 1:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:Wn(h,p),cy(r,s,h,p,l);case 3:e:{if(hy(s),r===null)throw Error(t(387));h=s.pendingProps,y=s.memoizedState,p=y.element,Pg(r,s),Mu(s,h,null,l);var T=s.memoizedState;if(h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){p=Ro(Error(t(423)),s),s=dy(r,s,h,l,p);break e}else if(h!==p){p=Ro(Error(t(424)),s),s=dy(r,s,h,l,p);break e}else for(yn=ai(s.stateNode.containerInfo.firstChild),gn=s,nt=!0,Hn=null,l=Sg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Io(),h===p){s=br(r,s,l);break e}Yt(r,s,h,l)}s=s.child}return s;case 5:return kg(s),r===null&&hd(s),h=s.type,p=s.pendingProps,y=r!==null?r.memoizedProps:null,T=p.children,nd(h,p)?T=null:y!==null&&nd(h,y)&&(s.flags|=32),uy(r,s),Yt(r,s,T,l),s.child;case 6:return r===null&&hd(s),null;case 13:return fy(r,s,l);case 4:return _d(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=So(s,null,h,l):Yt(r,s,h,l),s.child;case 11:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:Wn(h,p),sy(r,s,h,p,l);case 7:return Yt(r,s,s.pendingProps,l),s.child;case 8:return Yt(r,s,s.pendingProps.children,l),s.child;case 12:return Yt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,p=s.pendingProps,y=s.memoizedProps,T=p.value,Xe(Ou,h._currentValue),h._currentValue=T,y!==null)if($n(y.value,T)){if(y.children===p.children&&!nn.current){s=br(r,s,l);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var R=y.dependencies;if(R!==null){T=y.child;for(var V=R.firstContext;V!==null;){if(V.context===h){if(y.tag===1){V=Or(-1,l&-l),V.tag=2;var z=y.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?V.next=V:(V.next=Y.next,Y.next=V),z.pending=V}}y.lanes|=l,V=y.alternate,V!==null&&(V.lanes|=l),gd(y.return,l,s),R.lanes|=l;break}V=V.next}}else if(y.tag===10)T=y.type===s.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(t(341));T.lanes|=l,R=T.alternate,R!==null&&(R.lanes|=l),gd(T,l,s),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===s){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}Yt(r,s,p.children,l),s=s.child}return s;case 9:return p=s.type,h=s.pendingProps.children,Po(s,l),p=Cn(p),h=h(p),s.flags|=1,Yt(r,s,h,l),s.child;case 14:return h=s.type,p=Wn(h,s.pendingProps),p=Wn(h.type,p),oy(r,s,h,p,l);case 15:return ay(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:Wn(h,p),qu(r,s),s.tag=1,rn(h)?(r=!0,Ru(s)):r=!1,Po(s,l),Jg(s,h,p),Dd(s,h,p,l),Ld(null,s,h,!0,r,l);case 19:return my(r,s,l);case 22:return ly(r,s,l)}throw Error(t(156,s.tag))};function Uy(r,s){return Js(r,s)}function AS(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(r,s,l,h){return new AS(r,s,l,h)}function nf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function PS(r){if(typeof r=="function")return nf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===L)return 11;if(r===je)return 14}return 2}function vi(r,s){var l=r.alternate;return l===null?(l=xn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function rc(r,s,l,h,p,y){var T=2;if(h=r,typeof r=="function")nf(r)&&(T=1);else if(typeof r=="string")T=5;else e:switch(r){case k:return Ts(l.children,p,y,s);case S:T=8,p|=8;break;case C:return r=xn(12,l,s,p|2),r.elementType=C,r.lanes=y,r;case P:return r=xn(13,l,s,p),r.elementType=P,r.lanes=y,r;case Pe:return r=xn(19,l,s,p),r.elementType=Pe,r.lanes=y,r;case De:return ic(l,p,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:T=10;break e;case O:T=9;break e;case L:T=11;break e;case je:T=14;break e;case Ne:T=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=xn(T,l,s,p),s.elementType=r,s.type=h,s.lanes=y,s}function Ts(r,s,l,h){return r=xn(7,r,h,s),r.lanes=l,r}function ic(r,s,l,h){return r=xn(22,r,h,s),r.elementType=De,r.lanes=l,r.stateNode={isHidden:!1},r}function rf(r,s,l){return r=xn(6,r,null,s),r.lanes=l,r}function sf(r,s,l){return s=xn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function CS(r,s,l,h,p){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zr(0),this.expirationTimes=Zr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zr(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function of(r,s,l,h,p,y,T,R,V){return r=new CS(r,s,l,R,V),s===1?(s=1,y===!0&&(s|=8)):s=0,y=xn(3,null,null,s),r.current=y,y.stateNode=r,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},vd(y),r}function RS(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function jy(r){if(!r)return ui;r=r._reactInternals;e:{if(Ln(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(rn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(rn(l))return pg(r,l,s)}return s}function By(r,s,l,h,p,y,T,R,V){return r=of(l,h,!0,r,p,y,T,R,V),r.context=jy(null),l=r.current,h=Jt(),p=gi(l),y=Or(h,p),y.callback=s??null,di(l,y,p),r.current.lanes=p,ei(r,p,h),an(r,h),r}function sc(r,s,l,h){var p=s.current,y=Jt(),T=gi(p);return l=jy(l),s.context===null?s.context=l:s.pendingContext=l,s=Or(y,T),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=di(p,s,T),r!==null&&(Kn(r,p,T,y),Lu(r,p,T)),T}function oc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function zy(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function af(r,s){zy(r,s),(r=r.alternate)&&zy(r,s)}function kS(){return null}var $y=typeof reportError=="function"?reportError:function(r){console.error(r)};function lf(r){this._internalRoot=r}ac.prototype.render=lf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));sc(r,s,null,null)},ac.prototype.unmount=lf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;vs(function(){sc(null,r,null,null)}),s[kr]=null}};function ac(r){this._internalRoot=r}ac.prototype.unstable_scheduleHydration=function(r){if(r){var s=au();r={blockedOn:null,target:r,priority:s};for(var l=0;l<nr.length&&s!==0&&s<nr[l].priority;l++);nr.splice(l,0,r),l===0&&cu(r)}};function uf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function lc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Hy(){}function xS(r,s,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var z=oc(T);y.call(z)}}var T=By(s,h,r,0,null,!1,!1,"",Hy);return r._reactRootContainer=T,r[kr]=T.current,ja(r.nodeType===8?r.parentNode:r),vs(),T}for(;p=r.lastChild;)r.removeChild(p);if(typeof h=="function"){var R=h;h=function(){var z=oc(V);R.call(z)}}var V=of(r,0,!1,null,null,!1,!1,"",Hy);return r._reactRootContainer=V,r[kr]=V.current,ja(r.nodeType===8?r.parentNode:r),vs(function(){sc(s,V,l,h)}),V}function uc(r,s,l,h,p){var y=l._reactRootContainer;if(y){var T=y;if(typeof p=="function"){var R=p;p=function(){var V=oc(T);R.call(V)}}sc(s,T,r,p)}else T=xS(l,s,r,p,h);return oc(T)}su=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=Jr(s.pendingLanes);l!==0&&(ti(s,l|1),an(s,Qe()),(ze&6)===0&&(Vo=Qe()+500,ci()))}break;case 13:vs(function(){var h=Nr(r,1);if(h!==null){var p=Jt();Kn(h,r,1,p)}}),af(r,1)}},to=function(r){if(r.tag===13){var s=Nr(r,134217728);if(s!==null){var l=Jt();Kn(s,r,134217728,l)}af(r,134217728)}},ou=function(r){if(r.tag===13){var s=gi(r),l=Nr(r,s);if(l!==null){var h=Jt();Kn(l,r,s,h)}af(r,s)}},au=function(){return Le},lu=function(r,s){var l=Le;try{return Le=r,s()}finally{Le=l}},qs=function(r,s,l){switch(s){case"input":if(ha(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var p=Pu(h);if(!p)throw Error(t(90));Gi(h),ha(h,p)}}}break;case"textarea":Hs(r,l);break;case"select":s=l.value,s!=null&&Tr(r,!!l.multiple,s,!1)}},Ji=Zd,Ta=vs;var VS={usingClientEntryPoint:!1,Events:[$a,vo,Pu,er,wa,Zd]},rl={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DS={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Sa(r),r===null?null:r.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||kS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{rs=cc.inject(DS),dn=cc}catch{}}return ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VS,ln.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uf(s))throw Error(t(200));return RS(r,s,null,l)},ln.createRoot=function(r,s){if(!uf(r))throw Error(t(299));var l=!1,h="",p=$y;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=of(r,1,!1,null,null,l,!1,h,p),r[kr]=s.current,ja(r.nodeType===8?r.parentNode:r),new lf(s)},ln.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Sa(s),r=r===null?null:r.stateNode,r},ln.flushSync=function(r){return vs(r)},ln.hydrate=function(r,s,l){if(!lc(s))throw Error(t(200));return uc(null,r,s,!0,l)},ln.hydrateRoot=function(r,s,l){if(!uf(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",T=$y;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),s=By(s,null,r,1,l??null,p,!1,y,T),r[kr]=s.current,ja(r),h)for(r=0;r<h.length;r++)l=h[r],p=l._getVersion,p=p(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,p]:s.mutableSourceEagerHydrationData.push(l,p);return new ac(s)},ln.render=function(r,s,l){if(!lc(s))throw Error(t(200));return uc(null,r,s,!1,l)},ln.unmountComponentAtNode=function(r){if(!lc(r))throw Error(t(40));return r._reactRootContainer?(vs(function(){uc(null,null,r,!1,function(){r._reactRootContainer=null,r[kr]=null})}),!0):!1},ln.unstable_batchedUpdates=Zd,ln.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!lc(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return uc(r,s,l,!1,h)},ln.version="18.3.1-next-f1338f8080-20240426",ln}var Jy;function BS(){if(Jy)return df.exports;Jy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),df.exports=jS(),df.exports}var Zy;function zS(){if(Zy)return hc;Zy=1;var n=BS();return hc.createRoot=n.createRoot,hc.hydrateRoot=n.hydrateRoot,hc}var $S=zS();const M0=ge.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),uh=ge.createContext({}),Pp=ge.createContext(null),ch=typeof document<"u",HS=ch?ge.useLayoutEffect:ge.useEffect,F0=ge.createContext({strict:!1}),Cp=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),WS="framerAppearId",U0="data-"+Cp(WS);function qS(n,e,t,i){const{visualElement:o}=ge.useContext(uh),a=ge.useContext(F0),u=ge.useContext(Pp),d=ge.useContext(M0).reducedMotion,f=ge.useRef();i=i||a.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const m=f.current;ge.useInsertionEffect(()=>{m&&m.update(t,u)});const v=ge.useRef(!!(t[U0]&&!window.HandoffComplete));return HS(()=>{m&&(m.render(),v.current&&m.animationState&&m.animationState.animateChanges())}),ge.useEffect(()=>{m&&(m.updateFeatures(),!v.current&&m.animationState&&m.animationState.animateChanges(),v.current&&(v.current=!1,window.HandoffComplete=!0))}),m}function Mo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function GS(n,e,t){return ge.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Mo(t)&&(t.current=i))},[e])}function Il(n){return typeof n=="string"||Array.isArray(n)}function hh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Rp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kp=["initial",...Rp];function dh(n){return hh(n.animate)||kp.some(e=>Il(n[e]))}function j0(n){return!!(dh(n)||n.variants)}function KS(n,e){if(dh(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Il(t)?t:void 0,animate:Il(i)?i:void 0}}return n.inherit!==!1?e:{}}function QS(n){const{initial:e,animate:t}=KS(n,ge.useContext(uh));return ge.useMemo(()=>({initial:e,animate:t}),[ev(e),ev(t)])}function ev(n){return Array.isArray(n)?n.join(" "):n}const tv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Sl={};for(const n in tv)Sl[n]={isEnabled:e=>tv[n].some(t=>!!e[t])};function XS(n){for(const e in n)Sl[e]={...Sl[e],...n[e]}}const B0=ge.createContext({}),z0=ge.createContext({}),YS=Symbol.for("motionComponentSymbol");function JS({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:o}){n&&XS(n);function a(d,f){let m;const v={...ge.useContext(M0),...d,layoutId:ZS(d)},{isStatic:w}=v,E=QS(d),A=i(d,w);if(!w&&ch){E.visualElement=qS(o,A,v,e);const N=ge.useContext(z0),M=ge.useContext(F0).strict;E.visualElement&&(m=E.visualElement.loadFeatures(v,M,n,N))}return ge.createElement(uh.Provider,{value:E},m&&E.visualElement?ge.createElement(m,{visualElement:E.visualElement,...v}):null,t(o,d,GS(A,E.visualElement,f),A,w,E.visualElement))}const u=ge.forwardRef(a);return u[YS]=o,u}function ZS({layoutId:n}){const e=ge.useContext(B0).id;return e&&n!==void 0?e+"-"+n:n}function eA(n){function e(i,o={}){return JS(n(i,o))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,o)=>(t.has(o)||t.set(o,e(o)),t.get(o))})}const tA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xp(n){return typeof n!="string"||n.includes("-")?!1:!!(tA.indexOf(n)>-1||/[A-Z]/.test(n))}const bc={};function nA(n){Object.assign(bc,n)}const Ol=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ms=new Set(Ol);function $0(n,{layout:e,layoutId:t}){return Ms.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!bc[n]||n==="opacity")}const hn=n=>!!(n&&n.getVelocity),rA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iA=Ol.length;function sA(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,o){let a="";for(let u=0;u<iA;u++){const d=Ol[u];if(n[d]!==void 0){const f=rA[d]||d;a+=`${f}(${n[d]}) `}}return e&&!n.z&&(a+="translateZ(0)"),a=a.trim(),o?a=o(n,i?"":a):t&&i&&(a="none"),a}const H0=n=>e=>typeof e=="string"&&e.startsWith(n),W0=H0("--"),Uf=H0("var(--"),oA=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,aA=(n,e)=>e&&typeof n=="number"?e.transform(n):n,bi=(n,e,t)=>Math.min(Math.max(t,n),e),Fs={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},fl={...Fs,transform:n=>bi(0,1,n)},dc={...Fs,default:1},pl=n=>Math.round(n*1e5)/1e5,fh=/(-)?([\d]*\.?[\d])+/g,q0=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,lA=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function bl(n){return typeof n=="string"}const Ll=n=>({test:e=>bl(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ti=Ll("deg"),dr=Ll("%"),we=Ll("px"),uA=Ll("vh"),cA=Ll("vw"),nv={...dr,parse:n=>dr.parse(n)/100,transform:n=>dr.transform(n*100)},rv={...Fs,transform:Math.round},G0={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,size:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,rotate:Ti,rotateX:Ti,rotateY:Ti,rotateZ:Ti,scale:dc,scaleX:dc,scaleY:dc,scaleZ:dc,skew:Ti,skewX:Ti,skewY:Ti,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:fl,originX:nv,originY:nv,originZ:we,zIndex:rv,fillOpacity:fl,strokeOpacity:fl,numOctaves:rv};function Vp(n,e,t,i){const{style:o,vars:a,transform:u,transformOrigin:d}=n;let f=!1,m=!1,v=!0;for(const w in e){const E=e[w];if(W0(w)){a[w]=E;continue}const A=G0[w],N=aA(E,A);if(Ms.has(w)){if(f=!0,u[w]=N,!v)continue;E!==(A.default||0)&&(v=!1)}else w.startsWith("origin")?(m=!0,d[w]=N):o[w]=N}if(e.transform||(f||i?o.transform=sA(n.transform,t,v,i):o.transform&&(o.transform="none")),m){const{originX:w="50%",originY:E="50%",originZ:A=0}=d;o.transformOrigin=`${w} ${E} ${A}`}}const Dp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function K0(n,e,t){for(const i in e)!hn(e[i])&&!$0(i,t)&&(n[i]=e[i])}function hA({transformTemplate:n},e,t){return ge.useMemo(()=>{const i=Dp();return Vp(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function dA(n,e,t){const i=n.style||{},o={};return K0(o,i,n),Object.assign(o,hA(n,e,t)),n.transformValues?n.transformValues(o):o}function fA(n,e,t){const i={},o=dA(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=o,i}const pA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lc(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||pA.has(n)}let Q0=n=>!Lc(n);function mA(n){n&&(Q0=e=>e.startsWith("on")?!Lc(e):n(e))}try{mA(require("@emotion/is-prop-valid").default)}catch{}function gA(n,e,t){const i={};for(const o in n)o==="values"&&typeof n.values=="object"||(Q0(o)||t===!0&&Lc(o)||!e&&!Lc(o)||n.draggable&&o.startsWith("onDrag"))&&(i[o]=n[o]);return i}function iv(n,e,t){return typeof n=="string"?n:we.transform(e+t*n)}function yA(n,e,t){const i=iv(e,n.x,n.width),o=iv(t,n.y,n.height);return`${i} ${o}`}const vA={offset:"stroke-dashoffset",array:"stroke-dasharray"},_A={offset:"strokeDashoffset",array:"strokeDasharray"};function wA(n,e,t=1,i=0,o=!0){n.pathLength=1;const a=o?vA:_A;n[a.offset]=we.transform(-i);const u=we.transform(e),d=we.transform(t);n[a.array]=`${u} ${d}`}function Np(n,{attrX:e,attrY:t,attrScale:i,originX:o,originY:a,pathLength:u,pathSpacing:d=1,pathOffset:f=0,...m},v,w,E){if(Vp(n,m,v,E),w){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:A,style:N,dimensions:M}=n;A.transform&&(M&&(N.transform=A.transform),delete A.transform),M&&(o!==void 0||a!==void 0||N.transform)&&(N.transformOrigin=yA(M,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(A.x=e),t!==void 0&&(A.y=t),i!==void 0&&(A.scale=i),u!==void 0&&wA(A,u,d,f,!1)}const X0=()=>({...Dp(),attrs:{}}),Op=n=>typeof n=="string"&&n.toLowerCase()==="svg";function TA(n,e,t,i){const o=ge.useMemo(()=>{const a=X0();return Np(a,e,{enableHardwareAcceleration:!1},Op(i),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};K0(a,n.style,n),o.style={...a,...o.style}}return o}function EA(n=!1){return(t,i,o,{latestValues:a},u)=>{const f=(xp(t)?TA:fA)(i,a,u,t),v={...gA(i,typeof t=="string",n),...f,ref:o},{children:w}=i,E=ge.useMemo(()=>hn(w)?w.get():w,[w]);return ge.createElement(t,{...v,children:E})}}function Y0(n,{style:e,vars:t},i,o){Object.assign(n.style,e,o&&o.getProjectionStyles(i));for(const a in t)n.style.setProperty(a,t[a])}const J0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Z0(n,e,t,i){Y0(n,e,void 0,i);for(const o in e.attrs)n.setAttribute(J0.has(o)?o:Cp(o),e.attrs[o])}function bp(n,e){const{style:t}=n,i={};for(const o in t)(hn(t[o])||e.style&&hn(e.style[o])||$0(o,n))&&(i[o]=t[o]);return i}function ew(n,e){const t=bp(n,e);for(const i in n)if(hn(n[i])||hn(e[i])){const o=Ol.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;t[o]=n[i]}return t}function Lp(n,e,t,i={},o={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,o)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,o)),e}function IA(n){const e=ge.useRef(null);return e.current===null&&(e.current=n()),e.current}const Mc=n=>Array.isArray(n),SA=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),AA=n=>Mc(n)?n[n.length-1]||0:n;function Ec(n){const e=hn(n)?n.get():n;return SA(e)?e.toValue():e}function PA({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,o,a){const u={latestValues:CA(i,o,a,n),renderState:e()};return t&&(u.mount=d=>t(i,d,u)),u}const tw=n=>(e,t)=>{const i=ge.useContext(uh),o=ge.useContext(Pp),a=()=>PA(n,e,i,o);return t?a():IA(a)};function CA(n,e,t,i){const o={},a=i(n,{});for(const E in a)o[E]=Ec(a[E]);let{initial:u,animate:d}=n;const f=dh(n),m=j0(n);e&&m&&!f&&n.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let v=t?t.initial===!1:!1;v=v||u===!1;const w=v?d:u;return w&&typeof w!="boolean"&&!hh(w)&&(Array.isArray(w)?w:[w]).forEach(A=>{const N=Lp(n,A);if(!N)return;const{transitionEnd:M,transition:F,...J}=N;for(const K in J){let H=J[K];if(Array.isArray(H)){const Q=v?H.length-1:0;H=H[Q]}H!==null&&(o[K]=H)}for(const K in M)o[K]=M[K]}),o}const ft=n=>n;class sv{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function RA(n){let e=new sv,t=new sv,i=0,o=!1,a=!1;const u=new WeakSet,d={schedule:(f,m=!1,v=!1)=>{const w=v&&o,E=w?e:t;return m&&u.add(f),E.add(f)&&w&&o&&(i=e.order.length),f},cancel:f=>{t.remove(f),u.delete(f)},process:f=>{if(o){a=!0;return}if(o=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let m=0;m<i;m++){const v=e.order[m];v(f),u.has(v)&&(d.schedule(v),n())}o=!1,a&&(a=!1,d.process(f))}};return d}const fc=["prepare","read","update","preRender","render","postRender"],kA=40;function xA(n,e){let t=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=fc.reduce((w,E)=>(w[E]=RA(()=>t=!0),w),{}),u=w=>a[w].process(o),d=()=>{const w=performance.now();t=!1,o.delta=i?1e3/60:Math.max(Math.min(w-o.timestamp,kA),1),o.timestamp=w,o.isProcessing=!0,fc.forEach(u),o.isProcessing=!1,t&&e&&(i=!1,n(d))},f=()=>{t=!0,i=!0,o.isProcessing||n(d)};return{schedule:fc.reduce((w,E)=>{const A=a[E];return w[E]=(N,M=!1,F=!1)=>(t||f(),A.schedule(N,M,F)),w},{}),cancel:w=>fc.forEach(E=>a[E].cancel(w)),state:o,steps:a}}const{schedule:et,cancel:zr,state:Wt,steps:mf}=xA(typeof requestAnimationFrame<"u"?requestAnimationFrame:ft,!0),VA={useVisualState:tw({scrapeMotionValuesFromProps:ew,createRenderState:X0,onMount:(n,e,{renderState:t,latestValues:i})=>{et.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),et.render(()=>{Np(t,i,{enableHardwareAcceleration:!1},Op(e.tagName),n.transformTemplate),Z0(e,t)})}})},DA={useVisualState:tw({scrapeMotionValuesFromProps:bp,createRenderState:Dp})};function NA(n,{forwardMotionProps:e=!1},t,i){return{...xp(n)?VA:DA,preloadedFeatures:t,useRender:EA(e),createVisualElement:i,Component:n}}function Mr(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const nw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function ph(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const OA=n=>e=>nw(e)&&n(e,ph(e));function jr(n,e,t,i){return Mr(n,e,OA(t),i)}const bA=(n,e)=>t=>e(n(t)),Ri=(...n)=>n.reduce(bA);function rw(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const ov=rw("dragHorizontal"),av=rw("dragVertical");function iw(n){let e=!1;if(n==="y")e=av();else if(n==="x")e=ov();else{const t=ov(),i=av();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function sw(){const n=iw(!0);return n?(n(),!1):!0}class Hi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function lv(n,e){const t="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),o=(a,u)=>{if(a.pointerType==="touch"||sw())return;const d=n.getProps();n.animationState&&d.whileHover&&n.animationState.setActive("whileHover",e),d[i]&&et.update(()=>d[i](a,u))};return jr(n.current,t,o,{passive:!n.getProps()[i]})}class LA extends Hi{mount(){this.unmount=Ri(lv(this.node,!0),lv(this.node,!1))}unmount(){}}class MA extends Hi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ri(Mr(this.node.current,"focus",()=>this.onFocus()),Mr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ow=(n,e)=>e?n===e?!0:ow(n,e.parentElement):!1;function gf(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,ph(t))}class FA extends Hi{constructor(){super(...arguments),this.removeStartListeners=ft,this.removeEndListeners=ft,this.removeAccessibleListeners=ft,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),a=jr(window,"pointerup",(d,f)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:v,globalTapTarget:w}=this.node.getProps();et.update(()=>{!w&&!ow(this.node.current,d.target)?v&&v(d,f):m&&m(d,f)})},{passive:!(i.onTap||i.onPointerUp)}),u=jr(window,"pointercancel",(d,f)=>this.cancelPress(d,f),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Ri(a,u),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const u=d=>{d.key!=="Enter"||!this.checkPressEnd()||gf("up",(f,m)=>{const{onTap:v}=this.node.getProps();v&&et.update(()=>v(f,m))})};this.removeEndListeners(),this.removeEndListeners=Mr(this.node.current,"keyup",u),gf("down",(d,f)=>{this.startPress(d,f)})},t=Mr(this.node.current,"keydown",e),i=()=>{this.isPressing&&gf("cancel",(a,u)=>this.cancelPress(a,u))},o=Mr(this.node.current,"blur",i);this.removeAccessibleListeners=Ri(t,o)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&et.update(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!sw()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&et.update(()=>i(e,t))}mount(){const e=this.node.getProps(),t=jr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Mr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ri(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const jf=new WeakMap,yf=new WeakMap,UA=n=>{const e=jf.get(n.target);e&&e(n)},jA=n=>{n.forEach(UA)};function BA({root:n,...e}){const t=n||document;yf.has(t)||yf.set(t,{});const i=yf.get(t),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(jA,{root:n,...e})),i[o]}function zA(n,e,t){const i=BA(e);return jf.set(n,t),i.observe(n),()=>{jf.delete(n),i.unobserve(n)}}const $A={some:0,all:1};class HA extends Hi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:o="some",once:a}=e,u={root:t?t.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:$A[o]},d=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:v,onViewportLeave:w}=this.node.getProps(),E=m?v:w;E&&E(f)};return zA(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(WA(e,t))&&this.startObserver()}unmount(){}}function WA({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const qA={inView:{Feature:HA},tap:{Feature:FA},focus:{Feature:MA},hover:{Feature:LA}};function aw(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function GA(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function KA(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function mh(n,e,t){const i=n.getProps();return Lp(i,e,t!==void 0?t:i.custom,GA(n),KA(n))}let Mp=ft;const Rs=n=>n*1e3,Br=n=>n/1e3,QA={current:!1},lw=n=>Array.isArray(n)&&typeof n[0]=="number";function uw(n){return!!(!n||typeof n=="string"&&cw[n]||lw(n)||Array.isArray(n)&&n.every(uw))}const ll=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,cw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ll([0,.65,.55,1]),circOut:ll([.55,0,1,.45]),backIn:ll([.31,.01,.66,-.59]),backOut:ll([.33,1.53,.69,.99])};function hw(n){if(n)return lw(n)?ll(n):Array.isArray(n)?n.map(hw):cw[n]}function XA(n,e,t,{delay:i=0,duration:o,repeat:a=0,repeatType:u="loop",ease:d,times:f}={}){const m={[e]:t};f&&(m.offset=f);const v=hw(d);return Array.isArray(v)&&(m.easing=v),n.animate(m,{delay:i,duration:o,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}function YA(n,{repeat:e,repeatType:t="loop"}){const i=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[i]}const dw=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,JA=1e-7,ZA=12;function e1(n,e,t,i,o){let a,u,d=0;do u=e+(t-e)/2,a=dw(u,i,o)-n,a>0?t=u:e=u;while(Math.abs(a)>JA&&++d<ZA);return u}function Ml(n,e,t,i){if(n===e&&t===i)return ft;const o=a=>e1(a,0,1,n,t);return a=>a===0||a===1?a:dw(o(a),e,i)}const t1=Ml(.42,0,1,1),n1=Ml(0,0,.58,1),fw=Ml(.42,0,.58,1),r1=n=>Array.isArray(n)&&typeof n[0]!="number",pw=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,mw=n=>e=>1-n(1-e),Fp=n=>1-Math.sin(Math.acos(n)),gw=mw(Fp),i1=pw(Fp),yw=Ml(.33,1.53,.69,.99),Up=mw(yw),s1=pw(Up),o1=n=>(n*=2)<1?.5*Up(n):.5*(2-Math.pow(2,-10*(n-1))),a1={linear:ft,easeIn:t1,easeInOut:fw,easeOut:n1,circIn:Fp,circInOut:i1,circOut:gw,backIn:Up,backInOut:s1,backOut:yw,anticipate:o1},uv=n=>{if(Array.isArray(n)){Mp(n.length===4);const[e,t,i,o]=n;return Ml(e,t,i,o)}else if(typeof n=="string")return a1[n];return n},jp=(n,e)=>t=>!!(bl(t)&&lA.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),vw=(n,e,t)=>i=>{if(!bl(i))return i;const[o,a,u,d]=i.match(fh);return{[n]:parseFloat(o),[e]:parseFloat(a),[t]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},l1=n=>bi(0,255,n),vf={...Fs,transform:n=>Math.round(l1(n))},Ps={test:jp("rgb","red"),parse:vw("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+vf.transform(n)+", "+vf.transform(e)+", "+vf.transform(t)+", "+pl(fl.transform(i))+")"};function u1(n){let e="",t="",i="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const Bf={test:jp("#"),parse:u1,transform:Ps.transform},Fo={test:jp("hsl","hue"),parse:vw("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+dr.transform(pl(e))+", "+dr.transform(pl(t))+", "+pl(fl.transform(i))+")"},Zt={test:n=>Ps.test(n)||Bf.test(n)||Fo.test(n),parse:n=>Ps.test(n)?Ps.parse(n):Fo.test(n)?Fo.parse(n):Bf.parse(n),transform:n=>bl(n)?n:n.hasOwnProperty("red")?Ps.transform(n):Fo.transform(n)},ot=(n,e,t)=>-t*n+t*e+n;function _f(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function c1({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let o=0,a=0,u=0;if(!e)o=a=u=t;else{const d=t<.5?t*(1+e):t+e-t*e,f=2*t-d;o=_f(f,d,n+1/3),a=_f(f,d,n),u=_f(f,d,n-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:i}}const wf=(n,e,t)=>{const i=n*n;return Math.sqrt(Math.max(0,t*(e*e-i)+i))},h1=[Bf,Ps,Fo],d1=n=>h1.find(e=>e.test(n));function cv(n){const e=d1(n);let t=e.parse(n);return e===Fo&&(t=c1(t)),t}const _w=(n,e)=>{const t=cv(n),i=cv(e),o={...t};return a=>(o.red=wf(t.red,i.red,a),o.green=wf(t.green,i.green,a),o.blue=wf(t.blue,i.blue,a),o.alpha=ot(t.alpha,i.alpha,a),Ps.transform(o))};function f1(n){var e,t;return isNaN(n)&&bl(n)&&(((e=n.match(fh))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(q0))===null||t===void 0?void 0:t.length)||0)>0}const ww={regex:oA,countKey:"Vars",token:"${v}",parse:ft},Tw={regex:q0,countKey:"Colors",token:"${c}",parse:Zt.parse},Ew={regex:fh,countKey:"Numbers",token:"${n}",parse:Fs.parse};function Tf(n,{regex:e,countKey:t,token:i,parse:o}){const a=n.tokenised.match(e);a&&(n["num"+t]=a.length,n.tokenised=n.tokenised.replace(e,i),n.values.push(...a.map(o)))}function Fc(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&Tf(t,ww),Tf(t,Tw),Tf(t,Ew),t}function Iw(n){return Fc(n).values}function Sw(n){const{values:e,numColors:t,numVars:i,tokenised:o}=Fc(n),a=e.length;return u=>{let d=o;for(let f=0;f<a;f++)f<i?d=d.replace(ww.token,u[f]):f<i+t?d=d.replace(Tw.token,Zt.transform(u[f])):d=d.replace(Ew.token,pl(u[f]));return d}}const p1=n=>typeof n=="number"?0:n;function m1(n){const e=Iw(n);return Sw(n)(e.map(p1))}const Li={test:f1,parse:Iw,createTransformer:Sw,getAnimatableNone:m1},Aw=(n,e)=>t=>`${t>0?e:n}`;function Pw(n,e){return typeof n=="number"?t=>ot(n,e,t):Zt.test(n)?_w(n,e):n.startsWith("var(")?Aw(n,e):Rw(n,e)}const Cw=(n,e)=>{const t=[...n],i=t.length,o=n.map((a,u)=>Pw(a,e[u]));return a=>{for(let u=0;u<i;u++)t[u]=o[u](a);return t}},g1=(n,e)=>{const t={...n,...e},i={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(i[o]=Pw(n[o],e[o]));return o=>{for(const a in i)t[a]=i[a](o);return t}},Rw=(n,e)=>{const t=Li.createTransformer(e),i=Fc(n),o=Fc(e);return i.numVars===o.numVars&&i.numColors===o.numColors&&i.numNumbers>=o.numNumbers?Ri(Cw(i.values,o.values),t):Aw(n,e)},Al=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},hv=(n,e)=>t=>ot(n,e,t);function y1(n){return typeof n=="number"?hv:typeof n=="string"?Zt.test(n)?_w:Rw:Array.isArray(n)?Cw:typeof n=="object"?g1:hv}function v1(n,e,t){const i=[],o=t||y1(n[0]),a=n.length-1;for(let u=0;u<a;u++){let d=o(n[u],n[u+1]);if(e){const f=Array.isArray(e)?e[u]||ft:e;d=Ri(f,d)}i.push(d)}return i}function kw(n,e,{clamp:t=!0,ease:i,mixer:o}={}){const a=n.length;if(Mp(a===e.length),a===1)return()=>e[0];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=v1(e,i,o),d=u.length,f=m=>{let v=0;if(d>1)for(;v<n.length-2&&!(m<n[v+1]);v++);const w=Al(n[v],n[v+1],m);return u[v](w)};return t?m=>f(bi(n[0],n[a-1],m)):f}function _1(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const o=Al(0,e,i);n.push(ot(t,1,o))}}function w1(n){const e=[0];return _1(e,n.length-1),e}function T1(n,e){return n.map(t=>t*e)}function E1(n,e){return n.map(()=>e||fw).splice(0,n.length-1)}function Uc({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const o=r1(i)?i.map(uv):uv(i),a={done:!1,value:e[0]},u=T1(t&&t.length===e.length?t:w1(e),n),d=kw(u,e,{ease:Array.isArray(o)?o:E1(e,o)});return{calculatedDuration:n,next:f=>(a.value=d(f),a.done=f>=n,a)}}function xw(n,e){return e?n*(1e3/e):0}const I1=5;function Vw(n,e,t){const i=Math.max(e-I1,0);return xw(t-n(i),e-i)}const Ef=.001,S1=.01,A1=10,P1=.05,C1=1;function R1({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let o,a,u=1-e;u=bi(P1,C1,u),n=bi(S1,A1,Br(n)),u<1?(o=m=>{const v=m*u,w=v*n,E=v-t,A=zf(m,u),N=Math.exp(-w);return Ef-E/A*N},a=m=>{const w=m*u*n,E=w*t+t,A=Math.pow(u,2)*Math.pow(m,2)*n,N=Math.exp(-w),M=zf(Math.pow(m,2),u);return(-o(m)+Ef>0?-1:1)*((E-A)*N)/M}):(o=m=>{const v=Math.exp(-m*n),w=(m-t)*n+1;return-Ef+v*w},a=m=>{const v=Math.exp(-m*n),w=(t-m)*(n*n);return v*w});const d=5/n,f=x1(o,a,d);if(n=Rs(n),isNaN(f))return{stiffness:100,damping:10,duration:n};{const m=Math.pow(f,2)*i;return{stiffness:m,damping:u*2*Math.sqrt(i*m),duration:n}}}const k1=12;function x1(n,e,t){let i=t;for(let o=1;o<k1;o++)i=i-n(i)/e(i);return i}function zf(n,e){return n*Math.sqrt(1-e*e)}const V1=["duration","bounce"],D1=["stiffness","damping","mass"];function dv(n,e){return e.some(t=>n[t]!==void 0)}function N1(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!dv(n,D1)&&dv(n,V1)){const t=R1(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function Dw({keyframes:n,restDelta:e,restSpeed:t,...i}){const o=n[0],a=n[n.length-1],u={done:!1,value:o},{stiffness:d,damping:f,mass:m,duration:v,velocity:w,isResolvedFromDuration:E}=N1({...i,velocity:-Br(i.velocity||0)}),A=w||0,N=f/(2*Math.sqrt(d*m)),M=a-o,F=Br(Math.sqrt(d/m)),J=Math.abs(M)<5;t||(t=J?.01:2),e||(e=J?.005:.5);let K;if(N<1){const H=zf(F,N);K=Q=>{const re=Math.exp(-N*F*Q);return a-re*((A+N*F*M)/H*Math.sin(H*Q)+M*Math.cos(H*Q))}}else if(N===1)K=H=>a-Math.exp(-F*H)*(M+(A+F*M)*H);else{const H=F*Math.sqrt(N*N-1);K=Q=>{const re=Math.exp(-N*F*Q),ue=Math.min(H*Q,300);return a-re*((A+N*F*M)*Math.sinh(ue)+H*M*Math.cosh(ue))/H}}return{calculatedDuration:E&&v||null,next:H=>{const Q=K(H);if(E)u.done=H>=v;else{let re=A;H!==0&&(N<1?re=Vw(K,H,Q):re=0);const ue=Math.abs(re)<=t,k=Math.abs(a-Q)<=e;u.done=ue&&k}return u.value=u.done?a:Q,u}}}function fv({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:u,min:d,max:f,restDelta:m=.5,restSpeed:v}){const w=n[0],E={done:!1,value:w},A=S=>d!==void 0&&S<d||f!==void 0&&S>f,N=S=>d===void 0?f:f===void 0||Math.abs(d-S)<Math.abs(f-S)?d:f;let M=t*e;const F=w+M,J=u===void 0?F:u(F);J!==F&&(M=J-w);const K=S=>-M*Math.exp(-S/i),H=S=>J+K(S),Q=S=>{const C=K(S),x=H(S);E.done=Math.abs(C)<=m,E.value=E.done?J:x};let re,ue;const k=S=>{A(E.value)&&(re=S,ue=Dw({keyframes:[E.value,N(E.value)],velocity:Vw(H,S,E.value),damping:o,stiffness:a,restDelta:m,restSpeed:v}))};return k(0),{calculatedDuration:null,next:S=>{let C=!1;return!ue&&re===void 0&&(C=!0,Q(S),k(S)),re!==void 0&&S>re?ue.next(S-re):(!C&&Q(S),E)}}}const O1=n=>{const e=({timestamp:t})=>n(t);return{start:()=>et.update(e,!0),stop:()=>zr(e),now:()=>Wt.isProcessing?Wt.timestamp:performance.now()}},pv=2e4;function mv(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<pv;)e+=t,i=n.next(e);return e>=pv?1/0:e}const b1={decay:fv,inertia:fv,tween:Uc,keyframes:Uc,spring:Dw};function jc({autoplay:n=!0,delay:e=0,driver:t=O1,keyframes:i,type:o="keyframes",repeat:a=0,repeatDelay:u=0,repeatType:d="loop",onPlay:f,onStop:m,onComplete:v,onUpdate:w,...E}){let A=1,N=!1,M,F;const J=()=>{F=new Promise(D=>{M=D})};J();let K;const H=b1[o]||Uc;let Q;H!==Uc&&typeof i[0]!="number"&&(Q=kw([0,100],i,{clamp:!1}),i=[0,100]);const re=H({...E,keyframes:i});let ue;d==="mirror"&&(ue=H({...E,keyframes:[...i].reverse(),velocity:-(E.velocity||0)}));let k="idle",S=null,C=null,x=null;re.calculatedDuration===null&&a&&(re.calculatedDuration=mv(re));const{calculatedDuration:O}=re;let L=1/0,P=1/0;O!==null&&(L=O+u,P=L*(a+1)-u);let Pe=0;const je=D=>{if(C===null)return;A>0&&(C=Math.min(C,D)),A<0&&(C=Math.min(D-P/A,C)),S!==null?Pe=S:Pe=Math.round(D-C)*A;const W=Pe-e*(A>=0?1:-1),me=A>=0?W<0:W>P;Pe=Math.max(W,0),k==="finished"&&S===null&&(Pe=P);let Ce=Pe,Re=re;if(a){const He=Math.min(Pe,P)/L;let rt=Math.floor(He),Dt=He%1;!Dt&&He>=1&&(Dt=1),Dt===1&&rt--,rt=Math.min(rt,a+1),!!(rt%2)&&(d==="reverse"?(Dt=1-Dt,u&&(Dt-=u/L)):d==="mirror"&&(Re=ue)),Ce=bi(0,1,Dt)*L}const ke=me?{done:!1,value:i[0]}:Re.next(Ce);Q&&(ke.value=Q(ke.value));let{done:Me}=ke;!me&&O!==null&&(Me=A>=0?Pe>=P:Pe<=0);const Be=S===null&&(k==="finished"||k==="running"&&Me);return w&&w(ke.value),Be&&te(),ke},Ne=()=>{K&&K.stop(),K=void 0},De=()=>{k="idle",Ne(),M(),J(),C=x=null},te=()=>{k="finished",v&&v(),Ne(),M()},fe=()=>{if(N)return;K||(K=t(je));const D=K.now();f&&f(),S!==null?C=D-S:(!C||k==="finished")&&(C=D),k==="finished"&&J(),x=C,S=null,k="running",K.start()};n&&fe();const ie={then(D,W){return F.then(D,W)},get time(){return Br(Pe)},set time(D){D=Rs(D),Pe=D,S!==null||!K||A===0?S=D:C=K.now()-D/A},get duration(){const D=re.calculatedDuration===null?mv(re):re.calculatedDuration;return Br(D)},get speed(){return A},set speed(D){D===A||!K||(A=D,ie.time=Br(Pe))},get state(){return k},play:fe,pause:()=>{k="paused",S=Pe},stop:()=>{N=!0,k!=="idle"&&(k="idle",m&&m(),De())},cancel:()=>{x!==null&&je(x),De()},complete:()=>{k="finished"},sample:D=>(C=0,je(D))};return ie}function L1(n){let e;return()=>(e===void 0&&(e=n()),e)}const M1=L1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),F1=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),pc=10,U1=2e4,j1=(n,e)=>e.type==="spring"||n==="backgroundColor"||!uw(e.ease);function B1(n,e,{onUpdate:t,onComplete:i,...o}){if(!(M1()&&F1.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let u=!1,d,f,m=!1;const v=()=>{f=new Promise(H=>{d=H})};v();let{keyframes:w,duration:E=300,ease:A,times:N}=o;if(j1(e,o)){const H=jc({...o,repeat:0,delay:0});let Q={done:!1,value:w[0]};const re=[];let ue=0;for(;!Q.done&&ue<U1;)Q=H.sample(ue),re.push(Q.value),ue+=pc;N=void 0,w=re,E=ue-pc,A="linear"}const M=XA(n.owner.current,e,w,{...o,duration:E,ease:A,times:N}),F=()=>{m=!1,M.cancel()},J=()=>{m=!0,et.update(F),d(),v()};return M.onfinish=()=>{m||(n.set(YA(w,o)),i&&i(),J())},{then(H,Q){return f.then(H,Q)},attachTimeline(H){return M.timeline=H,M.onfinish=null,ft},get time(){return Br(M.currentTime||0)},set time(H){M.currentTime=Rs(H)},get speed(){return M.playbackRate},set speed(H){M.playbackRate=H},get duration(){return Br(E)},play:()=>{u||(M.play(),zr(F))},pause:()=>M.pause(),stop:()=>{if(u=!0,M.playState==="idle")return;const{currentTime:H}=M;if(H){const Q=jc({...o,autoplay:!1});n.setWithVelocity(Q.sample(H-pc).value,Q.sample(H).value,pc)}J()},complete:()=>{m||M.finish()},cancel:J}}function z1({keyframes:n,delay:e,onUpdate:t,onComplete:i}){const o=()=>(t&&t(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:ft,pause:ft,stop:ft,then:a=>(a(),Promise.resolve()),cancel:ft,complete:ft});return e?jc({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const $1={type:"spring",stiffness:500,damping:25,restSpeed:10},H1=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),W1={type:"keyframes",duration:.8},q1={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},G1=(n,{keyframes:e})=>e.length>2?W1:Ms.has(n)?n.startsWith("scale")?H1(e[1]):$1:q1,$f=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Li.test(e)||e==="0")&&!e.startsWith("url(")),K1=new Set(["brightness","contrast","saturate","opacity"]);function Q1(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(fh)||[];if(!i)return n;const o=t.replace(i,"");let a=K1.has(e)?1:0;return i!==t&&(a*=100),e+"("+a+o+")"}const X1=/([a-z-]*)\(.*?\)/g,Hf={...Li,getAnimatableNone:n=>{const e=n.match(X1);return e?e.map(Q1).join(" "):n}},Y1={...G0,color:Zt,backgroundColor:Zt,outlineColor:Zt,fill:Zt,stroke:Zt,borderColor:Zt,borderTopColor:Zt,borderRightColor:Zt,borderBottomColor:Zt,borderLeftColor:Zt,filter:Hf,WebkitFilter:Hf},Bp=n=>Y1[n];function Nw(n,e){let t=Bp(n);return t!==Hf&&(t=Li),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Ow=n=>/^0[^.\s]+$/.test(n);function J1(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||Ow(n)}function Z1(n,e,t,i){const o=$f(e,t);let a;Array.isArray(t)?a=[...t]:a=[null,t];const u=i.from!==void 0?i.from:n.get();let d;const f=[];for(let m=0;m<a.length;m++)a[m]===null&&(a[m]=m===0?u:a[m-1]),J1(a[m])&&f.push(m),typeof a[m]=="string"&&a[m]!=="none"&&a[m]!=="0"&&(d=a[m]);if(o&&f.length&&d)for(let m=0;m<f.length;m++){const v=f[m];a[v]=Nw(e,d)}return a}function eP({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:u,repeatDelay:d,from:f,elapsed:m,...v}){return!!Object.keys(v).length}function zp(n,e){return n[e]||n.default||n}const tP={skipAnimations:!1},$p=(n,e,t,i={})=>o=>{const a=zp(i,n)||{},u=a.delay||i.delay||0;let{elapsed:d=0}=i;d=d-Rs(u);const f=Z1(e,n,t,a),m=f[0],v=f[f.length-1],w=$f(n,m),E=$f(n,v);let A={keyframes:f,velocity:e.getVelocity(),ease:"easeOut",...a,delay:-d,onUpdate:N=>{e.set(N),a.onUpdate&&a.onUpdate(N)},onComplete:()=>{o(),a.onComplete&&a.onComplete()}};if(eP(a)||(A={...A,...G1(n,A)}),A.duration&&(A.duration=Rs(A.duration)),A.repeatDelay&&(A.repeatDelay=Rs(A.repeatDelay)),!w||!E||QA.current||a.type===!1||tP.skipAnimations)return z1(A);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const N=B1(e,n,A);if(N)return N}return jc(A)};function Bc(n){return!!(hn(n)&&n.add)}const bw=n=>/^\-?\d*\.?\d+$/.test(n);function Hp(n,e){n.indexOf(e)===-1&&n.push(e)}function Wp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class qp{constructor(){this.subscriptions=[]}add(e){return Hp(this.subscriptions,e),()=>Wp(this.subscriptions,e)}notify(e,t,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,i);else for(let a=0;a<o;a++){const u=this.subscriptions[a];u&&u(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const nP=n=>!isNaN(parseFloat(n));class rP{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,o=!0)=>{this.prev=this.current,this.current=i;const{delta:a,timestamp:u}=Wt;this.lastUpdated!==u&&(this.timeDelta=a,this.lastUpdated=u,et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=nP(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new qp);const i=this.events[e].add(t);return e==="change"?()=>{i(),et.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?xw(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Go(n,e){return new rP(n,e)}const Lw=n=>e=>e.test(n),iP={test:n=>n==="auto",parse:n=>n},Mw=[Fs,we,dr,Ti,cA,uA,iP],sl=n=>Mw.find(Lw(n)),sP=[...Mw,Zt,Li],oP=n=>sP.find(Lw(n));function aP(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Go(t))}function lP(n,e){const t=mh(n,e);let{transitionEnd:i={},transition:o={},...a}=t?n.makeTargetAnimatable(t,!1):{};a={...a,...i};for(const u in a){const d=AA(a[u]);aP(n,u,d)}}function uP(n,e,t){var i,o;const a=Object.keys(e).filter(d=>!n.hasValue(d)),u=a.length;if(u)for(let d=0;d<u;d++){const f=a[d],m=e[f];let v=null;Array.isArray(m)&&(v=m[0]),v===null&&(v=(o=(i=t[f])!==null&&i!==void 0?i:n.readValue(f))!==null&&o!==void 0?o:e[f]),v!=null&&(typeof v=="string"&&(bw(v)||Ow(v))?v=parseFloat(v):!oP(v)&&Li.test(m)&&(v=Nw(f,m)),n.addValue(f,Go(v,{owner:n})),t[f]===void 0&&(t[f]=v),v!==null&&n.setBaseTarget(f,v))}}function cP(n,e){return e?(e[n]||e.default||e).from:void 0}function hP(n,e,t){const i={};for(const o in n){const a=cP(o,e);if(a!==void 0)i[o]=a;else{const u=t.getValue(o);u&&(i[o]=u.get())}}return i}function dP({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function fP(n,e){const t=n.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}else return t!==e}function Fw(n,e,{delay:t=0,transitionOverride:i,type:o}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:u,...d}=n.makeTargetAnimatable(e);const f=n.getValue("willChange");i&&(a=i);const m=[],v=o&&n.animationState&&n.animationState.getState()[o];for(const w in d){const E=n.getValue(w),A=d[w];if(!E||A===void 0||v&&dP(v,w))continue;const N={delay:t,elapsed:0,...zp(a||{},w)};if(window.HandoffAppearAnimations){const J=n.getProps()[U0];if(J){const K=window.HandoffAppearAnimations(J,w,E,et);K!==null&&(N.elapsed=K,N.isHandoff=!0)}}let M=!N.isHandoff&&!fP(E,A);if(N.type==="spring"&&(E.getVelocity()||N.velocity)&&(M=!1),E.animation&&(M=!1),M)continue;E.start($p(w,E,A,n.shouldReduceMotion&&Ms.has(w)?{type:!1}:N));const F=E.animation;Bc(f)&&(f.add(w),F.then(()=>f.remove(w))),m.push(F)}return u&&Promise.all(m).then(()=>{u&&lP(n,u)}),m}function Wf(n,e,t={}){const i=mh(n,e,t.custom);let{transition:o=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(o=t.transitionOverride);const a=i?()=>Promise.all(Fw(n,i,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:v,staggerDirection:w}=o;return pP(n,e,m+f,v,w,t)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,m]=d==="beforeChildren"?[a,u]:[u,a];return f().then(()=>m())}else return Promise.all([a(),u(t.delay)])}function pP(n,e,t=0,i=0,o=1,a){const u=[],d=(n.variantChildren.size-1)*i,f=o===1?(m=0)=>m*i:(m=0)=>d-m*i;return Array.from(n.variantChildren).sort(mP).forEach((m,v)=>{m.notify("AnimationStart",e),u.push(Wf(m,e,{...a,delay:t+f(v)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(u)}function mP(n,e){return n.sortNodePosition(e)}function gP(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(a=>Wf(n,a,t));i=Promise.all(o)}else if(typeof e=="string")i=Wf(n,e,t);else{const o=typeof e=="function"?mh(n,e,t.custom):e;i=Promise.all(Fw(n,o,t))}return i.then(()=>n.notify("AnimationComplete",e))}const yP=[...Rp].reverse(),vP=Rp.length;function _P(n){return e=>Promise.all(e.map(({animation:t,options:i})=>gP(n,t,i)))}function wP(n){let e=_P(n);const t=EP();let i=!0;const o=(f,m)=>{const v=mh(n,m);if(v){const{transition:w,transitionEnd:E,...A}=v;f={...f,...A,...E}}return f};function a(f){e=f(n)}function u(f,m){const v=n.getProps(),w=n.getVariantContext(!0)||{},E=[],A=new Set;let N={},M=1/0;for(let J=0;J<vP;J++){const K=yP[J],H=t[K],Q=v[K]!==void 0?v[K]:w[K],re=Il(Q),ue=K===m?H.isActive:null;ue===!1&&(M=J);let k=Q===w[K]&&Q!==v[K]&&re;if(k&&i&&n.manuallyAnimateOnMount&&(k=!1),H.protectedKeys={...N},!H.isActive&&ue===null||!Q&&!H.prevProp||hh(Q)||typeof Q=="boolean")continue;let C=TP(H.prevProp,Q)||K===m&&H.isActive&&!k&&re||J>M&&re,x=!1;const O=Array.isArray(Q)?Q:[Q];let L=O.reduce(o,{});ue===!1&&(L={});const{prevResolvedValues:P={}}=H,Pe={...P,...L},je=Ne=>{C=!0,A.has(Ne)&&(x=!0,A.delete(Ne)),H.needsAnimating[Ne]=!0};for(const Ne in Pe){const De=L[Ne],te=P[Ne];if(N.hasOwnProperty(Ne))continue;let fe=!1;Mc(De)&&Mc(te)?fe=!aw(De,te):fe=De!==te,fe?De!==void 0?je(Ne):A.add(Ne):De!==void 0&&A.has(Ne)?je(Ne):H.protectedKeys[Ne]=!0}H.prevProp=Q,H.prevResolvedValues=L,H.isActive&&(N={...N,...L}),i&&n.blockInitialAnimation&&(C=!1),C&&(!k||x)&&E.push(...O.map(Ne=>({animation:Ne,options:{type:K,...f}})))}if(A.size){const J={};A.forEach(K=>{const H=n.getBaseTarget(K);H!==void 0&&(J[K]=H)}),E.push({animation:J})}let F=!!E.length;return i&&(v.initial===!1||v.initial===v.animate)&&!n.manuallyAnimateOnMount&&(F=!1),i=!1,F?e(E):Promise.resolve()}function d(f,m,v){var w;if(t[f].isActive===m)return Promise.resolve();(w=n.variantChildren)===null||w===void 0||w.forEach(A=>{var N;return(N=A.animationState)===null||N===void 0?void 0:N.setActive(f,m)}),t[f].isActive=m;const E=u(v,f);for(const A in t)t[A].protectedKeys={};return E}return{animateChanges:u,setActive:d,setAnimateFunction:a,getState:()=>t}}function TP(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!aw(e,n):!1}function Es(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function EP(){return{animate:Es(!0),whileInView:Es(),whileHover:Es(),whileTap:Es(),whileDrag:Es(),whileFocus:Es(),exit:Es()}}class IP extends Hi{constructor(e){super(e),e.animationState||(e.animationState=wP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),hh(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let SP=0;class AP extends Hi{constructor(){super(...arguments),this.id=SP++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:i}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const a=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const PP={animation:{Feature:IP},exit:{Feature:AP}},gv=(n,e)=>Math.abs(n-e);function CP(n,e){const t=gv(n.x,e.x),i=gv(n.y,e.y);return Math.sqrt(t**2+i**2)}class Uw{constructor(e,t,{transformPagePoint:i,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Sf(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,A=CP(w.offset,{x:0,y:0})>=3;if(!E&&!A)return;const{point:N}=w,{timestamp:M}=Wt;this.history.push({...N,timestamp:M});const{onStart:F,onMove:J}=this.handlers;E||(F&&F(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),J&&J(this.lastMoveEvent,w)},this.handlePointerMove=(w,E)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=If(E,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(w,E)=>{this.end();const{onEnd:A,onSessionEnd:N,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=Sf(w.type==="pointercancel"?this.lastMoveEventInfo:If(E,this.transformPagePoint),this.history);this.startEvent&&A&&A(w,F),N&&N(w,F)},!nw(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=i,this.contextWindow=o||window;const u=ph(e),d=If(u,this.transformPagePoint),{point:f}=d,{timestamp:m}=Wt;this.history=[{...f,timestamp:m}];const{onSessionStart:v}=t;v&&v(e,Sf(d,this.history)),this.removeListeners=Ri(jr(this.contextWindow,"pointermove",this.handlePointerMove),jr(this.contextWindow,"pointerup",this.handlePointerUp),jr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zr(this.updatePoint)}}function If(n,e){return e?{point:e(n.point)}:n}function yv(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Sf({point:n},e){return{point:n,delta:yv(n,jw(e)),offset:yv(n,RP(e)),velocity:kP(e,.1)}}function RP(n){return n[0]}function jw(n){return n[n.length-1]}function kP(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const o=jw(n);for(;t>=0&&(i=n[t],!(o.timestamp-i.timestamp>Rs(e)));)t--;if(!i)return{x:0,y:0};const a=Br(o.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const u={x:(o.x-i.x)/a,y:(o.y-i.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function wn(n){return n.max-n.min}function qf(n,e=0,t=.01){return Math.abs(n-e)<=t}function vv(n,e,t,i=.5){n.origin=i,n.originPoint=ot(e.min,e.max,n.origin),n.scale=wn(t)/wn(e),(qf(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=ot(t.min,t.max,n.origin)-n.originPoint,(qf(n.translate)||isNaN(n.translate))&&(n.translate=0)}function ml(n,e,t,i){vv(n.x,e.x,t.x,i?i.originX:void 0),vv(n.y,e.y,t.y,i?i.originY:void 0)}function _v(n,e,t){n.min=t.min+e.min,n.max=n.min+wn(e)}function xP(n,e,t){_v(n.x,e.x,t.x),_v(n.y,e.y,t.y)}function wv(n,e,t){n.min=e.min-t.min,n.max=n.min+wn(e)}function gl(n,e,t){wv(n.x,e.x,t.x),wv(n.y,e.y,t.y)}function VP(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?ot(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?ot(t,n,i.max):Math.min(n,t)),n}function Tv(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function DP(n,{top:e,left:t,bottom:i,right:o}){return{x:Tv(n.x,t,o),y:Tv(n.y,e,i)}}function Ev(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function NP(n,e){return{x:Ev(n.x,e.x),y:Ev(n.y,e.y)}}function OP(n,e){let t=.5;const i=wn(n),o=wn(e);return o>i?t=Al(e.min,e.max-i,n.min):i>o&&(t=Al(n.min,n.max-o,e.min)),bi(0,1,t)}function bP(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Gf=.35;function LP(n=Gf){return n===!1?n=0:n===!0&&(n=Gf),{x:Iv(n,"left","right"),y:Iv(n,"top","bottom")}}function Iv(n,e,t){return{min:Sv(n,e),max:Sv(n,t)}}function Sv(n,e){return typeof n=="number"?n:n[e]||0}const Av=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uo=()=>({x:Av(),y:Av()}),Pv=()=>({min:0,max:0}),yt=()=>({x:Pv(),y:Pv()});function Dn(n){return[n("x"),n("y")]}function Bw({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function MP({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function FP(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function Af(n){return n===void 0||n===1}function Kf({scale:n,scaleX:e,scaleY:t}){return!Af(n)||!Af(e)||!Af(t)}function Is(n){return Kf(n)||zw(n)||n.z||n.rotate||n.rotateX||n.rotateY}function zw(n){return Cv(n.x)||Cv(n.y)}function Cv(n){return n&&n!=="0%"}function zc(n,e,t){const i=n-t,o=e*i;return t+o}function Rv(n,e,t,i,o){return o!==void 0&&(n=zc(n,o,i)),zc(n,t,i)+e}function Qf(n,e=0,t=1,i,o){n.min=Rv(n.min,e,t,i,o),n.max=Rv(n.max,e,t,i,o)}function $w(n,{x:e,y:t}){Qf(n.x,e.translate,e.scale,e.originPoint),Qf(n.y,t.translate,t.scale,t.originPoint)}function UP(n,e,t,i=!1){const o=t.length;if(!o)return;e.x=e.y=1;let a,u;for(let d=0;d<o;d++){a=t[d],u=a.projectionDelta;const f=a.instance;f&&f.style&&f.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&jo(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,$w(n,u)),i&&Is(a.latestValues)&&jo(n,a.latestValues))}e.x=kv(e.x),e.y=kv(e.y)}function kv(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Ei(n,e){n.min=n.min+e,n.max=n.max+e}function xv(n,e,[t,i,o]){const a=e[o]!==void 0?e[o]:.5,u=ot(n.min,n.max,a);Qf(n,e[t],e[i],u,e.scale)}const jP=["x","scaleX","originX"],BP=["y","scaleY","originY"];function jo(n,e){xv(n.x,e,jP),xv(n.y,e,BP)}function Hw(n,e){return Bw(FP(n.getBoundingClientRect(),e))}function zP(n,e,t){const i=Hw(n,t),{scroll:o}=e;return o&&(Ei(i.x,o.offset.x),Ei(i.y,o.offset.y)),i}const Ww=({current:n})=>n?n.ownerDocument.defaultView:null,$P=new WeakMap;class HP{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ph(v,"page").point)},a=(v,w)=>{const{drag:E,dragPropagation:A,onDragStart:N}=this.getProps();if(E&&!A&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=iw(E),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dn(F=>{let J=this.getAxisMotionValue(F).get()||0;if(dr.test(J)){const{projection:K}=this.visualElement;if(K&&K.layout){const H=K.layout.layoutBox[F];H&&(J=wn(H)*(parseFloat(J)/100))}}this.originPoint[F]=J}),N&&et.update(()=>N(v,w),!1,!0);const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},u=(v,w)=>{const{dragPropagation:E,dragDirectionLock:A,onDirectionLock:N,onDrag:M}=this.getProps();if(!E&&!this.openGlobalLock)return;const{offset:F}=w;if(A&&this.currentDirection===null){this.currentDirection=WP(F),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",w.point,F),this.updateAxis("y",w.point,F),this.visualElement.render(),M&&M(v,w)},d=(v,w)=>this.stop(v,w),f=()=>Dn(v=>{var w;return this.getAnimationState(v)==="paused"&&((w=this.getAxisMotionValue(v).animation)===null||w===void 0?void 0:w.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new Uw(e,{onSessionStart:o,onStart:a,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:Ww(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&et.update(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:o}=this.getProps();if(!i||!mc(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(u=VP(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&Mo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=DP(o.layoutBox,t):this.constraints=!1,this.elastic=LP(i),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Dn(u=>{this.getAxisMotionValue(u)&&(this.constraints[u]=bP(o.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Mo(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=zP(i,o.root,this.visualElement.getTransformPagePoint());let u=NP(o.layout.layoutBox,a);if(t){const d=t(MP(u));this.hasMutatedConstraints=!!d,d&&(u=Bw(d))}return u}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:o,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},m=Dn(v=>{if(!mc(v,t,this.currentDirection))return;let w=f&&f[v]||{};u&&(w={min:0,max:0});const E=o?200:1e6,A=o?40:1e7,N={type:"inertia",velocity:i?e[v]:0,bounceStiffness:E,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...a,...w};return this.startAxisValueAnimation(v,N)});return Promise.all(m).then(d)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start($p(e,i,0,t))}stopAnimation(){Dn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Dn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),o=i[t];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Dn(t=>{const{drag:i}=this.getProps();if(!mc(t,i,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(t);if(o&&o.layout){const{min:u,max:d}=o.layout.layoutBox[t];a.set(e[t]-ot(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Mo(t)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Dn(u=>{const d=this.getAxisMotionValue(u);if(d){const f=d.get();o[u]=OP({min:f,max:f},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Dn(u=>{if(!mc(u,e,null))return;const d=this.getAxisMotionValue(u),{min:f,max:m}=this.constraints[u];d.set(ot(f,m,o[u]))})}addListeners(){if(!this.visualElement.current)return;$P.set(this.visualElement,this);const e=this.visualElement.current,t=jr(e,"pointerdown",f=>{const{drag:m,dragListener:v=!0}=this.getProps();m&&v&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();Mo(f)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),i();const u=Mr(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&(Dn(v=>{const w=this.getAxisMotionValue(v);w&&(this.originPoint[v]+=f[v].translate,w.set(w.get()+f[v].translate))}),this.visualElement.render())}));return()=>{u(),t(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:u=Gf,dragMomentum:d=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:o,dragConstraints:a,dragElastic:u,dragMomentum:d}}}function mc(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function WP(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class qP extends Hi{constructor(e){super(e),this.removeGroupControls=ft,this.removeListeners=ft,this.controls=new HP(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ft}unmount(){this.removeGroupControls(),this.removeListeners()}}const Vv=n=>(e,t)=>{n&&et.update(()=>n(e,t))};class GP extends Hi{constructor(){super(...arguments),this.removePointerDownListener=ft}onPointerDown(e){this.session=new Uw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ww(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:Vv(e),onStart:Vv(t),onMove:i,onEnd:(a,u)=>{delete this.session,o&&et.update(()=>o(a,u))}}}mount(){this.removePointerDownListener=jr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function KP(){const n=ge.useContext(Pp);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,o=ge.useId();return ge.useEffect(()=>i(o),[]),!e&&t?[!1,()=>t&&t(o)]:[!0]}const Ic={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Dv(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const ol={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(we.test(n))n=parseFloat(n);else return n;const t=Dv(n,e.target.x),i=Dv(n,e.target.y);return`${t}% ${i}%`}},QP={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,o=Li.parse(n);if(o.length>5)return i;const a=Li.createTransformer(n),u=typeof o[0]!="number"?1:0,d=t.x.scale*e.x,f=t.y.scale*e.y;o[0+u]/=d,o[1+u]/=f;const m=ot(d,f,.5);return typeof o[2+u]=="number"&&(o[2+u]/=m),typeof o[3+u]=="number"&&(o[3+u]/=m),a(o)}};class XP extends L0.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:o}=this.props,{projection:a}=e;nA(YP),a&&(t.group&&t.group.add(a),i&&i.register&&o&&i.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ic.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:o,isPresent:a}=this.props,u=i.projection;return u&&(u.isPresent=a,o||e.layoutDependency!==t||t===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||et.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function qw(n){const[e,t]=KP(),i=ge.useContext(B0);return L0.createElement(XP,{...n,layoutGroup:i,switchLayoutGroup:ge.useContext(z0),isPresent:e,safeToRemove:t})}const YP={borderRadius:{...ol,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ol,borderTopRightRadius:ol,borderBottomLeftRadius:ol,borderBottomRightRadius:ol,boxShadow:QP},Gw=["TopLeft","TopRight","BottomLeft","BottomRight"],JP=Gw.length,Nv=n=>typeof n=="string"?parseFloat(n):n,Ov=n=>typeof n=="number"||we.test(n);function ZP(n,e,t,i,o,a){o?(n.opacity=ot(0,t.opacity!==void 0?t.opacity:1,eC(i)),n.opacityExit=ot(e.opacity!==void 0?e.opacity:1,0,tC(i))):a&&(n.opacity=ot(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let u=0;u<JP;u++){const d=`border${Gw[u]}Radius`;let f=bv(e,d),m=bv(t,d);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||Ov(f)===Ov(m)?(n[d]=Math.max(ot(Nv(f),Nv(m),i),0),(dr.test(m)||dr.test(f))&&(n[d]+="%")):n[d]=m}(e.rotate||t.rotate)&&(n.rotate=ot(e.rotate||0,t.rotate||0,i))}function bv(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const eC=Kw(0,.5,gw),tC=Kw(.5,.95,ft);function Kw(n,e,t){return i=>i<n?0:i>e?1:t(Al(n,e,i))}function Lv(n,e){n.min=e.min,n.max=e.max}function Vn(n,e){Lv(n.x,e.x),Lv(n.y,e.y)}function Mv(n,e,t,i,o){return n-=e,n=zc(n,1/t,i),o!==void 0&&(n=zc(n,1/o,i)),n}function nC(n,e=0,t=1,i=.5,o,a=n,u=n){if(dr.test(e)&&(e=parseFloat(e),e=ot(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=ot(a.min,a.max,i);n===a&&(d-=e),n.min=Mv(n.min,e,t,d,o),n.max=Mv(n.max,e,t,d,o)}function Fv(n,e,[t,i,o],a,u){nC(n,e[t],e[i],e[o],e.scale,a,u)}const rC=["x","scaleX","originX"],iC=["y","scaleY","originY"];function Uv(n,e,t,i){Fv(n.x,e,rC,t?t.x:void 0,i?i.x:void 0),Fv(n.y,e,iC,t?t.y:void 0,i?i.y:void 0)}function jv(n){return n.translate===0&&n.scale===1}function Qw(n){return jv(n.x)&&jv(n.y)}function sC(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function Xw(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function Bv(n){return wn(n.x)/wn(n.y)}class oC{constructor(){this.members=[]}add(e){Hp(this.members,e),e.scheduleRender()}remove(e){if(Wp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let i;for(let o=t;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function zv(n,e,t){let i="";const o=n.x.translate/e.x,a=n.y.translate/e.y;if((o||a)&&(i=`translate3d(${o}px, ${a}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:f,rotateX:m,rotateY:v}=t;f&&(i+=`rotate(${f}deg) `),m&&(i+=`rotateX(${m}deg) `),v&&(i+=`rotateY(${v}deg) `)}const u=n.x.scale*e.x,d=n.y.scale*e.y;return(u!==1||d!==1)&&(i+=`scale(${u}, ${d})`),i||"none"}const aC=(n,e)=>n.depth-e.depth;class lC{constructor(){this.children=[],this.isDirty=!1}add(e){Hp(this.children,e),this.isDirty=!0}remove(e){Wp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(aC),this.isDirty=!1,this.children.forEach(e)}}function uC(n,e){const t=performance.now(),i=({timestamp:o})=>{const a=o-t;a>=e&&(zr(i),n(a-e))};return et.read(i,!0),()=>zr(i)}function cC(n){window.MotionDebug&&window.MotionDebug.record(n)}function hC(n){return n instanceof SVGElement&&n.tagName!=="svg"}function dC(n,e,t){const i=hn(n)?n:Go(n);return i.start($p("",i,e,t)),i.animation}const $v=["","X","Y","Z"],fC={visibility:"hidden"},Hv=1e3;let pC=0;const Ss={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Yw({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(u={},d=e?.()){this.id=pC++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ss.totalNodes=Ss.resolvedTargetDeltas=Ss.recalculatedProjection=0,this.nodes.forEach(yC),this.nodes.forEach(EC),this.nodes.forEach(IC),this.nodes.forEach(vC),cC(Ss)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new lC)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new qp),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const f=this.eventHandlers.get(u);f&&f.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=hC(u),this.instance=u;const{layoutId:f,layout:m,visualElement:v}=this.options;if(v&&!v.current&&v.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(m||f)&&(this.isLayoutDirty=!0),n){let w;const E=()=>this.root.updateBlockedByResize=!1;n(u,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=uC(E,250),Ic.hasAnimatedSinceResize&&(Ic.hasAnimatedSinceResize=!1,this.nodes.forEach(qv))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&v&&(f||m)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E,hasRelativeTargetChanged:A,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||v.getDefaultTransition()||RC,{onLayoutAnimationStart:F,onLayoutAnimationComplete:J}=v.getProps(),K=!this.targetLayout||!Xw(this.targetLayout,N)||A,H=!E&&A;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||H||E&&(K||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,H);const Q={...zp(M,"layout"),onPlay:F,onComplete:J};(v.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q)}else E||qv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SC),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const w=this.path[v];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wv);return}this.isUpdating||this.nodes.forEach(wC),this.isUpdating=!1,this.nodes.forEach(TC),this.nodes.forEach(mC),this.nodes.forEach(gC),this.clearAllSnapshots();const d=performance.now();Wt.delta=bi(0,1e3/60,d-Wt.timestamp),Wt.timestamp=d,Wt.isProcessing=!0,mf.update.process(Wt),mf.preRender.process(Wt),mf.render.process(Wt),Wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(_C),this.sharedNodes.forEach(AC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d&&(this.scroll={animationId:this.root.animationId,phase:u,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform,d=this.projectionDelta&&!Qw(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,v=m!==this.prevTransformTemplateValue;u&&(d||Is(this.latestValues)||v)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return u&&(f=this.removeTransform(f)),kC(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return yt();const d=u.measureViewportBox(),{scroll:f}=this.root;return f&&(Ei(d.x,f.offset.x),Ei(d.y,f.offset.y)),d}removeElementScroll(u){const d=yt();Vn(d,u);for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:v,options:w}=m;if(m!==this.root&&v&&w.layoutScroll){if(v.isRoot){Vn(d,u);const{scroll:E}=this.root;E&&(Ei(d.x,-E.offset.x),Ei(d.y,-E.offset.y))}Ei(d.x,v.offset.x),Ei(d.y,v.offset.y)}}return d}applyTransform(u,d=!1){const f=yt();Vn(f,u);for(let m=0;m<this.path.length;m++){const v=this.path[m];!d&&v.options.layoutScroll&&v.scroll&&v!==v.root&&jo(f,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Is(v.latestValues)&&jo(f,v.latestValues)}return Is(this.latestValues)&&jo(f,this.latestValues),f}removeTransform(u){const d=yt();Vn(d,u);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!Is(m.latestValues))continue;Kf(m.latestValues)&&m.updateSnapshot();const v=yt(),w=m.measurePageBox();Vn(v,w),Uv(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,v)}return Is(this.latestValues)&&Uv(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var d;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==f;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:w,layoutId:E}=this.options;if(!(!this.layout||!(w||E))){if(this.resolvedRelativeTargetAt=Wt.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),gl(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),Vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vn(this.target,this.layout.layoutBox),$w(this.target,this.targetDelta)):Vn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),gl(this.relativeTargetOrigin,this.target,A.target),Vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ss.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Kf(this.parent.latestValues)||zw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const d=this.getLead(),f=!!this.resumingFrom||this!==d;let m=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(m=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Wt.timestamp&&(m=!1),m)return;const{layout:v,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||w))return;Vn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,A=this.treeScale.y;UP(this.layoutCorrected,this.treeScale,this.path,f),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox);const{target:N}=d;if(!N){this.projectionTransform&&(this.projectionDelta=Uo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Uo(),this.projectionDeltaWithTransform=Uo());const M=this.projectionTransform;ml(this.projectionDelta,this.layoutCorrected,N,this.latestValues),this.projectionTransform=zv(this.projectionDelta,this.treeScale),(this.projectionTransform!==M||this.treeScale.x!==E||this.treeScale.y!==A)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N)),Ss.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(u,d=!1){const f=this.snapshot,m=f?f.latestValues:{},v={...this.latestValues},w=Uo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const E=yt(),A=f?f.source:void 0,N=this.layout?this.layout.source:void 0,M=A!==N,F=this.getStack(),J=!F||F.members.length<=1,K=!!(M&&!J&&this.options.crossfade===!0&&!this.path.some(CC));this.animationProgress=0;let H;this.mixTargetDelta=Q=>{const re=Q/1e3;Gv(w.x,u.x,re),Gv(w.y,u.y,re),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gl(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),PC(this.relativeTarget,this.relativeTargetOrigin,E,re),H&&sC(this.relativeTarget,H)&&(this.isProjectionDirty=!1),H||(H=yt()),Vn(H,this.relativeTarget)),M&&(this.animationValues=v,ZP(v,m,this.latestValues,re,K,J)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=re},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{Ic.hasAnimatedSinceResize=!0,this.currentAnimation=dC(0,Hv,{...u,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:f,layout:m,latestValues:v}=u;if(!(!d||!f||!m)){if(this!==u&&this.layout&&m&&Jw(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||yt();const w=wn(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+w;const E=wn(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+E}Vn(d,f),jo(d,v),ml(this.projectionDeltaWithTransform,this.layoutCorrected,d,v)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new oC),this.sharedNodes.get(u).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:d}=this.options;return d?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:d}=this.options;return d?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:f}=u;if((f.rotate||f.rotateX||f.rotateY||f.rotateZ)&&(d=!0),!d)return;const m={};for(let v=0;v<$v.length;v++){const w="rotate"+$v[v];f[w]&&(m[w]=f[w],u.setStaticValue(w,0))}u.render();for(const v in m)u.setStaticValue(v,m[v]);u.scheduleRender()}getProjectionStyles(u){var d,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return fC;const m={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=Ec(u?.pointerEvents)||"",m.transform=v?v(this.latestValues,""):"none",m;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const M={};return this.options.layoutId&&(M.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,M.pointerEvents=Ec(u?.pointerEvents)||""),this.hasProjected&&!Is(this.latestValues)&&(M.transform=v?v({},""):"none",this.hasProjected=!1),M}const E=w.animationValues||w.latestValues;this.applyTransformsToTarget(),m.transform=zv(this.projectionDeltaWithTransform,this.treeScale,E),v&&(m.transform=v(E,m.transform));const{x:A,y:N}=this.projectionDelta;m.transformOrigin=`${A.origin*100}% ${N.origin*100}% 0`,w.animationValues?m.opacity=w===this?(f=(d=E.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:m.opacity=w===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const M in bc){if(E[M]===void 0)continue;const{correct:F,applyTo:J}=bc[M],K=m.transform==="none"?E[M]:F(E[M],w);if(J){const H=J.length;for(let Q=0;Q<H;Q++)m[J[Q]]=K}else m[M]=K}return this.options.layoutId&&(m.pointerEvents=w===this?Ec(u?.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(Wv),this.root.sharedNodes.clear()}}}function mC(n){n.updateLayout()}function gC(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=n.layout,{animationType:a}=n.options,u=t.source!==n.layout.source;a==="size"?Dn(w=>{const E=u?t.measuredBox[w]:t.layoutBox[w],A=wn(E);E.min=i[w].min,E.max=E.min+A}):Jw(a,t.layoutBox,i)&&Dn(w=>{const E=u?t.measuredBox[w]:t.layoutBox[w],A=wn(i[w]);E.max=E.min+A,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[w].max=n.relativeTarget[w].min+A)});const d=Uo();ml(d,i,t.layoutBox);const f=Uo();u?ml(f,n.applyTransform(o,!0),t.measuredBox):ml(f,i,t.layoutBox);const m=!Qw(d);let v=!1;if(!n.resumeFrom){const w=n.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:E,layout:A}=w;if(E&&A){const N=yt();gl(N,t.layoutBox,E.layoutBox);const M=yt();gl(M,i,A.layoutBox),Xw(N,M)||(v=!0),w.options.layoutRoot&&(n.relativeTarget=M,n.relativeTargetOrigin=N,n.relativeParent=w)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:f,layoutDelta:d,hasLayoutChanged:m,hasRelativeTargetChanged:v})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function yC(n){Ss.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function vC(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function _C(n){n.clearSnapshot()}function Wv(n){n.clearMeasurements()}function wC(n){n.isLayoutDirty=!1}function TC(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function qv(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function EC(n){n.resolveTargetDelta()}function IC(n){n.calcProjection()}function SC(n){n.resetRotation()}function AC(n){n.removeLeadSnapshot()}function Gv(n,e,t){n.translate=ot(e.translate,0,t),n.scale=ot(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Kv(n,e,t,i){n.min=ot(e.min,t.min,i),n.max=ot(e.max,t.max,i)}function PC(n,e,t,i){Kv(n.x,e.x,t.x,i),Kv(n.y,e.y,t.y,i)}function CC(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const RC={duration:.45,ease:[.4,0,.1,1]},Qv=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),Xv=Qv("applewebkit/")&&!Qv("chrome/")?Math.round:ft;function Yv(n){n.min=Xv(n.min),n.max=Xv(n.max)}function kC(n){Yv(n.x),Yv(n.y)}function Jw(n,e,t){return n==="position"||n==="preserve-aspect"&&!qf(Bv(e),Bv(t),.2)}const xC=Yw({attachResizeListener:(n,e)=>Mr(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pf={current:void 0},Zw=Yw({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Pf.current){const n=new xC({});n.mount(window),n.setOptions({layoutScroll:!0}),Pf.current=n}return Pf.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),VC={pan:{Feature:GP},drag:{Feature:qP,ProjectionNode:Zw,MeasureLayout:qw}},DC=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function NC(n){const e=DC.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]}function Xf(n,e,t=1){const[i,o]=NC(n);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const u=a.trim();return bw(u)?parseFloat(u):u}else return Uf(o)?Xf(o,e,t+1):o}function OC(n,{...e},t){const i=n.current;if(!(i instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(o=>{const a=o.get();if(!Uf(a))return;const u=Xf(a,i);u&&o.set(u)});for(const o in e){const a=e[o];if(!Uf(a))continue;const u=Xf(a,i);u&&(e[o]=u,t||(t={}),t[o]===void 0&&(t[o]=a))}return{target:e,transitionEnd:t}}const bC=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),eT=n=>bC.has(n),LC=n=>Object.keys(n).some(eT),Jv=n=>n===Fs||n===we,Zv=(n,e)=>parseFloat(n.split(", ")[e]),e_=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/);if(o)return Zv(o[1],e);{const a=i.match(/^matrix\((.+)\)$/);return a?Zv(a[1],n):0}},MC=new Set(["x","y","z"]),FC=Ol.filter(n=>!MC.has(n));function UC(n){const e=[];return FC.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Ko={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:e_(4,13),y:e_(5,14)};Ko.translateX=Ko.x;Ko.translateY=Ko.y;const jC=(n,e,t)=>{const i=e.measureViewportBox(),o=e.current,a=getComputedStyle(o),{display:u}=a,d={};u==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(m=>{d[m]=Ko[m](i,a)}),e.render();const f=e.measureViewportBox();return t.forEach(m=>{const v=e.getValue(m);v&&v.jump(d[m]),n[m]=Ko[m](f,a)}),n},BC=(n,e,t={},i={})=>{e={...e},i={...i};const o=Object.keys(e).filter(eT);let a=[],u=!1;const d=[];if(o.forEach(f=>{const m=n.getValue(f);if(!n.hasValue(f))return;let v=t[f],w=sl(v);const E=e[f];let A;if(Mc(E)){const N=E.length,M=E[0]===null?1:0;v=E[M],w=sl(v);for(let F=M;F<N&&E[F]!==null;F++)A?Mp(sl(E[F])===A):A=sl(E[F])}else A=sl(E);if(w!==A)if(Jv(w)&&Jv(A)){const N=m.get();typeof N=="string"&&m.set(parseFloat(N)),typeof E=="string"?e[f]=parseFloat(E):Array.isArray(E)&&A===we&&(e[f]=E.map(parseFloat))}else w?.transform&&A?.transform&&(v===0||E===0)?v===0?m.set(A.transform(v)):e[f]=w.transform(E):(u||(a=UC(n),u=!0),d.push(f),i[f]=i[f]!==void 0?i[f]:e[f],m.jump(E))}),d.length){const f=d.indexOf("height")>=0?window.pageYOffset:null,m=jC(e,n,d);return a.length&&a.forEach(([v,w])=>{n.getValue(v).set(w)}),n.render(),ch&&f!==null&&window.scrollTo({top:f}),{target:m,transitionEnd:i}}else return{target:e,transitionEnd:i}};function zC(n,e,t,i){return LC(e)?BC(n,e,t,i):{target:e,transitionEnd:i}}const $C=(n,e,t,i)=>{const o=OC(n,e,i);return e=o.target,i=o.transitionEnd,zC(n,e,t,i)},Yf={current:null},tT={current:!1};function HC(){if(tT.current=!0,!!ch)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Yf.current=n.matches;n.addListener(e),e()}else Yf.current=!1}function WC(n,e,t){const{willChange:i}=e;for(const o in e){const a=e[o],u=t[o];if(hn(a))n.addValue(o,a),Bc(i)&&i.add(o);else if(hn(u))n.addValue(o,Go(a,{owner:n})),Bc(i)&&i.remove(o);else if(u!==a)if(n.hasValue(o)){const d=n.getValue(o);!d.hasAnimated&&d.set(a)}else{const d=n.getStaticValue(o);n.addValue(o,Go(d!==void 0?d:a,{owner:n}))}}for(const o in t)e[o]===void 0&&n.removeValue(o);return e}const t_=new WeakMap,nT=Object.keys(Sl),qC=nT.length,n_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],GC=kp.length;class KC{constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:o,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>et.render(this.render,!1,!0);const{latestValues:d,renderState:f}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=u,this.isControllingVariants=dh(t),this.isVariantNode=j0(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(t,{});for(const w in v){const E=v[w];d[w]!==void 0&&hn(E)&&(E.set(d[w],!1),Bc(m)&&m.add(w))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,t_.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),tT.current||HC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){t_.delete(this.current),this.projection&&this.projection.unmount(),zr(this.notifyUpdate),zr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const i=Ms.has(e),o=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&et.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),a()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,o,a){let u,d;for(let f=0;f<qC;f++){const m=nT[f],{isEnabled:v,Feature:w,ProjectionNode:E,MeasureLayout:A}=Sl[m];E&&(u=E),v(t)&&(!this.features[m]&&w&&(this.features[m]=new w(this)),A&&(d=A))}if((this.type==="html"||this.type==="svg")&&!this.projection&&u){this.projection=new u(this.latestValues,this.parent&&this.parent.projection);const{layoutId:f,layout:m,drag:v,dragConstraints:w,layoutScroll:E,layoutRoot:A}=t;this.projection.setOptions({layoutId:f,layout:m,alwaysMeasureLayout:!!v||w&&Mo(w),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:a,layoutScroll:E,layoutRoot:A})}return d}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<n_.length;i++){const o=n_[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a=e["on"+o];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=WC(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<GC;i++){const o=kp[i],a=this.props[o];(Il(a)||a===!1)&&(t[o]=a)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Go(t,{owner:this}),this.addValue(e,i)),i}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props,o=typeof i=="string"||typeof i=="object"?(t=Lp(this.props,i))===null||t===void 0?void 0:t[e]:void 0;if(i&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!hn(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new qp),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class rT extends KC{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...i},{transformValues:o},a){let u=hP(i,e||{},this);if(o&&(t&&(t=o(t)),i&&(i=o(i)),u&&(u=o(u))),a){uP(this,i,u);const d=$C(this,i,u,t);t=d.transitionEnd,i=d.target}return{transition:e,transitionEnd:t,...i}}}function QC(n){return window.getComputedStyle(n)}class XC extends rT{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Ms.has(t)){const i=Bp(t);return i&&i.default||0}else{const i=QC(e),o=(W0(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Hw(e,t)}build(e,t,i,o){Vp(e,t,i,o.transformTemplate)}scrapeMotionValuesFromProps(e,t){return bp(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,o){Y0(e,t,i,o)}}class YC extends rT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ms.has(t)){const i=Bp(t);return i&&i.default||0}return t=J0.has(t)?t:Cp(t),e.getAttribute(t)}measureInstanceViewportBox(){return yt()}scrapeMotionValuesFromProps(e,t){return ew(e,t)}build(e,t,i,o){Np(e,t,i,this.isSVGTag,o.transformTemplate)}renderInstance(e,t,i,o){Z0(e,t,i,o)}mount(e){this.isSVGTag=Op(e.tagName),super.mount(e)}}const JC=(n,e)=>xp(n)?new YC(e,{enableHardwareAcceleration:!1}):new XC(e,{enableHardwareAcceleration:!0}),ZC={layout:{ProjectionNode:Zw,MeasureLayout:qw}},eR={...PP,...qA,...VC,...ZC},tR=eA((n,e)=>NA(n,e,eR,JC));function nR({onTransfer:n,isTransferring:e,accountNumber:t,setNotif:i}){const[o,a]=ge.useState(""),[u,d]=ge.useState(""),[f,m]=ge.useState(""),[v,w]=ge.useState("P2P"),E=async()=>{if(!o||!u){i?.({type:"error",message:"Enter amount and account"});return}await n({amount:o,recipientName:f,recipientAccount:u,type:v}),a(""),d(""),m("")};return se.jsxs("div",{children:[se.jsxs("div",{className:"flex items-center justify-between",children:[se.jsxs("div",{children:[se.jsx("div",{className:"text-sm muted",children:"Account"}),se.jsx("div",{className:"font-bold",children:t||"Fetching..."})]}),se.jsxs("div",{className:"space-x-2",children:[se.jsx("button",{className:`btn ${v==="P2P"?"btn-primary":""}`,onClick:()=>w("P2P"),children:"P2P"}),se.jsx("button",{className:`btn ${v==="Bank"?"btn-primary":""}`,onClick:()=>w("Bank"),children:"Bank"})]})]}),se.jsxs("div",{className:"mt-4 grid gap-3",children:[se.jsx("input",{className:"p-3 rounded-lg bg-gray-800",placeholder:"Recipient account",value:u,onChange:A=>d(A.target.value)}),se.jsx("input",{className:"p-3 rounded-lg bg-gray-800",placeholder:"Recipient name (optional)",value:f,onChange:A=>m(A.target.value)}),se.jsx("input",{className:"p-3 rounded-lg bg-gray-800",placeholder:"Amount (NGN)",value:o,onChange:A=>a(A.target.value)}),se.jsx("div",{className:"flex justify-end",children:se.jsx("button",{className:"btn btn-primary",onClick:E,disabled:e,children:e?"Sending...":`Send ${o||"0.00"}`})})]})]})}function rR({setNotif:n}){const[e,t]=ge.useState(""),[i,o]=ge.useState([{role:"system",text:"Hello! Ask about transfers or accounts."}]),a=ge.useRef(null);ge.useEffect(()=>a.current?.scrollIntoView({behavior:"smooth"}),[i]);const u=async()=>{if(e.trim()){o(d=>[...d,{role:"user",text:e}]),t("");try{const f=await(await fetch("/api/ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e})})).json(),m=f?.raw?.text||f?.category||"AI did not respond";o(v=>[...v,{role:"assistant",text:m}])}catch(d){console.error(d),n?.({type:"error",message:"AI proxy error"})}}};return se.jsxs("div",{children:[se.jsx("h3",{className:"font-semibold",children:"AI Customer Care"}),se.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-gray-900 max-h-48 overflow-auto",children:[i.map((d,f)=>se.jsx("div",{className:`mb-2 ${d.role==="user"?"text-right":"text-left"}`,children:se.jsx("div",{className:"inline-block p-2 rounded-lg bg-gray-800",children:d.text})},f)),se.jsx("div",{ref:a})]}),se.jsxs("div",{className:"mt-3 flex gap-2",children:[se.jsx("input",{className:"flex-1 p-2 rounded-md bg-gray-800",value:e,onChange:d=>t(d.target.value),placeholder:"Ask a question..."}),se.jsx("button",{className:"btn btn-primary",onClick:u,children:"Send"})]})]})}function iR({txs:n=[]}){return!n||n.length===0?se.jsx("div",{className:"small muted p-2",children:"No transactions yet."}):se.jsx("div",{className:"space-y-3",children:n.map(e=>se.jsx("div",{className:"p-3 rounded-lg bg-gray-900",children:se.jsxs("div",{className:"flex justify-between",children:[se.jsxs("div",{children:[se.jsx("div",{className:"font-semibold",children:e.recipient}),se.jsx("div",{className:"small muted",children:e.description})]}),se.jsxs("div",{className:"text-right",children:[se.jsxs("div",{className:"font-bold text-red-400",children:["- ",(parseFloat(e.amount)||0).toLocaleString()]}),se.jsx("div",{className:"small muted",children:e.timestamp&&e.timestamp.toDate?e.timestamp.toDate().toLocaleString():"N/A"})]})]})},e.id))})}function sR({notification:n,setNotification:e}){return ge.useEffect(()=>{if(n){const t=setTimeout(()=>e(null),4500);return()=>clearTimeout(t)}},[n,e]),n?se.jsxs("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 bg-gray-800 border border-gray-700 p-3 rounded-xl shadow-lg z-50",children:[se.jsx("div",{className:"font-semibold",children:n.type}),se.jsx("div",{className:"small muted mt-1",children:n.message}),se.jsx("div",{className:"mt-2 text-right",children:se.jsx("button",{className:"text-sm",onClick:()=>e(null),children:"Close"})})]}):null}const oR=()=>{};var r_={};const iT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},aR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},sT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,f=o+2<n.length,m=f?n[o+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let E=(d&15)<<2|m>>6,A=m&63;f||(A=64,u||(E=64)),i.push(t[v],t[w],t[E],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||w==null)throw new lR;const E=a<<2|d>>4;if(i.push(E),m!==64){const A=d<<4&240|m>>2;if(i.push(A),w!==64){const N=m<<6&192|w;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uR=function(n){const e=iT(n);return sT.encodeByteArray(e,!0)},$c=function(n){return uR(n).replace(/\./g,"")},oT=function(n){try{return sT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const hR=()=>cR().__FIREBASE_DEFAULTS__,dR=()=>{if(typeof process>"u"||typeof r_>"u")return;const n=r_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&oT(n[1]);return e&&JSON.parse(e)},gh=()=>{try{return oR()||hR()||dR()||fR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aT=n=>{var e,t;return(t=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},pR=n=>{const e=aT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},lT=()=>{var n;return(n=gh())===null||n===void 0?void 0:n.config},uT=n=>{var e;return(e=gh())===null||e===void 0?void 0:e[`_${n}`]};class mR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function na(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cT(n){return(await fetch(n,{credentials:"include"})).ok}function gR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$c(JSON.stringify(t)),$c(JSON.stringify(u)),""].join(".")}const yl={};function yR(){const n={prod:[],emulator:[]};for(const e of Object.keys(yl))yl[e]?n.emulator.push(e):n.prod.push(e);return n}function vR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let i_=!1;function hT(n,e){if(typeof window>"u"||typeof document>"u"||!na(window.location.host)||yl[n]===e||yl[n]||i_)return;yl[n]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",a=yR().prod.length>0;function u(){const E=document.getElementById(i);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{i_=!0,u()},E}function v(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=vR(i),A=t("text"),N=document.getElementById(A)||document.createElement("span"),M=t("learnmore"),F=document.getElementById(M)||document.createElement("a"),J=t("preprendIcon"),K=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const H=E.element;d(H),v(F,M);const Q=m();f(K,J),H.append(K,N,F,Q),document.body.appendChild(H)}a?(N.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _R(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function wR(){var n;const e=(n=gh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ER(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function IR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SR(){const n=Kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function AR(){return!wR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PR(){try{return typeof indexedDB=="object"}catch{return!1}}function CR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}const RR="FirebaseError";class Kr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=RR,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fl.prototype.create)}}class Fl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?kR(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Kr(o,d,i)}}function kR(n,e){return n.replace(xR,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const xR=/\{\$([^}]+)}/g;function VR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Vs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(s_(a)&&s_(u)){if(!Vs(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function s_(n){return n!==null&&typeof n=="object"}function Ul(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function DR(n,e){const t=new NR(n,e);return t.subscribe.bind(t)}class NR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");OR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Cf),o.error===void 0&&(o.error=Cf),o.complete===void 0&&(o.complete=Cf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Cf(){}function Vt(n){return n&&n._delegate?n._delegate:n}class Ds{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const As="[DEFAULT]";class bR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new mR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MR(e))try{this.getOrInitializeService({instanceIdentifier:As})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=As){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=As){return this.instances.has(e)}getOptions(e=As){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:LR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=As){return this.component?this.component.multipleInstances?e:As:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LR(n){return n===As?void 0:n}function MR(n){return n.instantiationMode==="EAGER"}class FR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const UR={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},jR=Oe.INFO,BR={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},zR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=BR[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gp{constructor(e){this.name=e,this._logLevel=jR,this._logHandler=zR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const $R=(n,e)=>e.some(t=>n instanceof t);let o_,a_;function HR(){return o_||(o_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WR(){return a_||(a_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dT=new WeakMap,Jf=new WeakMap,fT=new WeakMap,Rf=new WeakMap,Kp=new WeakMap;function qR(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(ki(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&dT.set(t,n)}).catch(()=>{}),Kp.set(e,n),e}function GR(n){if(Jf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Jf.set(n,e)}let Zf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Jf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||fT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ki(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function KR(n){Zf=n(Zf)}function QR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(kf(this),e,...t);return fT.set(i,e.sort?e.sort():[e]),ki(i)}:WR().includes(n)?function(...e){return n.apply(kf(this),e),ki(dT.get(this))}:function(...e){return ki(n.apply(kf(this),e))}}function XR(n){return typeof n=="function"?QR(n):(n instanceof IDBTransaction&&GR(n),$R(n,HR())?new Proxy(n,Zf):n)}function ki(n){if(n instanceof IDBRequest)return qR(n);if(Rf.has(n))return Rf.get(n);const e=XR(n);return e!==n&&(Rf.set(n,e),Kp.set(e,n)),e}const kf=n=>Kp.get(n);function YR(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=ki(u);return i&&u.addEventListener("upgradeneeded",f=>{i(ki(u.result),f.oldVersion,f.newVersion,ki(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const JR=["get","getKey","getAll","getAllKeys","count"],ZR=["put","add","delete","clear"],xf=new Map;function l_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xf.get(e))return xf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=ZR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||JR.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&f.done]))[0]};return xf.set(e,a),a}KR(n=>({...n,get:(e,t,i)=>l_(e,t)||n.get(e,t,i),has:(e,t)=>!!l_(e,t)||n.has(e,t)}));class ek{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tk(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function tk(n){const e=n.getComponent();return e?.type==="VERSION"}const ep="@firebase/app",u_="0.13.2";const $r=new Gp("@firebase/app"),nk="@firebase/app-compat",rk="@firebase/analytics-compat",ik="@firebase/analytics",sk="@firebase/app-check-compat",ok="@firebase/app-check",ak="@firebase/auth",lk="@firebase/auth-compat",uk="@firebase/database",ck="@firebase/data-connect",hk="@firebase/database-compat",dk="@firebase/functions",fk="@firebase/functions-compat",pk="@firebase/installations",mk="@firebase/installations-compat",gk="@firebase/messaging",yk="@firebase/messaging-compat",vk="@firebase/performance",_k="@firebase/performance-compat",wk="@firebase/remote-config",Tk="@firebase/remote-config-compat",Ek="@firebase/storage",Ik="@firebase/storage-compat",Sk="@firebase/firestore",Ak="@firebase/ai",Pk="@firebase/firestore-compat",Ck="firebase",Rk="11.10.0";const tp="[DEFAULT]",kk={[ep]:"fire-core",[nk]:"fire-core-compat",[ik]:"fire-analytics",[rk]:"fire-analytics-compat",[ok]:"fire-app-check",[sk]:"fire-app-check-compat",[ak]:"fire-auth",[lk]:"fire-auth-compat",[uk]:"fire-rtdb",[ck]:"fire-data-connect",[hk]:"fire-rtdb-compat",[dk]:"fire-fn",[fk]:"fire-fn-compat",[pk]:"fire-iid",[mk]:"fire-iid-compat",[gk]:"fire-fcm",[yk]:"fire-fcm-compat",[vk]:"fire-perf",[_k]:"fire-perf-compat",[wk]:"fire-rc",[Tk]:"fire-rc-compat",[Ek]:"fire-gcs",[Ik]:"fire-gcs-compat",[Sk]:"fire-fst",[Pk]:"fire-fst-compat",[Ak]:"fire-vertex","fire-js":"fire-js",[Ck]:"fire-js-all"};const Hc=new Map,xk=new Map,np=new Map;function c_(n,e){try{n.container.addComponent(e)}catch(t){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qo(n){const e=n.name;if(np.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;np.set(e,n);for(const t of Hc.values())c_(t,n);for(const t of xk.values())c_(t,n);return!0}function Qp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hr(n){return n==null?!1:n.settings!==void 0}const Vk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Fl("app","Firebase",Vk);class Dk{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}const ra=Rk;function pT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:tp,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw xi.create("bad-app-name",{appName:String(o)});if(t||(t=lT()),!t)throw xi.create("no-options");const a=Hc.get(o);if(a){if(Vs(t,a.options)&&Vs(i,a.config))return a;throw xi.create("duplicate-app",{appName:o})}const u=new FR(o);for(const f of np.values())u.addComponent(f);const d=new Dk(t,i,u);return Hc.set(o,d),d}function mT(n=tp){const e=Hc.get(n);if(!e&&n===tp&&lT())return pT();if(!e)throw xi.create("no-app",{appName:n});return e}function Vi(n,e,t){var i;let o=(i=kk[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(d.join(" "));return}Qo(new Ds(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const Nk="firebase-heartbeat-database",Ok=1,Pl="firebase-heartbeat-store";let Vf=null;function gT(){return Vf||(Vf=YR(Nk,Ok,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pl)}catch(t){console.warn(t)}}}}).catch(n=>{throw xi.create("idb-open",{originalErrorMessage:n.message})})),Vf}async function bk(n){try{const t=(await gT()).transaction(Pl),i=await t.objectStore(Pl).get(yT(n));return await t.done,i}catch(e){if(e instanceof Kr)$r.warn(e.message);else{const t=xi.create("idb-get",{originalErrorMessage:e?.message});$r.warn(t.message)}}}async function h_(n,e){try{const i=(await gT()).transaction(Pl,"readwrite");await i.objectStore(Pl).put(e,yT(n)),await i.done}catch(t){if(t instanceof Kr)$r.warn(t.message);else{const i=xi.create("idb-set",{originalErrorMessage:t?.message});$r.warn(i.message)}}}function yT(n){return`${n.name}!${n.options.appId}`}const Lk=1024,Mk=30;class Fk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jk(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=d_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>Mk){const u=Bk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){$r.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=d_(),{heartbeatsToSend:i,unsentEntries:o}=Uk(this._heartbeatsCache.heartbeats),a=$c(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return $r.warn(t),""}}}function d_(){return new Date().toISOString().substring(0,10)}function Uk(n,e=Lk){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),f_(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),f_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class jk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PR()?CR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return h_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return h_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function f_(n){return $c(JSON.stringify({version:2,heartbeats:n})).length}function Bk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function zk(n){Qo(new Ds("platform-logger",e=>new ek(e),"PRIVATE")),Qo(new Ds("heartbeat",e=>new Fk(e),"PRIVATE")),Vi(ep,u_,n),Vi(ep,u_,"esm2017"),Vi("fire-js","")}zk("");var $k="firebase",Hk="11.10.0";Vi($k,Hk,"app");function Xp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function vT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wk=vT,_T=new Fl("auth","Firebase",vT());const Wc=new Gp("@firebase/auth");function qk(n,...e){Wc.logLevel<=Oe.WARN&&Wc.warn(`Auth (${ra}): ${n}`,...e)}function Sc(n,...e){Wc.logLevel<=Oe.ERROR&&Wc.error(`Auth (${ra}): ${n}`,...e)}function Hr(n,...e){throw Yp(n,...e)}function fr(n,...e){return Yp(n,...e)}function wT(n,e,t){const i=Object.assign(Object.assign({},Wk()),{[e]:t});return new Fl("auth","Firebase",i).create(e,{appName:n.name})}function ks(n){return wT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return _T.create(n,...e)}function Ie(n,e,...t){if(!n)throw Yp(e,...t)}function Fr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sc(e),new Error(e)}function Wr(n,e){n||Fr(e)}function rp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Gk(){return p_()==="http:"||p_()==="https:"}function p_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Kk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Gk()||ER()||"connection"in navigator)?navigator.onLine:!0}function Qk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class jl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wr(t>e,"Short delay should be less than long delay!"),this.isMobile=_R()||IR()}get(){return Kk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jp(n,e){Wr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class TT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Yk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jk=new jl(3e4,6e4);function Zp(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ia(n,e,t,i,o={}){return ET(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Ul(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return TR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&na(n.emulatorConfig.host)&&(m.credentials="include"),TT.fetch()(await IT(n,n.config.apiHost,t,d),m)})}async function ET(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},Xk),e);try{const o=new ex(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw gc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw gc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw gc(n,"user-disabled",u);const v=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw wT(n,v,m);Hr(n,v)}}catch(o){if(o instanceof Kr)throw o;Hr(n,"network-request-failed",{message:String(o)})}}async function Zk(n,e,t,i,o={}){const a=await ia(n,e,t,i,o);return"mfaPendingCredential"in a&&Hr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function IT(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Jp(n.config,o):`${n.config.apiScheme}://${o}`;return Yk.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class ex{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(fr(this.auth,"network-request-failed")),Jk.get())})}}function gc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=fr(n,e,i);return o.customData._tokenResponse=t,o}async function tx(n,e){return ia(n,"POST","/v1/accounts:delete",e)}async function qc(n,e){return ia(n,"POST","/v1/accounts:lookup",e)}function vl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nx(n,e=!1){const t=Vt(n),i=await t.getIdToken(e),o=em(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:i,authTime:vl(Df(o.auth_time)),issuedAtTime:vl(Df(o.iat)),expirationTime:vl(Df(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Df(n){return Number(n)*1e3}function em(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Sc("JWT malformed, contained fewer than 3 sections"),null;try{const o=oT(t);return o?JSON.parse(o):(Sc("Failed to decode base64 JWT payload"),null)}catch(o){return Sc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function m_(n){const e=em(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Cl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Kr&&rx(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function rx({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class ix{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ip{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vl(this.lastLoginAt),this.creationTime=vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Gc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Cl(n,qc(t,{idToken:i}));Ie(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?ST(a.providerUserInfo):[],d=ox(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!d?.length,v=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new ip(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function sx(n){const e=Vt(n);await Gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ox(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function ST(n){return n.map(e=>{var{providerId:t}=e,i=Xp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function ax(n,e){const t=await ET(n,{},async()=>{const i=Ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await IT(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:i};return n.emulatorConfig&&na(n.emulatorConfig.host)&&(f.credentials="include"),TT.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lx(n,e){return ia(n,"POST","/v2/accounts:revokeToken",Zp(n,e))}class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=m_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await ax(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new zo;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return Fr("not implemented")}}function wi(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Xp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ix(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ip(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Cl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nx(this,e)}reload(){return sx(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Gc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(ks(this.auth));const e=await this.getIdToken();return await Cl(this,tx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,f,m,v;const w=(i=t.displayName)!==null&&i!==void 0?i:void 0,E=(o=t.email)!==null&&o!==void 0?o:void 0,A=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,N=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(d=t.tenantId)!==null&&d!==void 0?d:void 0,F=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,J=(m=t.createdAt)!==null&&m!==void 0?m:void 0,K=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:H,emailVerified:Q,isAnonymous:re,providerData:ue,stsTokenManager:k}=t;Ie(H&&k,e,"internal-error");const S=zo.fromJSON(this.name,k);Ie(typeof H=="string",e,"internal-error"),wi(w,e.name),wi(E,e.name),Ie(typeof Q=="boolean",e,"internal-error"),Ie(typeof re=="boolean",e,"internal-error"),wi(A,e.name),wi(N,e.name),wi(M,e.name),wi(F,e.name),wi(J,e.name),wi(K,e.name);const C=new Qn({uid:H,auth:e,email:E,emailVerified:Q,displayName:w,isAnonymous:re,photoURL:N,phoneNumber:A,tenantId:M,stsTokenManager:S,createdAt:J,lastLoginAt:K});return ue&&Array.isArray(ue)&&(C.providerData=ue.map(x=>Object.assign({},x))),F&&(C._redirectEventId=F),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new zo;o.updateFromServerResponse(t);const a=new Qn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Gc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?ST(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,d=new zo;d.updateFromIdToken(i);const f=new Qn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ip(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(f,m),f}}const g_=new Map;function Ur(n){Wr(n instanceof Function,"Expected a class definition");let e=g_.get(n);return e?(Wr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,g_.set(n,e),e)}class AT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AT.type="NONE";const y_=AT;function Ac(n,e,t){return`firebase:${n}:${e}:${t}`}class $o{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Ac(this.userKey,o.apiKey,a),this.fullPersistenceKey=Ac("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await qc(this.auth,{idToken:e}).catch(()=>{});return t?Qn._fromGetAccountInfoResponse(this.auth,t,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new $o(Ur(y_),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||Ur(y_);const u=Ac(i,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let w;if(typeof v=="string"){const E=await qc(e,{idToken:v}).catch(()=>{});if(!E)break;w=await Qn._fromGetAccountInfoResponse(e,E,v)}else w=Qn._fromJSON(e,v);m!==a&&(d=w),a=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new $o(a,e,i):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new $o(a,e,i))}}function v_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VT(e))return"Blackberry";if(DT(e))return"Webos";if(CT(e))return"Safari";if((e.includes("chrome/")||RT(e))&&!e.includes("edge/"))return"Chrome";if(xT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function PT(n=Kt()){return/firefox\//i.test(n)}function CT(n=Kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RT(n=Kt()){return/crios\//i.test(n)}function kT(n=Kt()){return/iemobile/i.test(n)}function xT(n=Kt()){return/android/i.test(n)}function VT(n=Kt()){return/blackberry/i.test(n)}function DT(n=Kt()){return/webos/i.test(n)}function tm(n=Kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ux(n=Kt()){var e;return tm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cx(){return SR()&&document.documentMode===10}function NT(n=Kt()){return tm(n)||xT(n)||DT(n)||VT(n)||/windows phone/i.test(n)||kT(n)}function OT(n,e=[]){let t;switch(n){case"Browser":t=v_(Kt());break;case"Worker":t=`${v_(Kt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ra}/${i}`}class hx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function dx(n,e={}){return ia(n,"GET","/v2/passwordPolicy",Zp(n,e))}const fx=6;class px{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:fx,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class mx{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new __(this),this.idTokenSubscription=new __(this),this.beforeStateQueue=new hx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_T,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ur(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qc(this,{idToken:e}),i=await Qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(hr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&f?.user&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(ks(this));const t=e?Vt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dx(this),t=new px(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await lx(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ur(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[Ur(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,o);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&qk(`Error while retrieving App Check token: ${t.error}`),t?.token}}function nm(n){return Vt(n)}class __{constructor(e){this.auth=e,this.observer=null,this.addObserver=DR(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gx(n){rm=n}function yx(n){return rm.loadJS(n)}function vx(){return rm.gapiScript}function _x(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function wx(n,e){const t=Qp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Vs(a,e??{}))return o;Hr(o,"already-initialized")}return t.initialize({options:e})}function Tx(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ur);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Ex(n,e,t){const i=nm(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=bT(e),{host:u,port:d}=Ix(e),f=d===null?"":`:${d}`,m={url:`${a}//${u}${f}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Vs(m,i.config.emulator)&&Vs(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,na(u)?(cT(`${a}//${u}${f}`),hT("Auth",!0)):Sx()}function bT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ix(n){const e=bT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:w_(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:w_(u)}}}function w_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Sx(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class LT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,t){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function Ho(n,e){return Zk(n,"POST","/v1/accounts:signInWithIdp",Zp(n,e))}const Ax="http://localhost";class Ns extends LT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Xp(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new Ns(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ho(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ho(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ho(e,t)}buildRequest(){const e={requestUri:Ax,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ul(t)}return e}}class MT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Bl extends MT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ii extends Bl{constructor(){super("facebook.com")}static credential(e){return Ns._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";class Si extends Bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ns._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Si.credential(t,i)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";class Ai extends Bl{constructor(){super("github.com")}static credential(e){return Ns._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";class Pi extends Bl{constructor(){super("twitter.com")}static credential(e,t){return Ns._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Pi.credential(t,i)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Qn._fromIdTokenResponse(e,i,o),u=T_(i);return new Xo({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=T_(i);return new Xo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function T_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Kc extends Kr{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Kc(e,t,i,o)}}function FT(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(n,a,e,i):a})}async function Px(n,e,t=!1){const i=await Cl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xo._forOperation(n,"link",i)}async function Cx(n,e,t=!1){const{auth:i}=n;if(hr(i.app))return Promise.reject(ks(i));const o="reauthenticate";try{const a=await Cl(n,FT(i,o,e,n),t);Ie(a.idToken,i,"internal-error");const u=em(a.idToken);Ie(u,i,"internal-error");const{sub:d}=u;return Ie(n.uid===d,i,"user-mismatch"),Xo._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&Hr(i,"user-mismatch"),a}}async function Rx(n,e,t=!1){if(hr(n.app))return Promise.reject(ks(n));const i="signIn",o=await FT(n,i,e),a=await Xo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}function kx(n,e,t,i){return Vt(n).onIdTokenChanged(e,t,i)}function xx(n,e,t){return Vt(n).beforeAuthStateChanged(e,t)}function Vx(n,e,t,i){return Vt(n).onAuthStateChanged(e,t,i)}function Dx(n){return Vt(n).signOut()}const Qc="__sak";class UT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nx=1e3,Ox=10;class jT extends UT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);cx()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Ox):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Nx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jT.type="LOCAL";const bx=jT;class BT extends UT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BT.type="SESSION";const zT=BT;function Lx(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new yh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await Lx(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yh.receivers=[];function im(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class Mx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=im("",20);o.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(w){const E=w;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(E.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function pr(){return window}function Fx(n){pr().location.href=n}function $T(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function Ux(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jx(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Bx(){return $T()?self:null}const HT="firebaseLocalStorageDb",zx=1,Xc="firebaseLocalStorage",WT="fbase_key";class zl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vh(n,e){return n.transaction([Xc],e?"readwrite":"readonly").objectStore(Xc)}function $x(){const n=indexedDB.deleteDatabase(HT);return new zl(n).toPromise()}function sp(){const n=indexedDB.open(HT,zx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Xc,{keyPath:WT})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Xc)?e(i):(i.close(),await $x(),e(await sp()))})})}async function E_(n,e,t){const i=vh(n,!0).put({[WT]:e,value:t});return new zl(i).toPromise()}async function Hx(n,e){const t=vh(n,!1).get(e),i=await new zl(t).toPromise();return i===void 0?null:i.value}function I_(n,e){const t=vh(n,!0).delete(e);return new zl(t).toPromise()}const Wx=800,qx=3;class qT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>qx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $T()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yh._getInstance(Bx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Ux(),!this.activeServiceWorker)return;this.sender=new Mx(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sp();return await E_(e,Qc,"1"),await I_(e,Qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>E_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Hx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>I_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=vh(o,!1).getAll();return new zl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Wx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qT.type="LOCAL";const Gx=qT;new jl(3e4,6e4);function Kx(n,e){return e?Ur(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class sm extends LT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ho(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ho(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qx(n){return Rx(n.auth,new sm(n),n.bypassAuthState)}function Xx(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),Cx(t,new sm(n),n.bypassAuthState)}async function Yx(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),Px(t,new sm(n),n.bypassAuthState)}class GT{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qx;case"linkViaPopup":case"linkViaRedirect":return Yx;case"reauthViaPopup":case"reauthViaRedirect":return Xx;default:Hr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jx=new jl(2e3,1e4);class Bo extends GT{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Jx.get())};e()}}Bo.currentPopupAction=null;const Zx="pendingRedirect",Pc=new Map;class eV extends GT{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Pc.get(this.auth._key());if(!e){try{const i=await tV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Pc.set(this.auth._key(),e)}return this.bypassAuthState||Pc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tV(n,e){const t=iV(e),i=rV(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function nV(n,e){Pc.set(n._key(),e)}function rV(n){return Ur(n._redirectPersistence)}function iV(n){return Ac(Zx,n.config.apiKey,n.name)}async function sV(n,e,t=!1){if(hr(n.app))return Promise.reject(ks(n));const i=nm(n),o=Kx(i,e),u=await new eV(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const oV=600*1e3;class aV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!KT(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(fr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oV&&this.cachedEventUids.clear(),this.cachedEventUids.has(S_(e))}saveEventToCache(e){this.cachedEventUids.add(S_(e)),this.lastProcessedEventTime=Date.now()}}function S_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function KT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function lV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KT(n);default:return!1}}async function uV(n,e={}){return ia(n,"GET","/v1/projects",e)}const cV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hV=/^https?/;async function dV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await uV(n);for(const t of e)try{if(fV(t))return}catch{}Hr(n,"unauthorized-domain")}function fV(n){const e=rp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!hV.test(t))return!1;if(cV.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const pV=new jl(3e4,6e4);function A_(){const n=pr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mV(n){return new Promise((e,t)=>{var i,o,a;function u(){A_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A_(),t(fr(n,"network-request-failed"))},timeout:pV.get()})}if(!((o=(i=pr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=pr().gapi)===null||a===void 0)&&a.load)u();else{const d=_x("iframefcb");return pr()[d]=()=>{gapi.load?u():t(fr(n,"network-request-failed"))},yx(`${vx()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Cc=null,e})}let Cc=null;function gV(n){return Cc=Cc||mV(n),Cc}const yV=new jl(5e3,15e3),vV="__/auth/iframe",_V="emulator/auth/iframe",wV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EV(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Jp(e,_V):`https://${n.config.authDomain}/${vV}`,i={apiKey:e.apiKey,appName:n.name,v:ra},o=TV.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Ul(i).slice(1)}`}async function IV(n){const e=await gV(n),t=pr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:EV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wV,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=fr(n,"network-request-failed"),d=pr().setTimeout(()=>{a(u)},yV.get());function f(){pr().clearTimeout(d),o(i)}i.ping(f).then(f,()=>{a(u)})}))}const SV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AV=500,PV=600,CV="_blank",RV="http://localhost";class P_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kV(n,e,t,i=AV,o=PV){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},SV),{width:i.toString(),height:o.toString(),top:a,left:u}),m=Kt().toLowerCase();t&&(d=RT(m)?CV:t),PT(m)&&(e=e||RV,f.scrollbars="yes");const v=Object.entries(f).reduce((E,[A,N])=>`${E}${A}=${N},`,"");if(ux(m)&&d!=="_self")return xV(e||"",d),new P_(null);const w=window.open(e||"",d,v);Ie(w,n,"popup-blocked");try{w.focus()}catch{}return new P_(w)}function xV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const VV="__/auth/handler",DV="emulator/auth/handler",NV=encodeURIComponent("fac");async function C_(n,e,t,i,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ra,eventId:o};if(e instanceof MT){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",VR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof Bl){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),m=f?`#${NV}=${encodeURIComponent(f)}`:"";return`${OV(n)}?${Ul(d).slice(1)}${m}`}function OV({config:n}){return n.emulator?Jp(n,DV):`https://${n.authDomain}/${VV}`}const Nf="webStorageSupport";class bV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zT,this._completeRedirectFn=sV,this._overrideRedirectResult=nV}async _openPopup(e,t,i,o){var a;Wr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await C_(e,t,i,rp(),o);return kV(e,u,im())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await C_(e,t,i,rp(),o);return Fx(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Wr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await IV(e),i=new aV(e);return t.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nf,{type:Nf},o=>{var a;const u=(a=o?.[0])===null||a===void 0?void 0:a[Nf];u!==void 0&&t(!!u),Hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NT()||CT()||tm()}}const LV=bV;var R_="@firebase/auth",k_="1.10.8";class MV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function FV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UV(n){Qo(new Ds("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OT(n)},m=new mx(i,o,a,f);return Tx(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Qo(new Ds("auth-internal",e=>{const t=nm(e.getProvider("auth").getImmediate());return(i=>new MV(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(R_,k_,FV(n)),Vi(R_,k_,"esm2017")}const jV=300,BV=uT("authIdTokenMaxAge")||jV;let x_=null;const zV=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>BV)return;const o=t?.token;x_!==o&&(x_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $V(n=mT()){const e=Qp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=wx(n,{popupRedirectResolver:LV,persistence:[Gx,bx,zT]}),i=uT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=zV(a.toString());xx(t,u,()=>u(t.currentUser)),kx(t,d=>u(d))}}const o=aT("auth");return o&&Ex(t,`http://${o}`),t}function HV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}gx({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=fr("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",HV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UV("Browser");var V_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Di,QT;(function(){var n;function e(k,S){function C(){}C.prototype=S.prototype,k.D=S.prototype,k.prototype=new C,k.prototype.constructor=k,k.C=function(x,O,L){for(var P=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)P[Pe-2]=arguments[Pe];return S.prototype[O].apply(x,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,S,C){C||(C=0);var x=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)x[O]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(O=0;16>O;++O)x[O]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=k.g[0],C=k.g[1],O=k.g[2];var L=k.g[3],P=S+(L^C&(O^L))+x[0]+3614090360&4294967295;S=C+(P<<7&4294967295|P>>>25),P=L+(O^S&(C^O))+x[1]+3905402710&4294967295,L=S+(P<<12&4294967295|P>>>20),P=O+(C^L&(S^C))+x[2]+606105819&4294967295,O=L+(P<<17&4294967295|P>>>15),P=C+(S^O&(L^S))+x[3]+3250441966&4294967295,C=O+(P<<22&4294967295|P>>>10),P=S+(L^C&(O^L))+x[4]+4118548399&4294967295,S=C+(P<<7&4294967295|P>>>25),P=L+(O^S&(C^O))+x[5]+1200080426&4294967295,L=S+(P<<12&4294967295|P>>>20),P=O+(C^L&(S^C))+x[6]+2821735955&4294967295,O=L+(P<<17&4294967295|P>>>15),P=C+(S^O&(L^S))+x[7]+4249261313&4294967295,C=O+(P<<22&4294967295|P>>>10),P=S+(L^C&(O^L))+x[8]+1770035416&4294967295,S=C+(P<<7&4294967295|P>>>25),P=L+(O^S&(C^O))+x[9]+2336552879&4294967295,L=S+(P<<12&4294967295|P>>>20),P=O+(C^L&(S^C))+x[10]+4294925233&4294967295,O=L+(P<<17&4294967295|P>>>15),P=C+(S^O&(L^S))+x[11]+2304563134&4294967295,C=O+(P<<22&4294967295|P>>>10),P=S+(L^C&(O^L))+x[12]+1804603682&4294967295,S=C+(P<<7&4294967295|P>>>25),P=L+(O^S&(C^O))+x[13]+4254626195&4294967295,L=S+(P<<12&4294967295|P>>>20),P=O+(C^L&(S^C))+x[14]+2792965006&4294967295,O=L+(P<<17&4294967295|P>>>15),P=C+(S^O&(L^S))+x[15]+1236535329&4294967295,C=O+(P<<22&4294967295|P>>>10),P=S+(O^L&(C^O))+x[1]+4129170786&4294967295,S=C+(P<<5&4294967295|P>>>27),P=L+(C^O&(S^C))+x[6]+3225465664&4294967295,L=S+(P<<9&4294967295|P>>>23),P=O+(S^C&(L^S))+x[11]+643717713&4294967295,O=L+(P<<14&4294967295|P>>>18),P=C+(L^S&(O^L))+x[0]+3921069994&4294967295,C=O+(P<<20&4294967295|P>>>12),P=S+(O^L&(C^O))+x[5]+3593408605&4294967295,S=C+(P<<5&4294967295|P>>>27),P=L+(C^O&(S^C))+x[10]+38016083&4294967295,L=S+(P<<9&4294967295|P>>>23),P=O+(S^C&(L^S))+x[15]+3634488961&4294967295,O=L+(P<<14&4294967295|P>>>18),P=C+(L^S&(O^L))+x[4]+3889429448&4294967295,C=O+(P<<20&4294967295|P>>>12),P=S+(O^L&(C^O))+x[9]+568446438&4294967295,S=C+(P<<5&4294967295|P>>>27),P=L+(C^O&(S^C))+x[14]+3275163606&4294967295,L=S+(P<<9&4294967295|P>>>23),P=O+(S^C&(L^S))+x[3]+4107603335&4294967295,O=L+(P<<14&4294967295|P>>>18),P=C+(L^S&(O^L))+x[8]+1163531501&4294967295,C=O+(P<<20&4294967295|P>>>12),P=S+(O^L&(C^O))+x[13]+2850285829&4294967295,S=C+(P<<5&4294967295|P>>>27),P=L+(C^O&(S^C))+x[2]+4243563512&4294967295,L=S+(P<<9&4294967295|P>>>23),P=O+(S^C&(L^S))+x[7]+1735328473&4294967295,O=L+(P<<14&4294967295|P>>>18),P=C+(L^S&(O^L))+x[12]+2368359562&4294967295,C=O+(P<<20&4294967295|P>>>12),P=S+(C^O^L)+x[5]+4294588738&4294967295,S=C+(P<<4&4294967295|P>>>28),P=L+(S^C^O)+x[8]+2272392833&4294967295,L=S+(P<<11&4294967295|P>>>21),P=O+(L^S^C)+x[11]+1839030562&4294967295,O=L+(P<<16&4294967295|P>>>16),P=C+(O^L^S)+x[14]+4259657740&4294967295,C=O+(P<<23&4294967295|P>>>9),P=S+(C^O^L)+x[1]+2763975236&4294967295,S=C+(P<<4&4294967295|P>>>28),P=L+(S^C^O)+x[4]+1272893353&4294967295,L=S+(P<<11&4294967295|P>>>21),P=O+(L^S^C)+x[7]+4139469664&4294967295,O=L+(P<<16&4294967295|P>>>16),P=C+(O^L^S)+x[10]+3200236656&4294967295,C=O+(P<<23&4294967295|P>>>9),P=S+(C^O^L)+x[13]+681279174&4294967295,S=C+(P<<4&4294967295|P>>>28),P=L+(S^C^O)+x[0]+3936430074&4294967295,L=S+(P<<11&4294967295|P>>>21),P=O+(L^S^C)+x[3]+3572445317&4294967295,O=L+(P<<16&4294967295|P>>>16),P=C+(O^L^S)+x[6]+76029189&4294967295,C=O+(P<<23&4294967295|P>>>9),P=S+(C^O^L)+x[9]+3654602809&4294967295,S=C+(P<<4&4294967295|P>>>28),P=L+(S^C^O)+x[12]+3873151461&4294967295,L=S+(P<<11&4294967295|P>>>21),P=O+(L^S^C)+x[15]+530742520&4294967295,O=L+(P<<16&4294967295|P>>>16),P=C+(O^L^S)+x[2]+3299628645&4294967295,C=O+(P<<23&4294967295|P>>>9),P=S+(O^(C|~L))+x[0]+4096336452&4294967295,S=C+(P<<6&4294967295|P>>>26),P=L+(C^(S|~O))+x[7]+1126891415&4294967295,L=S+(P<<10&4294967295|P>>>22),P=O+(S^(L|~C))+x[14]+2878612391&4294967295,O=L+(P<<15&4294967295|P>>>17),P=C+(L^(O|~S))+x[5]+4237533241&4294967295,C=O+(P<<21&4294967295|P>>>11),P=S+(O^(C|~L))+x[12]+1700485571&4294967295,S=C+(P<<6&4294967295|P>>>26),P=L+(C^(S|~O))+x[3]+2399980690&4294967295,L=S+(P<<10&4294967295|P>>>22),P=O+(S^(L|~C))+x[10]+4293915773&4294967295,O=L+(P<<15&4294967295|P>>>17),P=C+(L^(O|~S))+x[1]+2240044497&4294967295,C=O+(P<<21&4294967295|P>>>11),P=S+(O^(C|~L))+x[8]+1873313359&4294967295,S=C+(P<<6&4294967295|P>>>26),P=L+(C^(S|~O))+x[15]+4264355552&4294967295,L=S+(P<<10&4294967295|P>>>22),P=O+(S^(L|~C))+x[6]+2734768916&4294967295,O=L+(P<<15&4294967295|P>>>17),P=C+(L^(O|~S))+x[13]+1309151649&4294967295,C=O+(P<<21&4294967295|P>>>11),P=S+(O^(C|~L))+x[4]+4149444226&4294967295,S=C+(P<<6&4294967295|P>>>26),P=L+(C^(S|~O))+x[11]+3174756917&4294967295,L=S+(P<<10&4294967295|P>>>22),P=O+(S^(L|~C))+x[2]+718787259&4294967295,O=L+(P<<15&4294967295|P>>>17),P=C+(L^(O|~S))+x[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+L&4294967295}i.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var C=S-this.blockSize,x=this.B,O=this.h,L=0;L<S;){if(O==0)for(;L<=C;)o(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<S;)if(x[O++]=k.charCodeAt(L++),O==this.blockSize){o(this,x),O=0;break}}else for(;L<S;)if(x[O++]=k[L++],O==this.blockSize){o(this,x),O=0;break}}this.h=O,this.o+=S},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var C=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=C&255,C/=256;for(this.u(k),k=Array(16),S=C=0;4>S;++S)for(var x=0;32>x;x+=8)k[C++]=this.g[S]>>>x&255;return k};function a(k,S){var C=d;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=S(k)}function u(k,S){this.h=S;for(var C=[],x=!0,O=k.length-1;0<=O;O--){var L=k[O]|0;x&&L==S||(C[O]=L,x=!1)}this.g=C}var d={};function f(k){return-128<=k&&128>k?a(k,function(S){return new u([S|0],0>S?-1:0)}):new u([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return F(m(-k));for(var S=[],C=1,x=0;k>=C;x++)S[x]=k/C|0,C*=4294967296;return new u(S,0)}function v(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return F(v(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=m(Math.pow(S,8)),x=w,O=0;O<k.length;O+=8){var L=Math.min(8,k.length-O),P=parseInt(k.substring(O,O+L),S);8>L?(L=m(Math.pow(S,L)),x=x.j(L).add(m(P))):(x=x.j(C),x=x.add(m(P)))}return x}var w=f(0),E=f(1),A=f(16777216);n=u.prototype,n.m=function(){if(M(this))return-F(this).m();for(var k=0,S=1,C=0;C<this.g.length;C++){var x=this.i(C);k+=(0<=x?x:4294967296+x)*S,S*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(M(this))return"-"+F(this).toString(k);for(var S=m(Math.pow(k,6)),C=this,x="";;){var O=Q(C,S).g;C=J(C,O.j(S));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(k);if(C=O,N(C))return L+x;for(;6>L.length;)L="0"+L;x=L+x}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function M(k){return k.h==-1}n.l=function(k){return k=J(this,k),M(k)?-1:N(k)?0:1};function F(k){for(var S=k.g.length,C=[],x=0;x<S;x++)C[x]=~k.g[x];return new u(C,~k.h).add(E)}n.abs=function(){return M(this)?F(this):this},n.add=function(k){for(var S=Math.max(this.g.length,k.g.length),C=[],x=0,O=0;O<=S;O++){var L=x+(this.i(O)&65535)+(k.i(O)&65535),P=(L>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);x=P>>>16,L&=65535,P&=65535,C[O]=P<<16|L}return new u(C,C[C.length-1]&-2147483648?-1:0)};function J(k,S){return k.add(F(S))}n.j=function(k){if(N(this)||N(k))return w;if(M(this))return M(k)?F(this).j(F(k)):F(F(this).j(k));if(M(k))return F(this.j(F(k)));if(0>this.l(A)&&0>k.l(A))return m(this.m()*k.m());for(var S=this.g.length+k.g.length,C=[],x=0;x<2*S;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var O=0;O<k.g.length;O++){var L=this.i(x)>>>16,P=this.i(x)&65535,Pe=k.i(O)>>>16,je=k.i(O)&65535;C[2*x+2*O]+=P*je,K(C,2*x+2*O),C[2*x+2*O+1]+=L*je,K(C,2*x+2*O+1),C[2*x+2*O+1]+=P*Pe,K(C,2*x+2*O+1),C[2*x+2*O+2]+=L*Pe,K(C,2*x+2*O+2)}for(x=0;x<S;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=S;x<2*S;x++)C[x]=0;return new u(C,0)};function K(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function H(k,S){this.g=k,this.h=S}function Q(k,S){if(N(S))throw Error("division by zero");if(N(k))return new H(w,w);if(M(k))return S=Q(F(k),S),new H(F(S.g),F(S.h));if(M(S))return S=Q(k,F(S)),new H(F(S.g),S.h);if(30<k.g.length){if(M(k)||M(S))throw Error("slowDivide_ only works with positive integers.");for(var C=E,x=S;0>=x.l(k);)C=re(C),x=re(x);var O=ue(C,1),L=ue(x,1);for(x=ue(x,2),C=ue(C,2);!N(x);){var P=L.add(x);0>=P.l(k)&&(O=O.add(C),L=P),x=ue(x,1),C=ue(C,1)}return S=J(k,O.j(S)),new H(O,S)}for(O=w;0<=k.l(S);){for(C=Math.max(1,Math.floor(k.m()/S.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),L=m(C),P=L.j(S);M(P)||0<P.l(k);)C-=x,L=m(C),P=L.j(S);N(L)&&(L=E),O=O.add(L),k=J(k,P)}return new H(O,k)}n.A=function(k){return Q(this,k).h},n.and=function(k){for(var S=Math.max(this.g.length,k.g.length),C=[],x=0;x<S;x++)C[x]=this.i(x)&k.i(x);return new u(C,this.h&k.h)},n.or=function(k){for(var S=Math.max(this.g.length,k.g.length),C=[],x=0;x<S;x++)C[x]=this.i(x)|k.i(x);return new u(C,this.h|k.h)},n.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),C=[],x=0;x<S;x++)C[x]=this.i(x)^k.i(x);return new u(C,this.h^k.h)};function re(k){for(var S=k.g.length+1,C=[],x=0;x<S;x++)C[x]=k.i(x)<<1|k.i(x-1)>>>31;return new u(C,k.h)}function ue(k,S){var C=S>>5;S%=32;for(var x=k.g.length-C,O=[],L=0;L<x;L++)O[L]=0<S?k.i(L+C)>>>S|k.i(L+C+1)<<32-S:k.i(L+C);return new u(O,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,QT=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Di=u}).apply(typeof V_<"u"?V_:typeof self<"u"?self:typeof window<"u"?window:{});var yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var XT,ul,YT,Rc,op,JT,ZT,eE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yc=="object"&&yc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(c,g){if(g)e:{var _=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var U=c[I];if(!(U in _))break e;_=_[U]}c=c[c.length-1],I=_[c],g=g(I),g!=I&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,I=!1,U={next:function(){if(!I&&_<c.length){var $=_++;return{value:g($,c[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,I),c.apply(g,U)}}return function(){return c.apply(g,arguments)}}function E(c,g,_){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,E.apply(null,arguments)}function A(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function N(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,U,$){for(var ne=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ne[qe-2]=arguments[qe];return g.prototype[U].apply(I,ne)}}function M(c){const g=c.length;if(0<g){const _=Array(g);for(let I=0;I<g;I++)_[I]=c[I];return _}return[]}function F(c,g){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(f(I)){const U=c.length||0,$=I.length||0;c.length=U+$;for(let ne=0;ne<$;ne++)c[U+ne]=I[ne]}else c.push(I)}}class J{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function K(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function Q(c){return Q[" "](c),c}Q[" "]=function(){};var re=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ue(c,g,_){for(const I in c)g.call(_,c[I],I,c)}function k(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function S(c){const g={};for(const _ in c)g[_]=c[_];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,g){let _,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(_ in I)c[_]=I[_];for(let $=0;$<C.length;$++)_=C[$],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function O(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function L(c){d.setTimeout(()=>{throw c},0)}function P(){var c=fe;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Pe{constructor(){this.h=this.g=null}add(g,_){const I=je.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var je=new J(()=>new Ne,c=>c.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let De,te=!1,fe=new Pe,ie=()=>{const c=d.Promise.resolve(void 0);De=()=>{c.then(D)}};var D=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(_){L(_)}var g=je;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}te=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ce=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,g),d.removeEventListener("test",_,g)}catch{}return c})();function Re(c,g){if(me.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(re){e:{try{Q(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ke[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}N(Re,me);var ke={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Be=0;function He(c,g,_,I,U){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=U,this.key=++Be,this.da=this.fa=!1}function rt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Dt(c){this.src=c,this.g={},this.h=0}Dt.prototype.add=function(c,g,_,I,U){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var ne=Qr(c,g,I,U);return-1<ne?(g=c[ne],_||(g.fa=!1)):(g=new He(g,this.src,$,!!I,U),g.fa=_,c.push(g)),g};function Gi(c,g){var _=g.type;if(_ in c.g){var I=c.g[_],U=Array.prototype.indexOf.call(I,g,void 0),$;($=0<=U)&&Array.prototype.splice.call(I,U,1),$&&(rt(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Qr(c,g,_,I){for(var U=0;U<c.length;++U){var $=c[U];if(!$.da&&$.listener==g&&$.capture==!!_&&$.ha==I)return U}return-1}var Ki="closure_lm_"+(1e6*Math.random()|0),Bs={};function ca(c,g,_,I,U){if(Array.isArray(g)){for(var $=0;$<g.length;$++)ca(c,g[$],_,I,U);return null}return _=fa(_),c&&c[Me]?c.K(g,_,m(I)?!!I.capture:!1,U):ha(c,g,_,!1,I,U)}function ha(c,g,_,I,U,$){if(!g)throw Error("Invalid event type");var ne=m(U)?!!U.capture:!!U,qe=$s(c);if(qe||(c[Ki]=qe=new Dt(c)),_=qe.add(g,_,I,ne,$),_.proxy)return _;if(I=Xl(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)Ce||(U=ne),U===void 0&&(U=!1),c.addEventListener(g.toString(),I,U);else if(c.attachEvent)c.attachEvent(Tr(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Xl(){function c(_){return g.call(c.src,c.listener,_)}const g=da;return c}function zs(c,g,_,I,U){if(Array.isArray(g))for(var $=0;$<g.length;$++)zs(c,g[$],_,I,U);else I=m(I)?!!I.capture:!!I,_=fa(_),c&&c[Me]?(c=c.i,g=String(g).toString(),g in c.g&&($=c.g[g],_=Qr($,_,I,U),-1<_&&(rt($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete c.g[g],c.h--)))):c&&(c=$s(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Qr(g,_,I,U)),(_=-1<c?g[c]:null)&&wr(_))}function wr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Me])Gi(g.i,c);else{var _=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(_,I,c.capture):g.detachEvent?g.detachEvent(Tr(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=$s(g))?(Gi(_,c),_.h==0&&(_.src=null,g[Ki]=null)):rt(c)}}}function Tr(c){return c in Bs?Bs[c]:Bs[c]="on"+c}function da(c,g){if(c.da)c=!0;else{g=new Re(g,this);var _=c.listener,I=c.ha||c.src;c.fa&&wr(c),c=_.call(I,g)}return c}function $s(c){return c=c[Ki],c instanceof Dt?c:null}var Hs="__closure_events_fn_"+(1e9*Math.random()>>>0);function fa(c){return typeof c=="function"?c:(c[Hs]||(c[Hs]=function(g){return c.handleEvent(g)}),c[Hs])}function wt(){W.call(this),this.i=new Dt(this),this.M=this,this.F=null}N(wt,W),wt.prototype[Me]=!0,wt.prototype.removeEventListener=function(c,g,_,I){zs(this,c,g,_,I)};function Tt(c,g){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new me(g,c);else if(g instanceof me)g.target=g.target||c;else{var U=g;g=new me(I,c),x(g,U)}if(U=!0,_)for(var $=_.length-1;0<=$;$--){var ne=g.g=_[$];U=Er(ne,I,!0,g)&&U}if(ne=g.g=c,U=Er(ne,I,!0,g)&&U,U=Er(ne,I,!1,g)&&U,_)for($=0;$<_.length;$++)ne=g.g=_[$],U=Er(ne,I,!1,g)&&U}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],I=0;I<_.length;I++)rt(_[I]);delete c.g[g],c.h--}}this.F=null},wt.prototype.K=function(c,g,_,I){return this.i.add(String(c),g,!1,_,I)},wt.prototype.L=function(c,g,_,I){return this.i.add(String(c),g,!0,_,I)};function Er(c,g,_,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,$=0;$<g.length;++$){var ne=g[$];if(ne&&!ne.da&&ne.capture==_){var qe=ne.listener,Et=ne.ha||ne.src;ne.fa&&Gi(c.i,ne),U=qe.call(Et,I)!==!1&&U}}return U&&!I.defaultPrevented}function pa(c,g,_){if(typeof c=="function")_&&(c=E(c,_));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function Xr(c){c.g=pa(()=>{c.g=null,c.i&&(c.i=!1,Xr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Qi extends W{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Xr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(c){W.call(this),this.h=c,this.g={}}N(Xi,W);var ma=[];function ga(c){ue(c.g,function(g,_){this.g.hasOwnProperty(_)&&wr(g)},c),c.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),ga(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ya=d.JSON.stringify,va=d.JSON.parse,_a=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Yi(){}Yi.prototype.h=null;function Ws(c){return c.h||(c.h=c.i())}function qs(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){me.call(this,"d")}N(Zn,me);function Gs(){me.call(this,"c")}N(Gs,me);var er={},wa=null;function Ji(){return wa=wa||new wt}er.La="serverreachability";function Ta(c){me.call(this,er.La,c)}N(Ta,me);function Ir(c){const g=Ji();Tt(g,new Ta(g))}er.STAT_EVENT="statevent";function Ea(c,g){me.call(this,er.STAT_EVENT,c),this.stat=g}N(Ea,me);function ct(c){const g=Ji();Tt(g,new Ea(g,c))}er.Ma="timingevent";function Ks(c,g){me.call(this,er.Ma,c),this.size=g}N(Ks,me);function On(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function Zi(){this.g=!0}Zi.prototype.xa=function(){this.g=!1};function es(c,g,_,I,U,$){c.info(function(){if(c.g)if($)for(var ne="",qe=$.split("&"),Et=0;Et<qe.length;Et++){var Fe=qe[Et].split("=");if(1<Fe.length){var Pt=Fe[0];Fe=Fe[1];var pt=Pt.split("_");ne=2<=pt.length&&pt[1]=="type"?ne+(Pt+"="+Fe+"&"):ne+(Pt+"=redacted&")}}else ne=null;else ne=$;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+g+`
`+_+`
`+ne})}function Qs(c,g,_,I,U,$,ne){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+g+`
`+_+`
`+$+" "+ne})}function bn(c,g,_,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Mh(c,_)+(I?" "+I:"")})}function Ia(c,g){c.info(function(){return"TIMEOUT: "+g})}Zi.prototype.info=function(){};function Mh(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var U=I[1];if(Array.isArray(U)&&!(1>U.length)){var $=U[0];if($!="noop"&&$!="stop"&&$!="close")for(var ne=1;ne<U.length;ne++)U[ne]=""}}}}return ya(_)}catch{return g}}var Xs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ln;function ts(){}N(ts,Yi),ts.prototype.g=function(){return new XMLHttpRequest},ts.prototype.i=function(){return{}},Ln=new ts;function Mn(c,g,_,I){this.j=c,this.i=g,this.l=_,this.R=I||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jl}function Jl(){this.i=null,this.g="",this.h=!1}var Sa={},Ys={};function Js(c,g,_){c.L=1,c.v=ti(fn(g)),c.m=_,c.P=!0,Aa(c,null)}function Aa(c,g){c.F=Date.now(),Qe(c),c.A=fn(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),ri(_.i,"t",I),c.C=0,_=c.j.J,c.h=new Jl,c.g=gu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new Qi(E(c.Y,c,c.g),c.O)),g=c.U,_=c.g,I=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(ma[0]=U.toString()),U=ma);for(var $=0;$<U.length;$++){var ne=ca(_,U[$],I||g.handleEvent,!1,g.h||g);if(!ne)break;g.g[ne.key]=ne}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Ir(),es(c.i,c.u,c.A,c.l,c.R,c.m)}Mn.prototype.ca=function(c){c=c.target;const g=this.M;g&&tn(c)==3?g.j():this.Y(c)},Mn.prototype.Y=function(c){try{if(c==this.g)e:{const pt=tn(this.g);var g=this.g.Ba();const Sn=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Va(this.g)))){this.J||pt!=4||g==7||(g==8||0>=Sn?Ir(3):Ir(2)),ns(this);var _=this.g.Z();this.X=_;t:if(Zl(this)){var I=Va(this.g);c="";var U=I.length,$=tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),Yr(this);var ne="";break t}this.h.i=new d.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,c+=this.h.i.decode(I[g],{stream:!($&&g==U-1)});I.length=0,this.h.g+=c,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=_==200,Qs(this.i,this.u,this.A,this.l,this.R,pt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Et=this.g;if((qe=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(qe)){var Fe=qe;break t}}Fe=null}if(_=Fe)bn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pa(this,_);else{this.o=!1,this.s=3,ct(12),En(this),Yr(this);break e}}if(this.P){_=!0;let mn;for(;!this.J&&this.C<ne.length;)if(mn=Fh(this,ne),mn==Ys){pt==4&&(this.s=4,ct(14),_=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Sa){this.s=4,ct(15),bn(this.i,this.l,ne,"[Invalid Chunk]"),_=!1;break}else bn(this.i,this.l,mn,null),Pa(this,mn);if(Zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||ne.length!=0||this.h.h||(this.s=1,ct(16),_=!1),this.o=this.o&&_,!_)bn(this.i,this.l,ne,"[Invalid Chunked Response]"),En(this),Yr(this);else if(0<ne.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Na(Pt),Pt.M=!0,ct(11))}}else bn(this.i,this.l,ne,null),Pa(this,ne);pt==4&&En(this),this.o&&!this.J&&(pt==4?uo(this.j,this):(this.o=!1,Qe(this)))}else io(this.g),_==400&&0<ne.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),En(this),Yr(this)}}}catch{}finally{}};function Zl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Fh(c,g){var _=c.C,I=g.indexOf(`
`,_);return I==-1?Ys:(_=Number(g.substring(_,I)),isNaN(_)?Sa:(I+=1,I+_>g.length?Ys:(g=g.slice(I,I+_),c.C=I+_,g)))}Mn.prototype.cancel=function(){this.J=!0,En(this)};function Qe(c){c.S=Date.now()+c.I,eu(c,c.I)}function eu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=On(E(c.ba,c),g)}function ns(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Mn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ia(this.i,this.A),this.L!=2&&(Ir(),ct(17)),En(this),this.s=2,Yr(this)):eu(this,this.S-c)};function Yr(c){c.j.G==0||c.J||uo(c.j,c)}function En(c){ns(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,ga(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Pa(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Qt(_.h,c))){if(!c.K&&Qt(_.h,c)&&_.G==3){try{var I=_.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)lo(_),zn(_);else break e;ao(_),ct(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=On(E(_.Za,_),6e3));if(1>=nu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Rr(_,11)}else if((c.K||_.g==c)&&lo(_),!K(g))for(U=_.Da.g.parse(g),g=0;g<U.length;g++){let Fe=U[g];if(_.T=Fe[0],Fe=Fe[1],_.G==2)if(Fe[0]=="c"){_.K=Fe[1],_.ia=Fe[2];const Pt=Fe[3];Pt!=null&&(_.la=Pt,_.j.info("VER="+_.la));const pt=Fe[4];pt!=null&&(_.Aa=pt,_.j.info("SVER="+_.Aa));const Sn=Fe[5];Sn!=null&&typeof Sn=="number"&&0<Sn&&(I=1.5*Sn,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const mn=c.g;if(mn){const us=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(us){var $=I.h;$.g||us.indexOf("spdy")==-1&&us.indexOf("quic")==-1&&us.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ca($,$.h),$.h=null))}if(I.D){const ho=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;ho&&(I.ya=ho,Ke(I.I,I.D,ho))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var ne=c;if(I.qa=mu(I,I.J?I.ia:null,I.W),ne.K){ru(I.h,ne);var qe=ne,Et=I.L;Et&&(qe.I=Et),qe.B&&(ns(qe),Qe(qe)),I.g=ne}else ls(I);0<_.i.length&&ir(_)}else Fe[0]!="stop"&&Fe[0]!="close"||Rr(_,7);else _.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Rr(_,7):Ot(_):Fe[0]!="noop"&&_.l&&_.l.ta(Fe),_.v=0)}}Ir(4)}catch{}}var tu=class{constructor(c,g){this.g=c,this.map=g}};function rs(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function nu(c){return c.h?1:c.g?c.g.size:0}function Qt(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Ca(c,g){c.g?c.g.add(g):c.h=g}function ru(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}rs.prototype.cancel=function(){if(this.i=iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function iu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return M(c.i)}function Zs(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,I=0;I<_;I++)g.push(c[I]);return g}g=[],_=0;for(I in c)g[_++]=c[I];return g}function eo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const I in c)g[_++]=I;return g}}}function Jr(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=eo(c),I=Zs(c),U=I.length,$=0;$<U;$++)g.call(void 0,I[$],_&&_[$],c)}var is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uh(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),U=null;if(0<=I){var $=c[_].substring(0,I);U=c[_].substring(I+1)}else $=c[_];g($,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Sr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Sr){this.h=c.h,ss(this,c.j),this.o=c.o,this.g=c.g,Zr(this,c.s),this.l=c.l;var g=c.i,_=new tr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),ei(this,_),this.m=c.m}else c&&(g=String(c).match(is))?(this.h=!1,ss(this,g[1]||"",!0),this.o=Le(g[2]||""),this.g=Le(g[3]||"",!0),Zr(this,g[4]),this.l=Le(g[5]||"",!0),ei(this,g[6]||"",!0),this.m=Le(g[7]||"")):(this.h=!1,this.i=new tr(null,this.h))}Sr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ni(g,to,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ni(g,to,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ni(_,_.charAt(0)=="/"?au:ou,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ni(_,Ra)),c.join("")};function fn(c){return new Sr(c)}function ss(c,g,_){c.j=_?Le(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Zr(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function ei(c,g,_){g instanceof tr?(c.i=g,nr(c.i,c.h)):(_||(g=ni(g,lu)),c.i=new tr(g,c.h))}function Ke(c,g,_){c.i.set(g,_)}function ti(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Le(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ni(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,su),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function su(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var to=/[#\/\?@]/g,ou=/[#\?:]/g,au=/[#\?]/g,lu=/[#\?@]/g,Ra=/#/g;function tr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Nt(c){c.g||(c.g=new Map,c.h=0,c.i&&Uh(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=tr.prototype,n.add=function(c,g){Nt(this),this.i=null,c=In(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Fn(c,g){Nt(c),g=In(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Un(c,g){return Nt(c),g=In(c,g),c.g.has(g)}n.forEach=function(c,g){Nt(this),this.g.forEach(function(_,I){_.forEach(function(U){c.call(g,U,I,this)},this)},this)},n.na=function(){Nt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let I=0;I<g.length;I++){const U=c[I];for(let $=0;$<U.length;$++)_.push(g[I])}return _},n.V=function(c){Nt(this);let g=[];if(typeof c=="string")Un(this,c)&&(g=g.concat(this.g.get(In(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},n.set=function(c,g){return Nt(this),this.i=null,c=In(this,c),Un(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ri(c,g,_){Fn(c,g),0<_.length&&(c.i=null,c.g.set(In(c,g),M(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var I=g[_];const $=encodeURIComponent(String(I)),ne=this.V(I);for(I=0;I<ne.length;I++){var U=$;ne[I]!==""&&(U+="="+encodeURIComponent(String(ne[I]))),c.push(U)}}return this.i=c.join("&")};function In(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function nr(c,g){g&&!c.j&&(Nt(c),c.i=null,c.g.forEach(function(_,I){var U=I.toLowerCase();I!=U&&(Fn(this,I),ri(this,U,_))},c)),c.j=g}function jh(c,g){const _=new Zi;if(d.Image){const I=new Image;I.onload=A(en,_,"TestLoadImage: loaded",!0,g,I),I.onerror=A(en,_,"TestLoadImage: error",!1,g,I),I.onabort=A(en,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=A(en,_,"TestLoadImage: timeout",!1,g,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function uu(c,g){const _=new Zi,I=new AbortController,U=setTimeout(()=>{I.abort(),en(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then($=>{clearTimeout(U),$.ok?en(_,"TestPingServer: ok",!0,g):en(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),en(_,"TestPingServer: error",!1,g)})}function en(c,g,_,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(_)}catch{}}function Bh(){this.g=new _a}function cu(c,g,_){const I=_||"";try{Jr(c,function(U,$){let ne=U;m(U)&&(ne=ya(U)),g.push(I+$+"="+encodeURIComponent(ne))})}catch(U){throw g.push(I+"type="+encodeURIComponent("_badmap")),U}}function Ar(c){this.l=c.Ub||null,this.j=c.eb||!1}N(Ar,Yi),Ar.prototype.g=function(){return new os(this.l,this.j)},Ar.prototype.i=(function(c){return function(){return c}})({});function os(c,g){wt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(os,wt),n=os.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Bn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function hu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?jn(this):Bn(this),this.readyState==3&&hu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,jn(this))},n.Qa=function(c){this.g&&(this.response=c,jn(this))},n.ga=function(){this.g&&jn(this)};function jn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Bn(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Bn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Pr(c){let g="";return ue(c,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function ii(c,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Pr(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ke(c,g,_))}function tt(c){wt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(tt,wt);var zh=/^https?$/i,ka=["POST","PUT"];n=tt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ln.g(),this.v=this.o?Ws(this.o):Ws(Ln),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch($){as(this,$);return}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)_.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())_.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),U=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ka,g,void 0))||I||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ne]of _)this.g.setRequestHeader($,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ro(this),this.u=!0,this.g.send(c),this.u=!1}catch($){as(this,$)}};function as(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,no(c),pn(c)}function no(c){c.A||(c.A=!0,Tt(c,"complete"),Tt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Tt(this,"complete"),Tt(this,"abort"),pn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xa(this):this.bb())},n.bb=function(){xa(this)};function xa(c){if(c.h&&typeof u<"u"&&(!c.v[1]||tn(c)!=4||c.Z()!=2)){if(c.u&&tn(c)==4)pa(c.Ea,0,c);else if(Tt(c,"readystatechange"),tn(c)==4){c.h=!1;try{const ne=c.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=ne===0){var U=String(c.D).match(is)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),I=!zh.test(U?U.toLowerCase():"")}_=I}if(_)Tt(c,"complete"),Tt(c,"success");else{c.m=6;try{var $=2<tn(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",no(c)}}finally{pn(c)}}}}function pn(c,g){if(c.g){ro(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Tt(c,"ready");try{_.onreadystatechange=I}catch{}}}function ro(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function tn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),va(g)}};function Va(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function io(c){const g={};c=(c.g&&2<=tn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(K(c[I]))continue;var _=O(c[I]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=g[U]||[];g[U]=$,$.push(_)}k(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function Da(c){this.Aa=0,this.i=[],this.j=new Zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rr("baseRetryDelayMs",5e3,c),this.cb=rr("retryDelaySeedMs",1e4,c),this.Wa=rr("forwardChannelMaxRetries",2,c),this.wa=rr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(c&&c.concurrentRequestLimit),this.Da=new Bh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Da.prototype,n.la=8,n.G=1,n.connect=function(c,g,_,I){ct(0),this.W=c,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=mu(this,null,this.W),ir(this)};function Ot(c){if(so(c),c.G==3){var g=c.U++,_=fn(c.I);if(Ke(_,"SID",c.K),Ke(_,"RID",g),Ke(_,"TYPE","terminate"),Cr(c,_),g=new Mn(c,c.j,g),g.L=2,g.v=ti(fn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=g.v,_=!0),_||(g.g=gu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Qe(g)}pu(c)}function zn(c){c.g&&(Na(c),c.g.cancel(),c.g=null)}function so(c){zn(c),c.u&&(d.clearTimeout(c.u),c.u=null),lo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function ir(c){if(!dn(c.h)&&!c.s){c.s=!0;var g=c.Ga;De||ie(),te||(De(),te=!0),fe.add(g,c),c.B=0}}function $h(c,g){return nu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=On(E(c.Ga,c,g),fu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new Mn(this,this.j,c);let $=this.o;if(this.S&&($?($=S($),x($,this.S)):$=this.S),this.m!==null||this.O||(U.H=$,$=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=si(this,U,g),_=fn(this.I),Ke(_,"RID",c),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),Cr(this,_),$&&(this.O?g="headers="+encodeURIComponent(String(Pr($)))+"&"+g:this.m&&ii(_,this.m,$)),Ca(this.h,U),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",g),Ke(_,"SID","null"),U.T=!0,Js(U,_,null)):Js(U,_,g),this.G=2}}else this.G==3&&(c?oo(this,c):this.i.length==0||dn(this.h)||oo(this))};function oo(c,g){var _;g?_=g.l:_=c.U++;const I=fn(c.I);Ke(I,"SID",c.K),Ke(I,"RID",_),Ke(I,"AID",c.T),Cr(c,I),c.m&&c.o&&ii(I,c.m,c.o),_=new Mn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=si(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ca(c.h,_),Js(_,I,g)}function Cr(c,g){c.H&&ue(c.H,function(_,I){Ke(g,I,_)}),c.l&&Jr({},function(_,I){Ke(g,I,_)})}function si(c,g,_){_=Math.min(c.i.length,_);var I=c.l?E(c.l.Na,c.l,c):null;e:{var U=c.i;let $=-1;for(;;){const ne=["count="+_];$==-1?0<_?($=U[0].g,ne.push("ofs="+$)):$=0:ne.push("ofs="+$);let qe=!0;for(let Et=0;Et<_;Et++){let Fe=U[Et].g;const Pt=U[Et].map;if(Fe-=$,0>Fe)$=Math.max(0,U[Et].g-100),qe=!1;else try{cu(Pt,ne,"req"+Fe+"_")}catch{I&&I(Pt)}}if(qe){I=ne.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,I}function ls(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;De||ie(),te||(De(),te=!0),fe.add(g,c),c.v=0}}function ao(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=On(E(c.Fa,c),fu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=On(E(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),zn(this),du(this))};function Na(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function du(c){c.g=new Mn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=fn(c.qa);Ke(g,"RID","rpc"),Ke(g,"SID",c.K),Ke(g,"AID",c.T),Ke(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(g,"TO",c.ja),Ke(g,"TYPE","xmlhttp"),Cr(c,g),c.m&&c.o&&ii(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ti(fn(g)),_.m=null,_.P=!0,Aa(_,c)}n.Za=function(){this.C!=null&&(this.C=null,zn(this),ao(this),ct(19))};function lo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function uo(c,g){var _=null;if(c.g==g){lo(c),Na(c),c.g=null;var I=2}else if(Qt(c.h,g))_=g.D,ru(c.h,g),I=1;else return;if(c.G!=0){if(g.o)if(I==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var U=c.B;I=Ji(),Tt(I,new Ks(I,_)),ir(c)}else ls(c);else if(U=g.s,U==3||U==0&&0<g.X||!(I==1&&$h(c,g)||I==2&&ao(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),U){case 1:Rr(c,5);break;case 4:Rr(c,10);break;case 3:Rr(c,6);break;default:Rr(c,2)}}}function fu(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Rr(c,g){if(c.j.info("Error code "+g),g==2){var _=E(c.fb,c),I=c.Xa;const U=!I;I=new Sr(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ss(I,"https"),ti(I),U?jh(I.toString(),_):uu(I.toString(),_)}else ct(2);c.G=0,c.l&&c.l.sa(g),pu(c),so(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function pu(c){if(c.G=0,c.ka=[],c.l){const g=iu(c.h);(g.length!=0||c.i.length!=0)&&(F(c.ka,g),F(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function mu(c,g,_){var I=_ instanceof Sr?fn(_):new Sr(_);if(I.g!="")g&&(I.g=g+"."+I.g),Zr(I,I.s);else{var U=d.location;I=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var $=new Sr(null);I&&ss($,I),g&&($.g=g),U&&Zr($,U),_&&($.l=_),I=$}return _=c.D,g=c.ya,_&&g&&Ke(I,_,g),Ke(I,"VER",c.la),Cr(c,I),I}function gu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new tt(new Ar({eb:_})):new tt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oa(){}n=Oa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function co(){}co.prototype.g=function(c,g){return new Xt(c,g)};function Xt(c,g){wt.call(this),this.g=new Da(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!K(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!K(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new sr(this)}N(Xt,wt),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Ot(this.g)},Xt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ya(c),c=_);g.i.push(new tu(g.Ya++,c)),g.G==3&&ir(g)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Ot(this.g),delete this.g,Xt.aa.N.call(this)};function yu(c){Zn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}N(yu,Zn);function vu(){Gs.call(this),this.status=1}N(vu,Gs);function sr(c){this.g=c}N(sr,Oa),sr.prototype.ua=function(){Tt(this.g,"a")},sr.prototype.ta=function(c){Tt(this.g,new yu(c))},sr.prototype.sa=function(c){Tt(this.g,new vu)},sr.prototype.ra=function(){Tt(this.g,"b")},co.prototype.createWebChannel=co.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,eE=function(){return new co},ZT=function(){return Ji()},JT=er,op={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xs.NO_ERROR=0,Xs.TIMEOUT=8,Xs.HTTP_ERROR=6,Rc=Xs,Yl.COMPLETE="complete",YT=Yl,qs.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",wt.prototype.listen=wt.prototype.K,ul=qs,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,XT=tt}).apply(typeof yc<"u"?yc:typeof self<"u"?self:typeof window<"u"?window:{});const D_="@firebase/firestore",N_="4.8.0";class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");let sa="11.10.0";const Os=new Gp("@firebase/firestore");function No(){return Os.logLevel}function le(n,...e){if(Os.logLevel<=Oe.DEBUG){const t=e.map(om);Os.debug(`Firestore (${sa}): ${n}`,...t)}}function qr(n,...e){if(Os.logLevel<=Oe.ERROR){const t=e.map(om);Os.error(`Firestore (${sa}): ${n}`,...t)}}function Mi(n,...e){if(Os.logLevel<=Oe.WARN){const t=e.map(om);Os.warn(`Firestore (${sa}): ${n}`,...t)}}function om(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Te(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,tE(n,i,t)}function tE(n,e,t){let i=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw qr(i),new Error(i)}function We(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||tE(e,o,i)}function Ae(n,e){return n}const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ni{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class nE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qt.UNAUTHENTICATED)))}shutdown(){}}class qV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class GV{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let i=this.i;const o=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ni,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},d=f=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ni)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new nE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new qt(e)}}class KV{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QV{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new KV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(qt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const i=a=>{a.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,le("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new O_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new O_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function YV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function rE(){return new TextEncoder}class am{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=YV(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function xe(n,e){return n<e?-1:n>e?1:0}function ap(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return xe(i,o);{const a=rE(),u=JV(a.encode(b_(n,t)),a.encode(b_(e,t)));return u!==0?u:xe(i,o)}}t+=i>65535?2:1}return xe(n.length,e.length)}function b_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function JV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return xe(n[t],e[t]);return xe(n.length,e.length)}function Yo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}const L_="__name__";class cr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Te(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=cr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return xe(e.length,t.length)}static compareSegments(e,t){const i=cr.isNumericId(e),o=cr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?cr.extractNumericId(e).compare(cr.extractNumericId(t)):ap(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Di.fromString(e.substring(4,e.length-2))}}class Ye extends cr{construct(e,t,i){return new Ye(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const ZV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends cr{construct(e,t,i){return new Ft(e,t,i)}static isValidIdentifier(e){return ZV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L_}static keyField(){return new Ft([L_])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ae(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ae(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ae(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new ae(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ye.fromString(e))}static fromName(e){return new ye(Ye.fromString(e).popFirst(5))}static empty(){return new ye(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ye(e.slice()))}}function iE(n,e,t){if(!t)throw new ae(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eD(n,e,t,i){if(e===!0&&i===!0)throw new ae(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function M_(n){if(!ye.isDocumentKey(n))throw new ae(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F_(n){if(ye.isDocumentKey(n))throw new ae(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _h(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_h(n);throw new ae(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _t(n,e){const t={typeString:n};return e&&(t.value=e),t}function $l(n,e){if(!sE(n))throw new ae(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ae(q.INVALID_ARGUMENT,t);return!0}const U_=-62135596800,j_=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*j_);return new Ge(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<U_)throw new ae(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j_}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($l(e,Ge._jsonSchema))return new Ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-U_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:_t("string",Ge._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ge(0,0))}static max(){return new Se(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Rl=-1;function tD(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(i===1e9?new Ge(t+1,0):new Ge(t,i));return new Fi(o,ye.empty(),e)}function nD(n){return new Fi(n.readTime,n.key,Rl)}class Fi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Fi(Se.min(),ye.empty(),Rl)}static max(){return new Fi(Se.max(),ye.empty(),Rl)}}function rD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:xe(n.largestBatchId,e.largestBatchId))}const iD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function oa(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==iD)throw n;le("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,i)=>{t(e)}))}static reject(e){return new G(((t,i)=>{i(e)}))}static waitFor(e){return new G(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(f=>i(f)))})),u=!0,a===o&&t()}))}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next((o=>o?G.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new G(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((v=>{u[m]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new G(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function oD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function aa(n){return n.name==="IndexedDbTransactionError"}class wh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}wh.ue=-1;const lm=-1;function Th(n){return n==null}function Yc(n){return n===0&&1/n==-1/0}function aD(n){return typeof n=="number"&&Number.isInteger(n)&&!Yc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const oE="";function lD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=B_(e)),e=uD(n.get(t),e);return B_(e)}function uD(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case oE:t+="";break;default:t+=a}}return t}function B_(n){return n+oE+""}function z_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function aE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class at{constructor(e,t){this.comparator=e,this.root=t||Mt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vc(this.root,e,this.comparator,!0)}}class vc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Mt.RED,this.left=o??Mt.EMPTY,this.right=a??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Mt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Mt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class At{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $_(this.data.getIterator())}getIteratorFrom(e){return new $_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new At(this.comparator);return t.data=e,t}}class $_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _n{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new _n([])}unionWith(e){let t=new At(Ft.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new _n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class lE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new lE("Invalid base64 string: "+a):a}})(e);return new Ut(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const cD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(n){if(We(!!n,39018),typeof n=="string"){let e=0;const t=cD.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ji(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}const uE="server_timestamp",cE="__type__",hE="__previous_value__",dE="__local_write_time__";function um(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[cE])===null||t===void 0?void 0:t.stringValue)===uE}function Eh(n){const e=n.mapValue.fields[hE];return um(e)?Eh(e):e}function kl(n){const e=Ui(n.mapValue.fields[dE].timestampValue);return new Ge(e.seconds,e.nanos)}class hD{constructor(e,t,i,o,a,u,d,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const Jc="(default)";class xl{constructor(e,t){this.projectId=e,this.database=t||Jc}static empty(){return new xl("","")}get isDefaultDatabase(){return this.database===Jc}isEqual(e){return e instanceof xl&&e.projectId===this.projectId&&e.database===this.database}}const fE="__type__",dD="__max__",_c={mapValue:{}},pE="__vector__",Zc="value";function Bi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?um(n)?4:pD(n)?9007199254740991:fD(n)?10:11:Te(28295,{value:n})}function _r(n,e){if(n===e)return!0;const t=Bi(n);if(t!==Bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return kl(n).isEqual(kl(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Ui(o.timestampValue),d=Ui(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return ji(o.bytesValue).isEqual(ji(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return dt(o.geoPointValue.latitude)===dt(a.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return dt(o.integerValue)===dt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=dt(o.doubleValue),d=dt(a.doubleValue);return u===d?Yc(u)===Yc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Yo(n.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(z_(u)!==z_(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!_r(u[f],d[f])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function Vl(n,e){return(n.values||[]).find((t=>_r(t,e)))!==void 0}function Jo(n,e){if(n===e)return 0;const t=Bi(n),i=Bi(e);if(t!==i)return xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=dt(a.integerValue||a.doubleValue),f=dt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return H_(n.timestampValue,e.timestampValue);case 4:return H_(kl(n),kl(e));case 5:return ap(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=ji(a),f=ji(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=xe(d[m],f[m]);if(v!==0)return v}return xe(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=xe(dt(a.latitude),dt(u.latitude));return d!==0?d:xe(dt(a.longitude),dt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return W_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,v;const w=a.fields||{},E=u.fields||{},A=(d=w[Zc])===null||d===void 0?void 0:d.arrayValue,N=(f=E[Zc])===null||f===void 0?void 0:f.arrayValue,M=xe(((m=A?.values)===null||m===void 0?void 0:m.length)||0,((v=N?.values)===null||v===void 0?void 0:v.length)||0);return M!==0?M:W_(A,N)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===_c.mapValue&&u===_c.mapValue)return 0;if(a===_c.mapValue)return 1;if(u===_c.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const E=ap(f[w],v[w]);if(E!==0)return E;const A=Jo(d[f[w]],m[v[w]]);if(A!==0)return A}return xe(f.length,v.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{le:t})}}function H_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return xe(n,e);const t=Ui(n),i=Ui(e),o=xe(t.seconds,i.seconds);return o!==0?o:xe(t.nanos,i.nanos)}function W_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Jo(t[o],i[o]);if(a)return a}return xe(t.length,i.length)}function Zo(n){return lp(n)}function lp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ui(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ji(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=lp(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${lp(t.fields[u])}`;return o+"}"})(n.mapValue):Te(61005,{value:n})}function kc(n){switch(Bi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eh(n);return e?16+kc(e):16;case 5:return 2*n.stringValue.length;case 6:return ji(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+kc(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Wi(i.fields,((a,u)=>{o+=a.length+kc(u)})),o})(n.mapValue);default:throw Te(13486,{value:n})}}function q_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function up(n){return!!n&&"integerValue"in n}function cm(n){return!!n&&"arrayValue"in n}function G_(n){return!!n&&"nullValue"in n}function K_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xc(n){return!!n&&"mapValue"in n}function fD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[fE])===null||t===void 0?void 0:t.stringValue)===pE}function _l(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wi(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=_l(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_l(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dD}class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!xc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_l(t)}setAll(e){let t=Ft.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=_l(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());xc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];xc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Wi(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new cn(_l(this.value))}}function mE(n){const e=[];return Wi(n.fields,((t,i)=>{const o=new Ft([t]);if(xc(i)){const a=mE(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new _n(e)}class Gt{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Gt(e,0,Se.min(),Se.min(),Se.min(),cn.empty(),0)}static newFoundDocument(e,t,i,o){return new Gt(e,1,t,Se.min(),i,o,0)}static newNoDocument(e,t){return new Gt(e,2,t,Se.min(),Se.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Se.min(),Se.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eh{constructor(e,t){this.position=e,this.inclusive=t}}function Q_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=ye.comparator(ye.fromName(u.referenceValue),t.key):i=Jo(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function X_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_r(n.position[t],e.position[t]))return!1;return!0}class th{constructor(e,t="asc"){this.field=e,this.dir=t}}function mD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class gE{}class vt extends gE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new yD(e,t,i):t==="array-contains"?new wD(e,i):t==="in"?new TD(e,i):t==="not-in"?new ED(e,i):t==="array-contains-any"?new ID(e,i):new vt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new vD(e,i):new _D(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Jo(t,this.value)):t!==null&&Bi(this.value)===Bi(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends gE{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Jn(e,t)}matches(e){return yE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function yE(n){return n.op==="and"}function vE(n){return gD(n)&&yE(n)}function gD(n){for(const e of n.filters)if(e instanceof Jn)return!1;return!0}function cp(n){if(n instanceof vt)return n.field.canonicalString()+n.op.toString()+Zo(n.value);if(vE(n))return n.filters.map((e=>cp(e))).join(",");{const e=n.filters.map((t=>cp(t))).join(",");return`${n.op}(${e})`}}function _E(n,e){return n instanceof vt?(function(i,o){return o instanceof vt&&i.op===o.op&&i.field.isEqual(o.field)&&_r(i.value,o.value)})(n,e):n instanceof Jn?(function(i,o){return o instanceof Jn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&_E(u,o.filters[d])),!0):!1})(n,e):void Te(19439)}function wE(n){return n instanceof vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`})(n):n instanceof Jn?(function(t){return t.op.toString()+" {"+t.getFilters().map(wE).join(" ,")+"}"})(n):"Filter"}class yD extends vt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class vD extends vt{constructor(e,t){super(e,"in",t),this.keys=TE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class _D extends vt{constructor(e,t){super(e,"not-in",t),this.keys=TE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function TE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>ye.fromName(i.referenceValue)))}class wD extends vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cm(t)&&Vl(t.arrayValue,this.value)}}class TD extends vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vl(this.value.arrayValue,t)}}class ED extends vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vl(this.value.arrayValue,t)}}class ID extends vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Vl(this.value.arrayValue,i)))}}class SD{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function Y_(n,e=null,t=[],i=[],o=null,a=null,u=null){return new SD(n,e,t,i,o,a,u)}function hm(n){const e=Ae(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>cp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Th(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Zo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Zo(i))).join(",")),e.Pe=t}return e.Pe}function dm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_E(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!X_(n.startAt,e.startAt)&&X_(n.endAt,e.endAt)}function hp(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Hl{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function AD(n,e,t,i,o,a,u,d){return new Hl(n,e,t,i,o,a,u,d)}function Ih(n){return new Hl(n)}function J_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function EE(n){return n.collectionGroup!==null}function wl(n){const e=Ae(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new At(Ft.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new th(a,i))})),t.has(Ft.keyField().canonicalString())||e.Te.push(new th(Ft.keyField(),i))}return e.Te}function mr(n){const e=Ae(n);return e.Ie||(e.Ie=PD(e,wl(n))),e.Ie}function PD(n,e){if(n.limitType==="F")return Y_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new th(o.field,a)}));const t=n.endAt?new eh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new eh(n.startAt.position,n.startAt.inclusive):null;return Y_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function dp(n,e){const t=n.filters.concat([e]);return new Hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fp(n,e,t){return new Hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sh(n,e){return dm(mr(n),mr(e))&&n.limitType===e.limitType}function IE(n){return`${hm(mr(n))}|lt:${n.limitType}`}function Oo(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>wE(o))).join(", ")}]`),Th(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Zo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Zo(o))).join(",")),`Target(${i})`})(mr(n))}; limitType=${n.limitType})`}function Ah(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ye.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of wl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,f){const m=Q_(u,d,f);return u.inclusive?m<=0:m<0})(i.startAt,wl(i),o)||i.endAt&&!(function(u,d,f){const m=Q_(u,d,f);return u.inclusive?m>=0:m>0})(i.endAt,wl(i),o))})(n,e)}function CD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SE(n){return(e,t)=>{let i=!1;for(const o of wl(n)){const a=RD(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function RD(n,e,t){const i=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Jo(f,m):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Te(19790,{direction:n.dir})}}class Us{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return aE(this.inner)}size(){return this.innerSize}}const kD=new at(ye.comparator);function Gr(){return kD}const AE=new at(ye.comparator);function cl(...n){let e=AE;for(const t of n)e=e.insert(t.key,t);return e}function PE(n){let e=AE;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Cs(){return Tl()}function CE(){return Tl()}function Tl(){return new Us((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xD=new at(ye.comparator),VD=new At(ye.comparator);function be(...n){let e=VD;for(const t of n)e=e.add(t);return e}const DD=new At(xe);function ND(){return DD}function fm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function RE(n){return{integerValue:""+n}}function OD(n,e){return aD(e)?RE(e):fm(n,e)}class Ph{constructor(){this._=void 0}}function bD(n,e,t){return n instanceof nh?(function(o,a){const u={fields:{[cE]:{stringValue:uE},[dE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&um(a)&&(a=Eh(a)),a&&(u.fields[hE]=a),{mapValue:u}})(t,e):n instanceof Dl?xE(n,e):n instanceof Nl?VE(n,e):(function(o,a){const u=kE(o,a),d=Z_(u)+Z_(o.Ee);return up(u)&&up(o.Ee)?RE(d):fm(o.serializer,d)})(n,e)}function LD(n,e,t){return n instanceof Dl?xE(n,e):n instanceof Nl?VE(n,e):t}function kE(n,e){return n instanceof rh?(function(i){return up(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class nh extends Ph{}class Dl extends Ph{constructor(e){super(),this.elements=e}}function xE(n,e){const t=DE(e);for(const i of n.elements)t.some((o=>_r(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Nl extends Ph{constructor(e){super(),this.elements=e}}function VE(n,e){let t=DE(e);for(const i of n.elements)t=t.filter((o=>!_r(o,i)));return{arrayValue:{values:t}}}class rh extends Ph{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Z_(n){return dt(n.integerValue||n.doubleValue)}function DE(n){return cm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function MD(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Dl&&o instanceof Dl||i instanceof Nl&&o instanceof Nl?Yo(i.elements,o.elements,_r):i instanceof rh&&o instanceof rh?_r(i.Ee,o.Ee):i instanceof nh&&o instanceof nh})(n.transform,e.transform)}class FD{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ch{}function NE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new bE(n.key,Yn.none()):new Wl(n.key,n.data,Yn.none());{const t=n.data,i=cn.empty();let o=new At(Ft.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new qi(n.key,i,new _n(o.toArray()),Yn.none())}}function UD(n,e,t){n instanceof Wl?(function(o,a,u){const d=o.value.clone(),f=t0(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof qi?(function(o,a,u){if(!Vc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=t0(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(OE(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function El(n,e,t,i){return n instanceof Wl?(function(a,u,d,f){if(!Vc(a.precondition,u))return d;const m=a.value.clone(),v=n0(a.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof qi?(function(a,u,d,f){if(!Vc(a.precondition,u))return d;const m=n0(a.fieldTransforms,f,u),v=u.data;return v.setAll(OE(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,i):(function(a,u,d){return Vc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function jD(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=kE(i.transform,o||null);a!=null&&(t===null&&(t=cn.empty()),t.set(i.field,a))}return t||null}function e0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Yo(i,o,((a,u)=>MD(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Wl extends Ch{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class qi extends Ch{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function OE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function t0(n,e,t){const i=new Map;We(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,LD(u,d,t[o]))}return i}function n0(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,bD(a,u,e))}return i}class bE extends Ch{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BD extends Ch{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zD{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&UD(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=El(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=El(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=CE();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const f=NE(u,d);f!==null&&i.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,((t,i)=>e0(t,i)))&&Yo(this.baseMutations,e.baseMutations,((t,i)=>e0(t,i)))}}class pm{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return xD})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new pm(e,t,i,o)}}class $D{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class HD{constructor(e,t){this.count=e,this.unchangedNames=t}}var gt,Ue;function WD(n){switch(n){case q.OK:return Te(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function LE(n){if(n===void 0)return qr("GRPC error has no .code"),q.UNKNOWN;switch(n){case gt.OK:return q.OK;case gt.CANCELLED:return q.CANCELLED;case gt.UNKNOWN:return q.UNKNOWN;case gt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case gt.INTERNAL:return q.INTERNAL;case gt.UNAVAILABLE:return q.UNAVAILABLE;case gt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case gt.NOT_FOUND:return q.NOT_FOUND;case gt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case gt.ABORTED:return q.ABORTED;case gt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case gt.DATA_LOSS:return q.DATA_LOSS;default:return Te(39323,{code:n})}}(Ue=gt||(gt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";const qD=new Di([4294967295,4294967295],0);function r0(n){const e=rE().encode(n),t=new QT;return t.update(e),new Uint8Array(t.digest())}function i0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Di([t,i],0),new Di([o,a],0)]}class mm{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new hl(`Invalid padding: ${t}`);if(i<0)throw new hl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new hl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new hl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Di.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Di.fromNumber(i)));return o.compare(qD)===1&&(o=new Di([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=r0(e),[i,o]=i0(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);if(!this.ye(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new mm(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=r0(e),[i,o]=i0(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);this.we(u)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rh{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Rh(Se.min(),o,new at(xe),Gr(),be())}}class ql{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ql(i,t,be(),be(),be())}}class Dc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class ME{constructor(e,t){this.targetId=e,this.De=t}}class FE{constructor(e,t,i=Ut.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class s0{constructor(){this.ve=0,this.Ce=o0(),this.Fe=Ut.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=be(),t=be(),i=be();return this.Ce.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te(38017,{changeType:a})}})),new ql(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=o0()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class GD{constructor(e){this.We=e,this.Ge=new Map,this.ze=Gr(),this.je=wc(),this.Je=wc(),this.He=new at(xe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const a=o.target;if(hp(a))if(i===0){const u=new ye(a.path);this.Xe(t,u,Gt.newNoDocument(u,Se.min()))}else We(i===1,20013,{expectedCount:i});else{const u=this.ot(t);if(u!==i){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=ji(i).toUint8Array()}catch(f){if(f instanceof lE)return Mi("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new mm(u,o,a)}catch(f){return Mi(f instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&hp(d.target)){const f=new ye(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,Gt.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let i=be();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const o=new Rh(e,t,this.He,this.ze,i);return this.ze=Gr(),this.je=wc(),this.Je=wc(),this.He=new at(xe),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new s0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new At(xe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new At(xe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new s0),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function wc(){return new at(ye.comparator)}function o0(){return new at(ye.comparator)}const KD={asc:"ASCENDING",desc:"DESCENDING"},QD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XD={and:"AND",or:"OR"};class YD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pp(n,e){return n.useProto3Json||Th(e)?e:{value:e}}function ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JD(n,e){return ih(n,e.toTimestamp())}function gr(n){return We(!!n,49232),Se.fromTimestamp((function(t){const i=Ui(t);return new Ge(i.seconds,i.nanos)})(n))}function gm(n,e){return mp(n,e).canonicalString()}function mp(n,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function jE(n){const e=Ye.fromString(n);return We(WE(e),10190,{key:e.toString()}),e}function gp(n,e){return gm(n.databaseId,e.path)}function Of(n,e){const t=jE(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(zE(t))}function BE(n,e){return gm(n.databaseId,e)}function ZD(n){const e=jE(n);return e.length===4?Ye.emptyPath():zE(e)}function yp(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zE(n){return We(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function a0(n,e,t){return{name:gp(n,e),fields:t.value.mapValue.fields}}function eN(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Te(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(We(v===void 0||typeof v=="string",58123),Ut.fromBase64String(v||"")):(We(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Ut.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?q.UNKNOWN:LE(m.code);return new ae(v,m.message||"")})(u);t=new FE(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Of(n,i.document.name),a=gr(i.document.updateTime),u=i.document.createTime?gr(i.document.createTime):Se.min(),d=new cn({mapValue:{fields:i.document.fields}}),f=Gt.newFoundDocument(o,a,u,d),m=i.targetIds||[],v=i.removedTargetIds||[];t=new Dc(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Of(n,i.document),a=i.readTime?gr(i.readTime):Se.min(),u=Gt.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Dc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Of(n,i.document),a=i.removedTargetIds||[];t=new Dc([],a,o,null)}else{if(!("filter"in e))return Te(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new HD(o,a),d=i.targetId;t=new ME(d,u)}}return t}function tN(n,e){let t;if(e instanceof Wl)t={update:a0(n,e.key,e.value)};else if(e instanceof bE)t={delete:gp(n,e.key)};else if(e instanceof qi)t={update:a0(n,e.key,e.data),updateMask:cN(e.fieldMask)};else{if(!(e instanceof BD))return Te(16599,{Rt:e.type});t={verify:gp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof nh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Dl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Nl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof rh)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Te(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:JD(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te(27497)})(n,e.precondition)),t}function nN(n,e){return n&&n.length>0?(We(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?gr(o.updateTime):gr(a);return u.isEqual(Se.min())&&(u=gr(a)),new FD(u,o.transformResults||[])})(t,e)))):[]}function rN(n,e){return{documents:[BE(n,e.path)]}}function iN(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=BE(n,o);const a=(function(m){if(m.length!==0)return HE(Jn.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(E){return{field:bo(E.field),direction:aN(E.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=pp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function sN(n){let e=ZD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(w){const E=$E(w);return E instanceof Jn&&vE(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((E=>(function(N){return new th(Lo(N.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let E;return E=typeof w=="object"?w.value:w,Th(E)?null:E})(t.limit));let f=null;t.startAt&&(f=(function(w){const E=!!w.before,A=w.values||[];return new eh(A,E)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const E=!w.before,A=w.values||[];return new eh(A,E)})(t.endAt)),AD(e,o,u,a,d,"F",f,m)}function oN(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $E(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Lo(t.unaryFilter.field);return vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Lo(t.unaryFilter.field);return vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Lo(t.unaryFilter.field);return vt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Lo(t.unaryFilter.field);return vt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return vt.create(Lo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Jn.create(t.compositeFilter.filters.map((i=>$E(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function aN(n){return KD[n]}function lN(n){return QD[n]}function uN(n){return XD[n]}function bo(n){return{fieldPath:n.canonicalString()}}function Lo(n){return Ft.fromServerFormat(n.fieldPath)}function HE(n){return n instanceof vt?(function(t){if(t.op==="=="){if(K_(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NAN"}};if(G_(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(K_(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NAN"}};if(G_(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(t.field),op:lN(t.op),value:t.value}}})(n):n instanceof Jn?(function(t){const i=t.getFilters().map((o=>HE(o)));return i.length===1?i[0]:{compositeFilter:{op:uN(t.op),filters:i}}})(n):Te(54877,{filter:n})}function cN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function WE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ci{constructor(e,t,i,o,a=Se.min(),u=Se.min(),d=Ut.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class hN{constructor(e){this.gt=e}}function dN(n){const e=sN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fp(e,e.limit,"L"):e}class fN{constructor(){this.Dn=new pN}addToCollectionParentIndex(e,t){return this.Dn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Fi.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class pN{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new At(Ye.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new At(Ye.comparator)).toArray()}}const l0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qE=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(qE,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);class ea{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ea(0)}static ur(){return new ea(-1)}}const u0="LruGarbageCollector",mN=1048576;function c0([n,e],[t,i]){const o=xe(n,t);return o===0?xe(e,i):o}class gN{constructor(e){this.Tr=e,this.buffer=new At(c0),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();c0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yN{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){le(u0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?le(u0,"Ignoring IndexedDB error during garbage collection: ",t):await oa(t)}await this.Rr(3e5)}))}}class vN{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(wh.ue);const i=new gN(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(l0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l0):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,a,u,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(i=w,d=Date.now(),this.removeTargets(e,i,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(m=Date.now(),No()<=Oe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w}))))}}function _N(n,e){return new vN(n,e)}class wN{constructor(){this.changes=new Us((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class TN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class EN{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&El(i.mutation,o,_n.empty(),Ge.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=be()){const o=Cs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=cl();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Cs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,be())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Gr();const u=Tl(),d=(function(){return Tl()})();return t.forEach(((f,m)=>{const v=i.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof qi)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),El(v.mutation,m,v.mutation.getFieldMask(),Ge.now())):u.set(m.key,_n.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>{var w;return d.set(m,new TN(v,(w=u.get(m))!==null&&w!==void 0?w:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=Tl();let o=new at(((u,d)=>u-d)),a=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let v=i.get(f)||_n.empty();v=d.applyToLocalView(m,v),i.set(f,v);const w=(o.get(d.batchId)||be()).add(f);o=o.insert(d.batchId,w)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,w=CE();v.forEach((E=>{if(!a.has(E)){const A=NE(t.get(E),i.get(E));A!==null&&w.set(E,A),a=a.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return G.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return ye.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):EE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):G.resolve(Cs());let d=Rl,f=a;return u.next((m=>G.forEach(m,((v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?G.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{f=f.insert(v,E)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,be()))).next((v=>({batchId:d,changes:PE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let o=cl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=cl();return this.indexManager.getCollectionParents(e,a).next((d=>G.forEach(d,(f=>{const m=(function(w,E){return new Hl(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next((v=>{v.forEach(((w,E)=>{u=u.insert(w,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,Gt.newInvalidDocument(v)))}));let d=cl();return u.forEach(((f,m)=>{const v=a.get(f);v!==void 0&&El(v.mutation,m,_n.empty(),Ge.now()),Ah(t,m)&&(d=d.insert(f,m))})),d}))}}class IN{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return G.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:gr(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:dN(o.bundledQuery),readTime:gr(o.readTime)}})(t)),G.resolve()}}class SN{constructor(){this.overlays=new at(ye.comparator),this.kr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Cs();return G.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.wt(e,t,a)})),G.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const o=Cs(),a=t.length+1,u=new ye(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new at(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=a.get(m.largestBatchId);v===null&&(v=Cs(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Cs(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return G.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new $D(t,i));let a=this.kr.get(t);a===void 0&&(a=be(),this.kr.set(t,a)),this.kr.set(t,a.add(i.key))}}class AN{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class ym{constructor(){this.qr=new At(xt.Qr),this.$r=new At(xt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new xt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new xt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new ye(new Ye([])),i=new xt(t,e),o=new xt(t,e+1),a=[];return this.$r.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ye(new Ye([])),i=new xt(t,e),o=new xt(t,e+1);let a=be();return this.$r.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new xt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ye.comparator(e.key,t.key)||xe(e.Hr,t.Hr)}static Ur(e,t){return xe(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}class PN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new At(xt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new zD(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new xt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return G.resolve(u)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return G.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?lm:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new xt(t,0),o=new xt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),G.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new At(xe);return t.forEach((o=>{const a=new xt(o,0),u=new xt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),G.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;ye.isDocumentKey(a)||(a=a.child(""));const u=new xt(new ye(a),0);let d=new At(xe);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(d=d.add(f.Hr)),!0)}),u),G.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return G.forEach(t.mutations,(o=>{const a=new xt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new xt(t,0),o=this.Yr.firstAfterOrEqual(i);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class CN{constructor(e){this.ni=e,this.docs=(function(){return new at(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let i=Gr();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():Gt.newInvalidDocument(o))})),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Gr();const u=t.path,d=new ye(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||rD(nD(v),i)<=0||(o.has(v.key)||Ah(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return G.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Te(9500)}ri(e,t){return G.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new RN(this)}getSize(e){return G.resolve(this.size)}}class RN extends wN{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),G.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class kN{constructor(e){this.persistence=e,this.ii=new Us((t=>hm(t)),dm),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.si=0,this.oi=new ym,this.targetCount=0,this._i=ea.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),G.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ea(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.hr(t),G.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),G.waitFor(a).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),G.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this.oi.containsKey(t))}}class GE{constructor(e,t){this.ai={},this.overlays={},this.ui=new wh(0),this.ci=!1,this.ci=!0,this.li=new AN,this.referenceDelegate=e(this),this.hi=new kN(this),this.indexManager=new fN,this.remoteDocumentCache=(function(o){return new CN(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new hN(t),this.Ti=new IN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new PN(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){le("MemoryPersistence","Starting transaction:",e);const o=new xN(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return G.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class xN extends sD{constructor(e){super(),this.currentSequenceNumber=e}}class vm{constructor(e){this.persistence=e,this.Ai=new ym,this.Ri=null}static Vi(e){return new vm(e)}get mi(){if(this.Ri)return this.Ri;throw Te(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,(i=>{const o=ye.fromPath(i);return this.fi(e,o).next((a=>{a||t.removeEntry(o,Se.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return G.or([()=>G.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class sh{constructor(e,t){this.persistence=e,this.gi=new Us((i=>lD(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=_N(this,t)}static Vi(e,t){return new sh(e,t)}Ii(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return G.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((a=>a?G.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Se.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kc(e.data.value)),t}Sr(e,t,i){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return G.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class _m{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=be(),o=be();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new _m(e,t.fromCache,i,o)}}class VN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class DN{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return AR()?8:oD(Kt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new VN;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(No()<=Oe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(No()<=Oe.DEBUG&&le("QueryEngine","Query:",Oo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(No()<=Oe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(t))):G.resolve())}ps(e,t){if(J_(t))return G.resolve(null);let i=mr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=fp(t,null,"F"),i=mr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=be(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,fp(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,i,o){return J_(t)||o.isEqual(Se.min())?G.resolve(null):this.gs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,i,o)?G.resolve(null):(No()<=Oe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Oo(t)),this.vs(e,u,t,tD(o,Rl)).next((d=>d)))}))}bs(e,t){let i=new At(SE(e));return t.forEach(((o,a)=>{Ah(e,a)&&(i=i.add(a))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,i){return No()<=Oe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Oo(t)),this.gs.getDocumentsMatchingQuery(e,t,Fi.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}const wm="LocalStore",NN=3e8;class ON{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new at(xe),this.Ms=new Us((a=>hm(a)),dm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EN(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function bN(n,e,t,i){return new ON(n,e,t,i)}async function KE(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let f=be();for(const m of o){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(i,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function LN(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,v){const w=m.batch,E=w.keys();let A=G.resolve();return E.forEach((N=>{A=A.next((()=>v.getEntry(f,N))).next((M=>{const F=m.docVersions.get(N);We(F!==null,48541),M.version.compareTo(F)<0&&(w.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),v.addEntry(M)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(f,w)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let f=be();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function QE(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function MN(n,e){const t=Ae(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,w)=>{const E=o.get(w);if(!E)return;d.push(t.hi.removeMatchingKeys(a,v.removedDocuments,w).next((()=>t.hi.addMatchingKeys(a,v.addedDocuments,w))));let A=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?A=A.withResumeToken(Ut.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,i)),o=o.insert(w,A),(function(M,F,J){return M.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=NN?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(E,A,v)&&d.push(t.hi.updateTargetData(a,A))}));let f=Gr(),m=be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(FN(a,u,e.documentUpdates).next((v=>{f=v.Ls,m=v.ks}))),!i.isEqual(Se.min())){const v=t.hi.getLastRemoteSnapshotVersion(a).next((w=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return G.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=o,a)))}function FN(n,e,t){let i=be(),o=be();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Gr();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(Se.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):le(wm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:o}}))}function UN(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=lm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function jN(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((a=>a?(o=a,G.resolve(o)):t.hi.allocateTargetId(i).next((u=>(o=new Ci(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function vp(n,e,t){const i=Ae(n),o=i.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!aa(u))throw u;le(wm,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function h0(n,e,t){const i=Ae(n);let o=Se.min(),a=be();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,v){const w=Ae(f),E=w.Ms.get(v);return E!==void 0?G.resolve(w.Fs.get(E)):w.hi.getTargetData(m,v)})(i,u,mr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:Se.min(),t?a:be()))).next((d=>(BN(i,CD(e),d),{documents:d,qs:a})))))}function BN(n,e,t){let i=n.xs.get(e)||Se.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.xs.set(e,i)}class d0{constructor(){this.activeTargetIds=ND()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zN{constructor(){this.Fo=new d0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new d0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $N{xo(e){}shutdown(){}}const f0="ConnectivityMonitor";class p0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){le(f0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){le(f0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Tc=null;function _p(){return Tc===null?Tc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Tc++,"0x"+Tc.toString(16)}const bf="RestConnection",HN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WN{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Jc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const u=_p(),d=this.Go(e,t.toUriEncodedString());le(bf,`Sending RPC '${e}' ${u}:`,d,i);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,o,a);const{host:m}=new URL(d),v=na(m);return this.jo(e,d,f,i,v).then((w=>(le(bf,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Mi(bf,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",i),w}))}Jo(e,t,i,o,a,u){return this.Wo(e,t,i,o,a)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Go(e,t){const i=HN[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}class qN{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Ht="WebChannelConnection";class GN extends WN{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,a){const u=_p();return new Promise(((d,f)=>{const m=new XT;m.setWithCredentials(!0),m.listenOnce(YT.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Rc.NO_ERROR:const w=m.getResponseJson();le(Ht,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case Rc.TIMEOUT:le(Ht,`RPC '${e}' ${u} timed out`),f(new ae(q.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const E=m.getStatus();if(le(Ht,`RPC '${e}' ${u} failed with status:`,E,"response text:",m.getResponseText()),E>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const N=A?.error;if(N&&N.status&&N.message){const M=(function(J){const K=J.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(K)>=0?K:q.UNKNOWN})(N.status);f(new ae(M,N.message))}else f(new ae(q.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new ae(q.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{le(Ht,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);le(Ht,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,i,15)}))}P_(e,t,i){const o=_p(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=eE(),d=ZT(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const v=a.join("");le(Ht,`Creating RPC '${e}' stream ${o}: ${v}`,f);const w=u.createWebChannel(v,f);this.T_(w);let E=!1,A=!1;const N=new qN({Ho:F=>{A?le(Ht,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(E||(le(Ht,`Opening RPC '${e}' stream ${o} transport.`),w.open(),E=!0),le(Ht,`RPC '${e}' stream ${o} sending:`,F),w.send(F))},Yo:()=>w.close()}),M=(F,J,K)=>{F.listen(J,(H=>{try{K(H)}catch(Q){setTimeout((()=>{throw Q}),0)}}))};return M(w,ul.EventType.OPEN,(()=>{A||(le(Ht,`RPC '${e}' stream ${o} transport opened.`),N.s_())})),M(w,ul.EventType.CLOSE,(()=>{A||(A=!0,le(Ht,`RPC '${e}' stream ${o} transport closed`),N.__(),this.I_(w))})),M(w,ul.EventType.ERROR,(F=>{A||(A=!0,Mi(Ht,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),N.__(new ae(q.UNAVAILABLE,"The operation could not be completed")))})),M(w,ul.EventType.MESSAGE,(F=>{var J;if(!A){const K=F.data[0];We(!!K,16349);const H=K,Q=H?.error||((J=H[0])===null||J===void 0?void 0:J.error);if(Q){le(Ht,`RPC '${e}' stream ${o} received error:`,Q);const re=Q.status;let ue=(function(C){const x=gt[C];if(x!==void 0)return LE(x)})(re),k=Q.message;ue===void 0&&(ue=q.INTERNAL,k="Unknown error status: "+re+" with message "+Q.message),A=!0,N.__(new ae(ue,k)),w.close()}else le(Ht,`RPC '${e}' stream ${o} received:`,K),N.a_(K)}})),M(d,JT.STAT_EVENT,(F=>{F.stat===op.PROXY?le(Ht,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===op.NOPROXY&&le(Ht,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{N.o_()}),0),N}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Lf(){return typeof document<"u"?document:null}function kh(n){return new YD(n,!0)}class XE{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const m0="PersistentStream";class YE{constructor(e,t,i,o,a,u,d,f){this.Fi=e,this.w_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new XE(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ae(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return le(m0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(le(m0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KN extends YE{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=eN(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Se.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Se.min():u.readTime?gr(u.readTime):Se.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=yp(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=hp(f)?{documents:rN(a,f)}:{query:iN(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=UE(a,u.resumeToken);const m=pp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Se.min())>0){d.readTime=ih(a,u.snapshotVersion.toTimestamp());const m=pp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const i=oN(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=yp(this.serializer),t.removeTarget=e,this.k_(t)}}class QN extends YE{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=nN(e.writeResults,e.commitTime),i=gr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=yp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>tN(this.serializer,i)))};this.k_(t)}}class XN{}class YN extends XN{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ae(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,mp(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(q.UNKNOWN,a.toString())}))}Jo(e,t,i,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,mp(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ae(q.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class JN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qr(t),this._a=!1):le("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const bs="RemoteStore";class ZN{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{i.enqueueAndForget((async()=>{js(this)&&(le(bs,"Restarting streams for network reachability change."),await(async function(f){const m=Ae(f);m.Ia.add(4),await Gl(m),m.Aa.set("Unknown"),m.Ia.delete(4),await xh(m)})(this))}))})),this.Aa=new JN(i,o)}}async function xh(n){if(js(n))for(const e of n.da)await e(!0)}async function Gl(n){for(const e of n.da)await e(!1)}function JE(n,e){const t=Ae(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Sm(t)?Im(t):la(t).x_()&&Em(t,e))}function Tm(n,e){const t=Ae(n),i=la(t);t.Ta.delete(e),i.x_()&&ZE(t,e),t.Ta.size===0&&(i.x_()?i.B_():js(t)&&t.Aa.set("Unknown"))}function Em(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}la(n).H_(e)}function ZE(n,e){n.Ra.$e(e),la(n).Y_(e)}function Im(n){n.Ra=new GD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),la(n).start(),n.Aa.aa()}function Sm(n){return js(n)&&!la(n).M_()&&n.Ta.size>0}function js(n){return Ae(n).Ia.size===0}function eI(n){n.Ra=void 0}async function e2(n){n.Aa.set("Online")}async function t2(n){n.Ta.forEach(((e,t)=>{Em(n,e)}))}async function n2(n,e){eI(n),Sm(n)?(n.Aa.la(e),Im(n)):n.Aa.set("Unknown")}async function r2(n,e,t){if(n.Aa.set("Online"),e instanceof FE&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){le(bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await oh(n,i)}else if(e instanceof Dc?n.Ra.Ye(e):e instanceof ME?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Se.min()))try{const i=await QE(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ta.get(m);v&&a.Ta.set(m,v.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const v=a.Ta.get(f);if(!v)return;a.Ta.set(f,v.withResumeToken(Ut.EMPTY_BYTE_STRING,v.snapshotVersion)),ZE(a,f);const w=new Ci(v.target,f,m,v.sequenceNumber);Em(a,w)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){le(bs,"Failed to raise snapshot:",i),await oh(n,i)}}async function oh(n,e,t){if(!aa(e))throw e;n.Ia.add(1),await Gl(n),n.Aa.set("Offline"),t||(t=()=>QE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(bs,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await xh(n)}))}function tI(n,e){return e().catch((t=>oh(n,t,e)))}async function Vh(n){const e=Ae(n),t=zi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:lm;for(;i2(e);)try{const o=await UN(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,s2(e,o)}catch(o){await oh(e,o)}nI(e)&&rI(e)}function i2(n){return js(n)&&n.Pa.length<10}function s2(n,e){n.Pa.push(e);const t=zi(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function nI(n){return js(n)&&!zi(n).M_()&&n.Pa.length>0}function rI(n){zi(n).start()}async function o2(n){zi(n).na()}async function a2(n){const e=zi(n);for(const t of n.Pa)e.X_(t.mutations)}async function l2(n,e,t){const i=n.Pa.shift(),o=pm.from(i,e,t);await tI(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Vh(n)}async function u2(n,e){e&&zi(n).Z_&&await(async function(i,o){if((function(u){return WD(u)&&u!==q.ABORTED})(o.code)){const a=i.Pa.shift();zi(i).N_(),await tI(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Vh(i)}})(n,e),nI(n)&&rI(n)}async function g0(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),le(bs,"RemoteStore received new credentials");const i=js(t);t.Ia.add(3),await Gl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await xh(t)}async function c2(n,e){const t=Ae(n);e?(t.Ia.delete(2),await xh(t)):e||(t.Ia.add(2),await Gl(t),t.Aa.set("Unknown"))}function la(n){return n.Va||(n.Va=(function(t,i,o){const a=Ae(t);return a.ia(),new KN(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:e2.bind(null,n),e_:t2.bind(null,n),n_:n2.bind(null,n),J_:r2.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Sm(n)?Im(n):n.Aa.set("Unknown")):(await n.Va.stop(),eI(n))}))),n.Va}function zi(n){return n.ma||(n.ma=(function(t,i,o){const a=Ae(t);return a.ia(),new QN(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:o2.bind(null,n),n_:u2.bind(null,n),ea:a2.bind(null,n),ta:l2.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Vh(n)):(await n.ma.stop(),n.Pa.length>0&&(le(bs,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}class Am{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Am(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pm(n,e){if(qr("AsyncQueue",`${e}: ${n}`),aa(n))return new ae(q.UNAVAILABLE,`${e}: ${n}`);throw n}class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=cl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Wo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class y0{constructor(){this.fa=new at(ye.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Te(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ta{constructor(e,t,i,o,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ta(e,t,Wo.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class h2{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class d2{constructor(){this.queries=v0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ae(t),a=o.queries;o.queries=v0(),a.forEach(((u,d)=>{for(const f of d.wa)f.onError(i)}))})(this,new ae(q.ABORTED,"Firestore shutting down"))}}function v0(){return new Us((n=>IE(n)),Sh)}async function iI(n,e){const t=Ae(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(i=2):(a=new h2,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Pm(u,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Cm(t)}async function sI(n,e){const t=Ae(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function f2(n,e){const t=Ae(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(o)&&(i=!0);u.ya=o}}i&&Cm(t)}function p2(n,e,t){const i=Ae(n),o=i.queries.get(e);if(o)for(const a of o.wa)a.onError(t);i.queries.delete(e)}function Cm(n){n.Da.forEach((e=>{e.next()}))}var wp,_0;(_0=wp||(wp={})).Fa="default",_0.Cache="cache";class oI{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ta(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==wp.Cache}}class aI{constructor(e){this.key=e}}class lI{constructor(e){this.key=e}}class m2{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=be(),this.mutatedKeys=be(),this.Xa=SE(e),this.eu=new Wo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new y0,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,w)=>{const E=o.get(v),A=Ah(this.query,w)?w:null,N=!!E&&this.mutatedKeys.has(E.key),M=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let F=!1;E&&A?E.data.isEqual(A.data)?N!==M&&(i.track({type:3,doc:A}),F=!0):this.iu(E,A)||(i.track({type:2,doc:A}),F=!0,(f&&this.Xa(A,f)>0||m&&this.Xa(A,m)<0)&&(d=!0)):!E&&A?(i.track({type:0,doc:A}),F=!0):E&&!A&&(i.track({type:1,doc:E}),F=!0,(f||m)&&(d=!0)),F&&(A?(u=u.add(A),a=M?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{eu:u,ru:i,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,w)=>(function(A,N){const M=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{At:F})}};return M(A)-M(N)})(v.type,w.type)||this.Xa(v.doc,w.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],f=this.Za.size===0&&this.current&&!o?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new ta(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new y0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=be(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new lI(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new aI(i))})),t}uu(e){this.Ha=e.qs,this.Za=be();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ta.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Rm="SyncEngine";class g2{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class y2{constructor(e){this.key=e,this.lu=!1}}class v2{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Us((d=>IE(d)),Sh),this.Tu=new Map,this.Iu=new Set,this.du=new at(ye.comparator),this.Eu=new Map,this.Au=new ym,this.Ru={},this.Vu=new Map,this.mu=ea.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function _2(n,e,t=!0){const i=pI(n);let o;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await uI(i,e,t,!0),o}async function w2(n,e){const t=pI(n);await uI(t,e,!0,!1)}async function uI(n,e,t,i){const o=await jN(n.localStore,mr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await T2(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&JE(n.remoteStore,o),d}async function T2(n,e,t,i,o){n.gu=(w,E,A)=>(async function(M,F,J,K){let H=F.view.nu(J);H.Ds&&(H=await h0(M.localStore,F.query,!1).then((({documents:k})=>F.view.nu(k,H))));const Q=K&&K.targetChanges.get(F.targetId),re=K&&K.targetMismatches.get(F.targetId)!=null,ue=F.view.applyChanges(H,M.isPrimaryClient,Q,re);return T0(M,F.targetId,ue._u),ue.snapshot})(n,w,E,A);const a=await h0(n.localStore,e,!0),u=new m2(e,a.qs),d=u.nu(a.documents),f=ql.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,f);T0(n,t,m._u);const v=new g2(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function E2(n,e,t){const i=Ae(n),o=i.Pu.get(e),a=i.Tu.get(o.targetId);if(a.length>1)return i.Tu.set(o.targetId,a.filter((u=>!Sh(u,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await vp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Tm(i.remoteStore,o.targetId),Tp(i,o.targetId)})).catch(oa)):(Tp(i,o.targetId),await vp(i.localStore,o.targetId,!0))}async function I2(n,e){const t=Ae(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Tm(t.remoteStore,i.targetId))}async function S2(n,e,t){const i=V2(n);try{const o=await(function(u,d){const f=Ae(u),m=Ge.now(),v=d.reduce(((A,N)=>A.add(N.key)),be());let w,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let N=Gr(),M=be();return f.Os.getEntries(A,v).next((F=>{N=F,N.forEach(((J,K)=>{K.isValidDocument()||(M=M.add(J))}))})).next((()=>f.localDocuments.getOverlayedDocuments(A,N))).next((F=>{w=F;const J=[];for(const K of d){const H=jD(K,w.get(K.key).overlayedDocument);H!=null&&J.push(new qi(K.key,H,mE(H.value.mapValue),Yn.exists(!0)))}return f.mutationQueue.addMutationBatch(A,m,J,d)})).next((F=>{E=F;const J=F.applyToLocalDocumentSet(w,M);return f.documentOverlayCache.saveOverlays(A,F.batchId,J)}))})).then((()=>({batchId:E.batchId,changes:PE(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new at(xe)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m})(i,o.batchId,t),await Kl(i,o.changes),await Vh(i.remoteStore)}catch(o){const a=Pm(o,"Failed to persist write");t.reject(a)}}async function cI(n,e){const t=Ae(n);try{const i=await MN(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Eu.get(a);u&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?We(u.lu,14607):o.removedDocuments.size>0&&(We(u.lu,42227),u.lu=!1))})),await Kl(t,i,e)}catch(i){await oa(i)}}function w0(n,e,t){const i=Ae(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const f=Ae(u);f.onlineState=d;let m=!1;f.queries.forEach(((v,w)=>{for(const E of w.wa)E.va(d)&&(m=!0)})),m&&Cm(f)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function A2(n,e,t){const i=Ae(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),a=o&&o.key;if(a){let u=new at(ye.comparator);u=u.insert(a,Gt.newNoDocument(a,Se.min()));const d=be().add(a),f=new Rh(Se.min(),new Map,new at(xe),u,d);await cI(i,f),i.du=i.du.remove(a),i.Eu.delete(e),km(i)}else await vp(i.localStore,e,!1).then((()=>Tp(i,e,t))).catch(oa)}async function P2(n,e){const t=Ae(n),i=e.batch.batchId;try{const o=await LN(t.localStore,e);dI(t,i,null),hI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Kl(t,o)}catch(o){await oa(o)}}async function C2(n,e,t){const i=Ae(n);try{const o=await(function(u,d){const f=Ae(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,d).next((w=>(We(w!==null,37113),v=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(i.localStore,e);dI(i,e,t),hI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Kl(i,o)}catch(o){await oa(o)}}function hI(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function dI(n,e,t){const i=Ae(n);let o=i.Ru[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Tp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||fI(n,i)}))}function fI(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Tm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),km(n))}function T0(n,e,t){for(const i of t)i instanceof aI?(n.Au.addReference(i.key,e),R2(n,i)):i instanceof lI?(le(Rm,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||fI(n,i.key)):Te(19791,{yu:i})}function R2(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(le(Rm,"New document in limbo: "+t),n.Iu.add(i),km(n))}function km(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ye(Ye.fromString(e)),i=n.mu.next();n.Eu.set(i,new y2(t)),n.du=n.du.insert(t,i),JE(n.remoteStore,new Ci(mr(Ih(t.path)),i,"TargetPurposeLimboResolution",wh.ue))}}async function Kl(n,e,t){const i=Ae(n),o=[],a=[],u=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,f)=>{u.push(i.gu(f,e,t).then((m=>{var v;if((m||t)&&i.isPrimaryClient){const w=m?!m.fromCache:(v=t?.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){o.push(m);const w=_m.Es(f.targetId,m);a.push(w)}})))})),await Promise.all(u),i.hu.J_(o),await(async function(f,m){const v=Ae(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>G.forEach(m,(E=>G.forEach(E.Is,(A=>v.persistence.referenceDelegate.addReference(w,E.targetId,A))).next((()=>G.forEach(E.ds,(A=>v.persistence.referenceDelegate.removeReference(w,E.targetId,A)))))))))}catch(w){if(!aa(w))throw w;le(wm,"Failed to update sequence numbers: "+w)}for(const w of m){const E=w.targetId;if(!w.fromCache){const A=v.Fs.get(E),N=A.snapshotVersion,M=A.withLastLimboFreeSnapshotVersion(N);v.Fs=v.Fs.insert(E,M)}}})(i.localStore,a))}async function k2(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){le(Rm,"User change. New user:",e.toKey());const i=await KE(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new ae(q.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Kl(t,i.Bs)}}function x2(n,e){const t=Ae(n),i=t.Eu.get(e);if(i&&i.lu)return be().add(i.key);{let o=be();const a=t.Tu.get(e);if(!a)return o;for(const u of a){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function pI(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A2.bind(null,e),e.hu.J_=f2.bind(null,e.eventManager),e.hu.pu=p2.bind(null,e.eventManager),e}function V2(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C2.bind(null,e),e}class ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return bN(this.persistence,new DN,e.initialUser,this.serializer)}Du(e){return new GE(vm.Vi,this.serializer)}bu(e){return new zN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ah.provider={build:()=>new ah};class D2 extends ah{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){We(this.persistence.referenceDelegate instanceof sh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new yN(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new GE((i=>sh.Vi(i,t)),this.serializer)}}class Ep{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>w0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=k2.bind(null,this.syncEngine),await c2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d2})()}createDatastore(e){const t=kh(e.databaseInfo.databaseId),i=(function(a){return new GN(a)})(e.databaseInfo);return(function(a,u,d,f){return new YN(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new ZN(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>w0(this.syncEngine,t,0)),(function(){return p0.C()?new p0:new $N})())}createSyncEngine(e,t){return(function(o,a,u,d,f,m,v){const w=new v2(o,a,u,d,f,m);return v&&(w.fu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ae(o);le(bs,"RemoteStore shutting down."),a.Ia.add(5),await Gl(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ep.provider={build:()=>new Ep};class mI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const $i="FirestoreClient";class N2{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=qt.UNAUTHENTICATED,this.clientId=am.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{le($i,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(le($i,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Pm(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Mf(n,e){n.asyncQueue.verifyOperationInProgress(),le($i,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await KE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Mi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{le("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Mi("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function E0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await O2(n);le($i,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>g0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>g0(e.remoteStore,o))),n._onlineComponents=e}async function O2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le($i,"Using user provided OfflineComponentProvider");try{await Mf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===q.FAILED_PRECONDITION||o.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Mi("Error using user provided cache. Falling back to memory cache: "+t),await Mf(n,new ah)}}else le($i,"Using default OfflineComponentProvider"),await Mf(n,new D2(void 0));return n._offlineComponents}async function gI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le($i,"Using user provided OnlineComponentProvider"),await E0(n,n._uninitializedComponentsProvider._online)):(le($i,"Using default OnlineComponentProvider"),await E0(n,new Ep))),n._onlineComponents}function b2(n){return gI(n).then((e=>e.syncEngine))}async function Ip(n){const e=await gI(n),t=e.eventManager;return t.onListen=_2.bind(null,e.syncEngine),t.onUnlisten=E2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=w2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=I2.bind(null,e.syncEngine),t}function L2(n,e,t={}){const i=new Ni;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const v=new mI({next:E=>{v.Ou(),u.enqueueAndForget((()=>sI(a,w)));const A=E.docs.has(d);!A&&E.fromCache?m.reject(new ae(q.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&f&&f.source==="server"?m.reject(new ae(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new oI(Ih(d.path),v,{includeMetadataChanges:!0,ka:!0});return iI(a,w)})(await Ip(n),n.asyncQueue,e,t,i))),i.promise}function yI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const I0=new Map;const vI="firestore.googleapis.com",S0=!0;class A0{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vI,this.ssl=S0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:S0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mN)throw new ae(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new WV;switch(i.type){case"firstParty":return new QV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=I0.get(t);i&&(le("ComponentProvider","Removing Datastore"),I0.delete(t),i.terminate())})(this),Promise.resolve()}}function M2(n,e,t,i={}){var o;n=Xn(n,Dh);const a=na(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(cT(`https://${f}`),hT("Firestore",!0)),u.host!==vI&&u.host!==f&&Mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:i});if(!Vs(m,d)&&(n._setSettings(m),i.mockUserToken)){let v,w;if(typeof i.mockUserToken=="string")v=i.mockUserToken,w=qt.MOCK_USER;else{v=gR(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ae(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new qt(E)}n._authCredentials=new qV(new nE(v,w))}}class ua{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ua(this.firestore,e,this._query)}}class ut{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if($l(t,ut._jsonSchema))return new ut(e,i||null,new ye(Ye.fromString(t.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:_t("string",ut._jsonSchemaVersion),referencePath:_t("string")};class Oi extends ua{constructor(e,t,i){super(e,t,Ih(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new ye(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function P0(n,e,...t){if(n=Vt(n),iE("collection","path",e),n instanceof Dh){const i=Ye.fromString(e,...t);return F_(i),new Oi(n,null,i)}{if(!(n instanceof ut||n instanceof Oi))throw new ae(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ye.fromString(e,...t));return F_(i),new Oi(n.firestore,null,i)}}function Nc(n,e,...t){if(n=Vt(n),arguments.length===1&&(e=am.newId()),iE("doc","path",e),n instanceof Dh){const i=Ye.fromString(e,...t);return M_(i),new ut(n,null,new ye(i))}{if(!(n instanceof ut||n instanceof Oi))throw new ae(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ye.fromString(e,...t));return M_(i),new ut(n.firestore,n instanceof Oi?n.converter:null,new ye(i))}}const C0="AsyncQueue";class R0{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new XE(this,"async_queue_retry"),this.oc=()=>{const i=Lf();i&&le(C0,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Lf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Lf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Ni;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!aa(e))throw e;le(C0,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,qr("INTERNAL UNHANDLED ERROR: ",k0(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Am.createAndSchedule(this,e,t,i,(a=>this.lc(a)));return this.ec.push(o),o}ac(){this.tc&&Te(47125,{hc:k0(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function k0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function x0(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Ls extends Dh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new R0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R0(e),this._firestoreClient=void 0,await e}}}function F2(n,e){const t=typeof n=="object"?n:mT(),i=typeof n=="string"?n:Jc,o=Qp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=pR("firestore");a&&M2(o,...a)}return o}function xm(n){if(n._terminated)throw new ae(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||U2(n),n._firestoreClient}function U2(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,f,m,v){return new hD(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,yI(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new N2(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}})(n._componentsProvider))}class Nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nn(Ut.fromBase64String(e))}catch(t){throw new ae(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nn(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($l(e,Nn._jsonSchema))return Nn.fromBase64String(e.bytes)}}Nn._jsonSchemaVersion="firestore/bytes/1.0",Nn._jsonSchema={type:_t("string",Nn._jsonSchemaVersion),bytes:_t("string")};class Nh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vm{constructor(e){this._methodName=e}}class yr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yr._jsonSchemaVersion}}static fromJSON(e){if($l(e,yr._jsonSchema))return new yr(e.latitude,e.longitude)}}yr._jsonSchemaVersion="firestore/geoPoint/1.0",yr._jsonSchema={type:_t("string",yr._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};class vr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($l(e,vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vr(e.vectorValues);throw new ae(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:_t("string",vr._jsonSchemaVersion),vectorValues:_t("object")};const j2=/^__.*__$/;class B2{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wl(e,this.data,t,this.fieldTransforms)}}class _I{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new qi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ec:n})}}class Dm{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Dm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return lh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(wI(this.Ec)&&j2.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class z2{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||kh(e)}Dc(e,t,i,o=!1){return new Dm({Ec:e,methodName:t,bc:i,path:Ft.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oh(n){const e=n._freezeSettings(),t=kh(n._databaseId);return new z2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TI(n,e,t,i,o,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,o);Nm("Data must be an object, but it was:",u,i);const d=EI(i,u);let f,m;if(a.merge)f=new _n(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const E=Sp(e,w,t);if(!u.contains(E))throw new ae(q.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);SI(v,E)||v.push(E)}f=new _n(v),m=u.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=u.fieldTransforms;return new B2(new cn(d),f,m)}class bh extends Vm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}function $2(n,e,t,i){const o=n.Dc(1,e,t);Nm("Data must be an object, but it was:",o,i);const a=[],u=cn.empty();Wi(i,((f,m)=>{const v=Om(e,f,t);m=Vt(m);const w=o.gc(v);if(m instanceof bh)a.push(v);else{const E=Ql(m,w);E!=null&&(a.push(v),u.set(v,E))}}));const d=new _n(a);return new _I(u,d,o.fieldTransforms)}function H2(n,e,t,i,o,a){const u=n.Dc(1,e,t),d=[Sp(e,i,t)],f=[o];if(a.length%2!=0)throw new ae(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)d.push(Sp(e,a[E])),f.push(a[E+1]);const m=[],v=cn.empty();for(let E=d.length-1;E>=0;--E)if(!SI(m,d[E])){const A=d[E];let N=f[E];N=Vt(N);const M=u.gc(A);if(N instanceof bh)m.push(A);else{const F=Ql(N,M);F!=null&&(m.push(A),v.set(A,F))}}const w=new _n(m);return new _I(v,w,u.fieldTransforms)}function W2(n,e,t,i=!1){return Ql(t,n.Dc(i?4:3,e))}function Ql(n,e){if(II(n=Vt(n)))return Nm("Unsupported field value:",e,n),EI(n,e);if(n instanceof Vm)return(function(i,o){if(!wI(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let f=Ql(d,o.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return OD(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Ge.fromDate(i);return{timestampValue:ih(o.serializer,a)}}if(i instanceof Ge){const a=new Ge(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ih(o.serializer,a)}}if(i instanceof yr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Nn)return{bytesValue:UE(o.serializer,i._byteString)};if(i instanceof ut){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:gm(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof vr)return(function(u,d){return{mapValue:{fields:{[fE]:{stringValue:pE},[Zc]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return fm(d.serializer,m)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${_h(i)}`)})(n,e)}function EI(n,e){const t={};return aE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(n,((i,o)=>{const a=Ql(o,e.Vc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function II(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ge||n instanceof yr||n instanceof Nn||n instanceof ut||n instanceof Vm||n instanceof vr)}function Nm(n,e,t){if(!II(t)||!sE(t)){const i=_h(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Sp(n,e,t){if((e=Vt(e))instanceof Nh)return e._internalPath;if(typeof e=="string")return Om(n,e);throw lh("Field path arguments must be of type string or ",n,!1,void 0,t)}const q2=new RegExp("[~\\*/\\[\\]]");function Om(n,e,t){if(e.search(q2)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nh(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lh(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${i}`),u&&(f+=` in document ${o}`),f+=")"),new ae(q.INVALID_ARGUMENT,d+n+f)}function SI(n,e){return n.some((t=>t.isEqual(e)))}class AI{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class G2 extends AI{data(){return super.data()}}function bm(n,e){return typeof e=="string"?Om(n,e):e instanceof Nh?e._internalPath:e._delegate._internalPath}function K2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lm{}class Q2 extends Lm{}function X2(n,e,...t){let i=[];e instanceof Lm&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((f=>f instanceof Mm)).length,d=a.filter((f=>f instanceof Lh)).length;if(u>1||u>0&&d>0)throw new ae(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Lh extends Q2{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Lh(e,t,i)}_apply(e){const t=this._parse(e);return PI(e._query,t),new ua(e.firestore,e.converter,dp(e._query,t))}_parse(e){const t=Oh(e.firestore);return(function(a,u,d,f,m,v,w){let E;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ae(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){D0(w,v);const N=[];for(const M of w)N.push(V0(f,a,M));E={arrayValue:{values:N}}}else E=V0(f,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||D0(w,v),E=W2(d,u,w,v==="in"||v==="not-in");return vt.create(m,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Y2(n,e,t){const i=e,o=bm("where",n);return Lh._create(o,i,t)}class Mm extends Lm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mm(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const f of d)PI(u,f),u=dp(u,f)})(e._query,t),new ua(e.firestore,e.converter,dp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function V0(n,e,t){if(typeof(t=Vt(t))=="string"){if(t==="")throw new ae(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EE(e)&&t.indexOf("/")!==-1)throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ye.fromString(t));if(!ye.isDocumentKey(i))throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return q_(n,new ye(i))}if(t instanceof ut)return q_(n,t._key);throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(t)}.`)}function D0(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PI(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class J2{convertValue(e,t="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Wi(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Zc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>dt(u.doubleValue)));return new vr(a)}convertGeoPoint(e){return new yr(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Eh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(kl(e));default:return null}}convertTimestamp(e){const t=Ui(e);return new Ge(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ye.fromString(e);We(WE(i),9688,{name:e});const o=new xl(i.get(1),i.get(3)),a=new ye(i.popFirst(5));return o.isEqual(t)||qr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function CI(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class dl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xs extends AI{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(bm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",xs._jsonSchema={type:_t("string",xs._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class Oc extends xs{data(e={}){return super.data(e)}}class qo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new dl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Oc(this._firestore,this._userDataWriter,i.key,i,new dl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const f=new Oc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new dl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new Oc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new dl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:Z2(d.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=am.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Z2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}function N0(n){n=Xn(n,ut);const e=Xn(n.firestore,Ls);return L2(xm(e),n._key).then((t=>kI(e,n,t)))}qo._jsonSchemaVersion="firestore/querySnapshot/1.0",qo._jsonSchema={type:_t("string",qo._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class RI extends J2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,t)}}function O0(n,e,t){n=Xn(n,ut);const i=Xn(n.firestore,Ls),o=CI(n.converter,e);return Fm(i,[TI(Oh(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Yn.none())])}function eO(n,e,t,...i){n=Xn(n,ut);const o=Xn(n.firestore,Ls),a=Oh(o);let u;return u=typeof(e=Vt(e))=="string"||e instanceof Nh?H2(a,"updateDoc",n._key,e,t,i):$2(a,"updateDoc",n._key,e),Fm(o,[u.toMutation(n._key,Yn.exists(!0))])}function tO(n,e){const t=Xn(n.firestore,Ls),i=Nc(n),o=CI(n.converter,e);return Fm(t,[TI(Oh(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Yn.exists(!1))]).then((()=>i))}function Ff(n,...e){var t,i,o;n=Vt(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||x0(e[u])||(a=e[u++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(x0(e[u])){const w=e[u];e[u]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[u+1]=(i=w.error)===null||i===void 0?void 0:i.bind(w),e[u+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let f,m,v;if(n instanceof ut)m=Xn(n.firestore,Ls),v=Ih(n._key.path),f={next:w=>{e[u]&&e[u](kI(m,n,w))},error:e[u+1],complete:e[u+2]};else{const w=Xn(n,ua);m=Xn(w.firestore,Ls),v=w._query;const E=new RI(m);f={next:A=>{e[u]&&e[u](new qo(m,E,w,A))},error:e[u+1],complete:e[u+2]},K2(n._query)}return(function(E,A,N,M){const F=new mI(M),J=new oI(A,F,N);return E.asyncQueue.enqueueAndForget((async()=>iI(await Ip(E),J))),()=>{F.Ou(),E.asyncQueue.enqueueAndForget((async()=>sI(await Ip(E),J)))}})(xm(m),v,d,f)}function Fm(n,e){return(function(i,o){const a=new Ni;return i.asyncQueue.enqueueAndForget((async()=>S2(await b2(i),o,a))),a.promise})(xm(n),e)}function kI(n,e,t){const i=t.docs.get(e._key),o=new RI(n);return new xs(n,o,e._key,i,new dl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){sa=o})(ra),Qo(new Ds("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Ls(new GV(i.getProvider("auth-internal")),new XV(u,i.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ae(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xl(m.options.projectId,v)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Vi(D_,N_,e),Vi(D_,N_,"esm2017")})();const nO={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},xI=pT(nO),b0=$V(xI),al=F2(xI),rO=()=>Array.from({length:10}).map(()=>Math.floor(Math.random()*10)).join(""),iO=1e6;function sO(){const[n,e]=ge.useState(null),[t,i]=ge.useState(!1),[o,a]=ge.useState(0),[u,d]=ge.useState(null),[f,m]=ge.useState([]),[v,w]=ge.useState("home"),[E,A]=ge.useState(null),[N,M]=ge.useState(!1),F="nexuspay-default-app";ge.useEffect(()=>{const Q=Vx(b0,re=>{re?(e(re),i(!0)):(e(null),i(!0),a(0),d(null),m([]))});return()=>Q()},[]),ge.useEffect(()=>{if(!n)return;const Q=`artifacts/${F}/users/${n.uid}/user_data/balance`,re=`artifacts/${F}/users/${n.uid}/user_data/profile`,ue=Nc(al,Q),k=Nc(al,re);N0(ue).then(P=>{P.exists()||O0(ue,{balance:iO,lastUpdated:Ge.now()})}).catch(console.error),N0(k).then(P=>{P.exists()||O0(k,{email:n.email||null,accountNumber:rO(),createdAt:Ge.now()})}).catch(console.error);const S=Ff(ue,P=>{P.exists()&&a(P.data().balance||0)},P=>console.error(P)),C=Ff(k,P=>{P.exists()&&d(P.data().accountNumber)},P=>console.error(P)),x=P0(al,`artifacts/${F}/public/data/transactions`),O=X2(x,Y2("senderId","==",n.uid)),L=Ff(O,P=>{const Pe=P.docs.map(je=>({id:je.id,...je.data(),amount:parseFloat(je.data().amount||0)}));Pe.sort((je,Ne)=>(Ne.timestamp?.toDate?.()||0)-(je.timestamp?.toDate?.()||0)),m(Pe)},P=>console.error(P));return()=>{S(),C(),L()}},[n]);const J={signOut:async()=>{try{await Dx(b0),A({type:"info",message:"Signed out."})}catch(Q){console.error(Q)}}},K=async({amount:Q,recipientName:re,recipientAccount:ue,type:k})=>{if(!n){A({type:"alert",message:"Sign in required."});return}const S=parseFloat(Q);if(isNaN(S)||S<=0){A({type:"error",message:"Invalid amount."});return}if(S>o){A({type:"alert",message:`Insufficient funds (${o.toLocaleString()})`});return}M(!0),A({type:"info",message:"Processing transfer and categorization..."});try{const C={prompt:`Categorize this transaction into ['P2P Transfer','Bank Transfer','Bills','Groceries','Food & Dining','Transport','Utilities','Shopping','Other']: Transfer of ${S} to ${re} (${ue})`},x=await fetch("/api/ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});let O="Other",L=0;if(x.ok){const je=await x.json();je?.category&&(O=je.category,L=parseFloat(je.confidence||0))}const P=Nc(al,`artifacts/${F}/users/${n.uid}/user_data/balance`);await eO(P,{balance:Math.max(0,o-S),lastUpdated:Ge.now()});const Pe=P0(al,`artifacts/${F}/public/data/transactions`);await tO(Pe,{senderId:n.uid,senderAccount:u||null,recipient:re||ue,account:ue,amount:S,currency:"NGN",type:k,status:"Completed",timestamp:Ge.now(),description:`${k} to ${re} (${ue})`,category:O,confidence:L}),A({type:"success",message:`Sent ${S.toLocaleString()}  ${O}`})}catch(C){console.error(C),A({type:"security",message:"Transfer failed. Funds secure."})}finally{M(!1)}},H=ge.useMemo(()=>f.reduce((Q,re)=>Q+(parseFloat(re.amount)||0),0),[f]);return se.jsxs("div",{className:"container",children:[se.jsxs("header",{className:"flex items-center justify-between",children:[se.jsxs("div",{children:[se.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-indigo-500",children:"NexusPay"}),se.jsx("p",{className:"text-sm muted",children:"P2P Transfers & AI Care"})]}),se.jsxs("div",{className:"flex items-center gap-4",children:[se.jsxs("div",{className:"text-right",children:[se.jsx("div",{className:"text-xs muted",children:"Balance"}),se.jsxs("div",{className:"font-bold",children:["",o.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),se.jsx("button",{className:"btn btn-primary",onClick:J.signOut,children:"Sign Out"})]})]}),se.jsxs(tR.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.4},className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[se.jsxs("div",{className:"md:col-span-2",children:[se.jsx("div",{className:"card",children:se.jsx(nR,{onTransfer:K,isTransferring:N,accountNumber:u,setNotif:A})}),se.jsx("div",{className:"card mt-6",children:se.jsx(rR,{setNotif:A})})]}),se.jsxs("aside",{className:"space-y-6",children:[se.jsxs("div",{className:"card",children:[se.jsx("h3",{className:"font-semibold",children:"Spending Summary"}),se.jsxs("div",{className:"mt-3",children:[se.jsx("div",{className:"text-sm muted",children:"Total tracked"}),se.jsxs("div",{className:"font-bold text-xl",children:["",H.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),se.jsxs("div",{className:"card",children:[se.jsx("h3",{className:"font-semibold",children:"Transactions"}),se.jsx("div",{className:"mt-3 max-h-60 overflow-auto",children:se.jsx(iR,{txs:f})})]}),se.jsxs("div",{className:"card",children:[se.jsx("h3",{className:"font-semibold",children:"Resources"}),se.jsx("a",{className:"text-indigo-300",href:"/swarm.pdf",target:"_blank",rel:"noreferrer",children:"View uploaded PDF"})]})]})]}),se.jsx("div",{className:"mt-6",children:se.jsx("button",{className:"btn",onClick:()=>w(Q=>Q==="home"?"analysis":"home"),children:"Toggle View"})}),se.jsx(sR,{notification:E,setNotif:A})]})}$S.createRoot(document.getElementById("root")).render(se.jsx(sO,{}));
